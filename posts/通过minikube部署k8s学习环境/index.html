<!DOCTYPE html>
<html lang="en" dir=" auto">

<head><script src="/aLong/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=aLong/livereload" data-no-instant defer></script>
</head>

<body class="" id="
    top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/aLong/" accesskey="h" title="aLong blog (Alt + H)">aLong blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      é€šè¿‡minikubeéƒ¨ç½²K8Så­¦ä¹ ç¯å¢ƒ
    </h1>
    <div class="post-meta"><span title='2023-01-06 15:35:43 +0800 CST'>2023-01-06</span>

</div>
  </header> 
  <div class="post-content"><p>Minikube æ˜¯æœ¬åœ° Kubernetesï¼Œä¸“æ³¨äºè®© Kubernetes æ˜“äºå­¦ä¹ å’Œå¼€å‘ã€‚</p>
<h1 id="macoséƒ¨ç½²æ–¹å¼">MacOSéƒ¨ç½²æ–¹å¼:<a hidden class="anchor" aria-hidden="true" href="#macoséƒ¨ç½²æ–¹å¼">#</a></h1>
<p><a href="https://minikube.sigs.k8s.io/docs/start/">å®˜æ–¹æ•™ç¨‹</a></p>
<p>æœ¬æ¬¡ä½¿ç”¨çš„é©±åŠ¨æ˜¯ parallelsé©±åŠ¨ã€‚æ‰€ä»¥æœ¬æœºéœ€è¦å®‰è£…æ­¤è½¯ä»¶ã€‚
å®‰è£…kubectlï¼š<code>brew install kubectl</code>
å®‰è£…minikubeï¼š</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo install minikube-darwin-amd64 /usr/local/bin/minikube
</span></span></code></pre></div><h3 id="é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤">é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤<a hidden class="anchor" aria-hidden="true" href="#é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤">#</a></h3>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>minikube start <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--kubernetes-version<span style="color:#666">=</span>v1.23.9 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--image-mirror-country<span style="color:#666">=</span><span style="color:#ba2121">&#39;cn&#39;</span> <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--registry-mirror<span style="color:#666">=</span>https://ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ.mirror.aliyuncs.com
</span></span></code></pre></div><p>å› ä¸ºæ˜¯å›½å†…ï¼Œæ‰€ä»¥<code>--image-mirror-country='cn'</code>ã€‚é€šè¿‡<code>--registry-mirror</code>ä¸º Docker daemon é…ç½®é•œåƒåŠ é€Ÿã€‚ä¾‹å¦‚ä¸Šé¢æ˜¯é˜¿é‡Œäº‘é•œåƒæœåŠ¡åœ°å€ã€‚
å› ä¸ºæˆ‘å­¦ä¹ çš„ç‰ˆæœ¬æ˜¯1.23.xï¼Œæ‰€ä»¥åˆ¶å®šäº†ç‰ˆæœ¬<code>--kubernetes-version=v1.23.9</code>ã€‚
é»˜è®¤ä»–è¯»å»äº†é©±åŠ¨é…ç½®ï¼Œè¯†åˆ«æ˜¯<code>parallels</code>,è‡ªå·±å®šä¹‰æ–¹å¼<code>--driver=hyperkit</code>ã€‚</p>
<p>å®‰è£…ç»“æœï¼š
<img loading="lazy" src="https://s2.loli.net/2023/01/06/C3AFxdiPbq8aIuR.jpg" alt="C3AFxdiPbq8aIuR"  />
</p>
<p><em>é”™è¯¯</em>ï¼š
å¦‚æœå­˜åœ¨é”™è¯¯è¯·çœ‹å…·ä½“ä¸Šé¢çš„é—®é¢˜ï¼Œå¾ˆå¤šæƒ…å†µéƒ½èƒ½ç›´è§‚çœ‹åˆ°æç¤ºã€‚å…¶ä¸­å›¾æ ‡æ˜¯â—ï¸æç¤ºä¸€äº›é—®é¢˜ã€ğŸ’¡ç»™ä½ ä¸€äº›å»ºè®®ç­‰ç­‰ã€‚</p>
<h4 id="é©±åŠ¨é€‰æ‹©">é©±åŠ¨é€‰æ‹©ï¼š<a hidden class="anchor" aria-hidden="true" href="#é©±åŠ¨é€‰æ‹©">#</a></h4>
<p>ä½¿ç”¨dockeré©±åŠ¨éœ€è¦å®‰è£…docker desktopã€‚å…¶ä»–é©±åŠ¨ï¼švirtualboxã€vmwareã€sshã€Hyperkitç­‰ã€‚å…·ä½“è¯¦è§<a href="https://minikube.sigs.k8s.io/docs/drivers/">drivers page</a></p>
<h3 id="éªŒè¯ç»“æœ">éªŒè¯ç»“æœ<a hidden class="anchor" aria-hidden="true" href="#éªŒè¯ç»“æœ">#</a></h3>
<ul>
<li>
<p>æŸ¥è¯¢minikubeçŠ¶æ€
<img loading="lazy" src="https://s2.loli.net/2023/01/06/otU8LYBjuFeDa31.png" alt="otU8LYBjuFeDa31"  />
</p>
</li>
<li>
<p>è¿›å…¥é¢æ¿
<img loading="lazy" src="https://s2.loli.net/2023/01/06/FmrBXOTJ1N2AZgU.png" alt="FmrBXOTJ1N2AZgU"  />

<img loading="lazy" src="https://s2.loli.net/2023/01/06/IPBCwUSx7Fb28Ee.png" alt="IPBCwUSx7Fb28Ee"  />
</p>
</li>
<li>
<p>kubectlæ§åˆ¶
<code>minikube kubectl -- get pods -A</code>
<img loading="lazy" src="https://s2.loli.net/2023/01/06/EziUHcpln27ufeB.png" alt="EziUHcpln27ufeB"  />
</p>
</li>
</ul>
<p>kubectlåœ¨minikubeä¸­ä½¿ç”¨ï¼Œéœ€è¦å†™ <code>nimikune kubectl --</code>åé¢åŠ å…¥æ‰§è¡Œçš„å‘½ä»¤ã€‚
macosé»˜è®¤ä½¿ç”¨çš„zshï¼Œåœ¨zshåŠ å…¥aliaså°±å¯ä»¥æ•²çš„å°‘çš„äº†ã€‚</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>vi ~/.zshrc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#åŠ å…¥ä¸€è¡Œ</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">alias</span> <span style="color:#19177c">kubectl</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;minikube kubectl --&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#é€€å‡º</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">source</span> ~/.zshrc
</span></span></code></pre></div><ul>
<li>å†åˆ›å»ºä¸€ä¸ªPod
åˆ›å»ºï¼š
<code>kubectl run nginx --image=nginx:alpine</code>
æŸ¥è¯¢ï¼š
<code>kubectl get pods nginx</code>
è¯¦æƒ…ï¼š
<code>kubectl describe pods nginx</code>
<img loading="lazy" src="https://s2.loli.net/2023/01/06/pYPqIgt84LzBcEU.png" alt="pYPqIgt84LzBcEU"  />
</li>
</ul>
<p>åˆ°è¿™é‡Œk8så¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h1 id="ubuntu2204éƒ¨ç½²æ–¹å¼">Ubuntu22.04éƒ¨ç½²æ–¹å¼<a hidden class="anchor" aria-hidden="true" href="#ubuntu2204éƒ¨ç½²æ–¹å¼">#</a></h1>
<p>æˆ‘åœ¨ç»­é›†ä¸Šå®‰è£…äº†ä¸€ä¸ªUbuntuçš„æ“ä½œç³»ç»Ÿã€‚åœ¨ä¸Šé¢å®‰è£…ä¸€éï¼Œè¿™æ¬¡é©±åŠ¨æ˜¯dockerã€‚
è£…å®Œç³»ç»Ÿåï¼Œå®‰è£…dockerã€‚
<a href="https://docs.docker.com/engine/install/ubuntu/">å®˜æ–¹æ‰‹å†Œ</a></p>
<ol>
<li>å‡†å¤‡æºæ“ä½œ</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get remove docker docker-engine docker.io containerd runc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get -y install <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>ca-certificates <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>curl <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>gnupg <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>lsb-release
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>sudo mkdir -p /etc/apt/keyrings <span style="color:#666">&amp;&amp;</span> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>  <span style="color:#ba2121">&#34;deb [arch=</span><span style="color:#008000;font-weight:bold">$(</span>dpkg --print-architecture<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121"> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">  </span><span style="color:#008000;font-weight:bold">$(</span>lsb_release -cs<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121"> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span></code></pre></div><ol start="2">
<li>å®‰è£…Docker Engine</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo apt-get update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#ç»™å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„ï¼ŒåŠ å…¥å®Œæˆæ³¨é”€å†ç™»é™†</span>
</span></span><span style="display:flex;"><span>sudo usermod -aG docker <span style="color:#19177c">$USER</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># è‡ªå¯</span>
</span></span><span style="display:flex;"><span>sudo systemctl <span style="color:#008000">enable</span> docker.service
</span></span></code></pre></div><ol start="3">
<li>å®‰è£…minikube</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo install minikube-linux-amd64 /usr/local/bin/minikube
</span></span></code></pre></div><p><img loading="lazy" src="https://s2.loli.net/2023/01/06/b8ZMAqLeOviN19D.jpg" alt="b8ZMAqLeOviN19D"  />
</p>
<ol start="4">
<li>éƒ¨ç½²k8s</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>minikube start <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--kubernetes-version<span style="color:#666">=</span>v1.23.9 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--image-mirror-country<span style="color:#666">=</span><span style="color:#ba2121">&#39;cn&#39;</span> <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--registry-mirror<span style="color:#666">=</span>https://????????.mirror.aliyuncs.com
</span></span></code></pre></div><p><img loading="lazy" src="https://s2.loli.net/2023/01/06/CkRH2nNBodxzh6F.jpg" alt="CkRH2nNBodxzh6F"  />
</p>
<p>å¯ä»¥çœ‹åˆ°è£…å®Œä»–è¿˜æç¤ºæˆ‘ kubectlæ²¡æœ‰ã€‚
5. å®‰è£…kubectl
<code>curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl</code></p>
<p><code>sudo chmod +x kubectl &amp;&amp; sudo  mv ./kubectl /usr/local/bin/kubectl </code></p>
<p><img loading="lazy" src="https://s2.loli.net/2023/01/06/rOksbmSFMdhXipu.jpg" alt="rOksbmSFMdhXipu"  />
</p>
<p>åˆ°æ­¤å†Ubuntu2204ä¹Ÿéƒ¨ç½²å®Œæˆã€‚</p>
<p>åé¢ç»§ç»­å­¦ä¹ </p>
<p>ç¥å¥½ï½</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/aLong/tags/linux/">Linux</a></li>
      <li><a href="http://localhost:1313/aLong/tags/kubernetes/">Kubernetes</a></li>
    </ul>
  </footer>
</article>
    </main>
    <footer>
    // ... å…¶ä»–é¡µè„šå†…å®¹ ...
    <a href="http://localhost:1313/aLong/index.xml">è®¢é˜…RSS</a>
</footer></body>

</html>