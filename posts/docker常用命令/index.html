<!DOCTYPE html>
<html lang="en" dir=" auto">

<head><script src="/aLong/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=aLong/livereload" data-no-instant defer></script>
</head>

<body class="" id="
    top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/aLong/" accesskey="h" title="aLong blog (Alt + H)">aLong blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Docker常用命令
    </h1>
    <div class="post-meta"><span title='2019-04-11 15:09:19 +0000 UTC'>2019-04-11</span>

</div>
  </header> 
  <div class="post-content"><h2 id="docker常用命令">Docker常用命令<a hidden class="anchor" aria-hidden="true" href="#docker常用命令">#</a></h2>
<p>说常用不如说自己用到的命令。</p>
<h3 id="容器相关">容器相关<a hidden class="anchor" aria-hidden="true" href="#容器相关">#</a></h3>
<p>学习了一下docker，基础常用命令记录下。
####docker run/新建并启动容器
这个run其实包含两个不走，先执行新建容器(docker create),接着启动容器(docker start)。敲两个是不是有点麻烦吧。</p>
<p>docker run  xx [COMMAND]</p>
<p>例子 <code>docker run -it ubuntu:14.04 /bin/bash</code></p>
<p>这里希望启动一个基于 ubuntu 14.04镜像 来创建一个容器，-t选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上，-i则让容器的标准输入保持打开。更多的命令选项可以通过man docker-run命令来查看。之后命令还有一项，启动一个bash终端。 这条命令涉及到很多知识了。
-参数 常用 -i -d -t -p，   -d 是否在后台运行，-p 映射到本地主机端口。剩下的看手册来补下。</p>
<h4 id="docker-create--docker-start--docker-stop">docker create &amp;&amp; docker start &amp;&amp; docker stop<a hidden class="anchor" aria-hidden="true" href="#docker-create--docker-start--docker-stop">#</a></h4>
<p>创建，启动，停止。
有一个容易停止了，可以用 docker start  XX容器 启动。 XX 可以是容器的ID，也可以是name。</p>
<h4 id="docker-rm">docker rm<a hidden class="anchor" aria-hidden="true" href="#docker-rm">#</a></h4>
<p>删除一个容器（最好先把这个容器停止了再删除）。
-f 可以强制删除。-v 删除与容器关联的卷（如果刚学习还真不知道什么是卷）。</p>
<h4 id="docker-attach">docker attach<a hidden class="anchor" aria-hidden="true" href="#docker-attach">#</a></h4>
<p>进入容器，如果开启了一个 -d 后台启动容器。 我们怎么进去看看？  <code>docker attach XX容器</code>
这个命令我学习时候用过，感觉有时候不太好使。命令执行完卡那不动。</p>
<h4 id="docker-exec">docker exec<a hidden class="anchor" aria-hidden="true" href="#docker-exec">#</a></h4>
<p>可以在容器内直接执行任意命令。
<code>docker exec -it xx /bin/bash</code>    这可以进入xx镜像，并打开bash。 相比这个比上面的attach 好多了。</p>
<h4 id="docker-ps">docker ps<a hidden class="anchor" aria-hidden="true" href="#docker-ps">#</a></h4>
<p>列出启动中的容器， <code>docker ps -a</code> 列出所有镜像。</p>
<p>###仓库相关</p>
<h4 id="docker-images">docker images<a hidden class="anchor" aria-hidden="true" href="#docker-images">#</a></h4>
<p>列出本地镜像文件</p>
<h4 id="docker-rmi">docker rmi<a hidden class="anchor" aria-hidden="true" href="#docker-rmi">#</a></h4>
<p>删除本地镜像文件</p>
<h4 id="docker-seach-xxx">docker seach xxx<a hidden class="anchor" aria-hidden="true" href="#docker-seach-xxx">#</a></h4>
<p>在docker hub查询xxx 镜像</p>
<h4 id="docker-pull">docker pull<a hidden class="anchor" aria-hidden="true" href="#docker-pull">#</a></h4>
<p>像不像git？ docker pull xx 可以下载xx镜像到本地。 （还能联想到 push 吧？ commit ？ 这些吧）</p>
<h4 id="docker-login">docker login<a hidden class="anchor" aria-hidden="true" href="#docker-login">#</a></h4>
<p>登陆docker hub</p>
<h4 id="docker-push">docker push<a hidden class="anchor" aria-hidden="true" href="#docker-push">#</a></h4>
<p>推送本地镜像到docker hub上。</p>
<h3 id="数据相关">数据相关<a hidden class="anchor" aria-hidden="true" href="#数据相关">#</a></h3>
<h4 id="-v">-v<a hidden class="anchor" aria-hidden="true" href="#-v">#</a></h4>
<p>在容器内创建数据卷    <code>docker run -d  -v /test ubuntu</code>  在此镜像下创建一个test数据卷
也可以挂在主机目录为数据卷  <code>docker run -d  -v /usr/local/src:/opt/test ubuntu</code>   将本地的/usr/lcoal/src  挂载到此镜象的 /opt/test  作为数据卷。 在本机修改，容器内可以看到。
这里可以增加参数来控制读写，默认读写。</p>
<h4 id="volumes-from">volumes-from<a hidden class="anchor" aria-hidden="true" href="#volumes-from">#</a></h4>
<p>数据卷容器
容器与容器间的数据挂在参数。
例如有个容器为 files    ，通过另一个 test来挂在files。 <code>docker run -it --volumes-from files --name test ubuntu</code>
<code>--name</code> 是为后者容器起名。这个名字叫test 挂在了files 容器的数据。</p>
<h3 id="端口映射容器互联">端口映射，容器互联<a hidden class="anchor" aria-hidden="true" href="#端口映射容器互联">#</a></h3>
<h4 id="-p---p">-p &amp;&amp; -P<a hidden class="anchor" aria-hidden="true" href="#-p---p">#</a></h4>
<p><code>docker run -itd -p 8080:80 --name web nginx:1.15</code>   本机8080端口映射到容器80.
-p 需要自己分配端口   -P Docker会随机映射一个49000~49900的端口</p>
<h4 id="docker-port">docker port<a hidden class="anchor" aria-hidden="true" href="#docker-port">#</a></h4>
<p>查看映射端口配置</p>
<h4 id="link">link<a hidden class="anchor" aria-hidden="true" href="#link">#</a></h4>
<p><code>--link</code>参数可以让容器之间安全地进行交互</p>
<p>基本上了解到的命令吧，后续根据搭建环境以及使用中来丰富其他的命令和参数。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/aLong/tags/docker/">Docker</a></li>
    </ul>
  </footer>
</article>
    </main>
    <footer>
    // ... 其他页脚内容 ...
    <a href="http://localhost:1313/aLong/index.xml">订阅RSS</a>
</footer></body>

</html>