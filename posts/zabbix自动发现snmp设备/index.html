<!DOCTYPE html>
<html lang="en" dir=" auto">

<head><script src="/aLong/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=aLong/livereload" data-no-instant defer></script>
</head>

<body class="" id="
    top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/aLong/" accesskey="h" title="aLong blog (Alt + H)">aLong blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Zabbix自动发现SNMP设备
    </h1>
    <div class="post-meta"><span title='2022-10-12 11:15:29 +0800 CST'>2022-10-12</span>

</div>
  </header> 
  <div class="post-content"><blockquote>
<p>Zabbix提供高效灵活的网络自动发现功能。
网络发现的优势：</p>
<ul>
<li>加快部署速度</li>
<li>简化管理</li>
<li>在快速变化的环境中避免过度管理
<a href="https://www.zabbix.com/documentation/6.0/zh/manual/discovery/network_discovery">manual-zh</a></li>
</ul>
</blockquote>
<h2 id="发现snmp例子">发现SNMP例子<a hidden class="anchor" aria-hidden="true" href="#发现snmp例子">#</a></h2>
<p><em>网段内存在几天设备，其中一台是SNMPv2，一台SNMPv3，通过发现将他们加入并监控</em></p>
<p>大概流程：</p>
<ol>
<li>发现规则，通过发现规则去发现设备。</li>
<li>发现后的动作，发现设备后做什么。</li>
<li>验证发现结果。</li>
</ol>
<h3 id="创建发现规则">创建发现规则<a hidden class="anchor" aria-hidden="true" href="#创建发现规则">#</a></h3>
<p><img loading="lazy" src="https://s2.loli.net/2022/09/21/QkadRCY9h4MlpH1.png" alt="QkadRCY9h4MlpH1"  />

<code>Configuration -&gt; Discovery -&gt; Create discovery rule </code></p>
<p><img loading="lazy" src="https://s2.loli.net/2022/09/21/lUKJ59gjF6wtWzv.png" alt="lUKJ59gjF6wtWzv"  />
</p>
<p>通过SNMPv2协议，根据oid检查。 这个oid是设备名。 community是根据设备来的。通过SNMP取设备名，host名称是IP地址，可见名称是SNMP取的设备名称。</p>
<p><strong>重点配置内容</strong>：</p>
<ul>
<li>IP range  发现IP范围</li>
<li>Update interval 发现周期</li>
<li>Checks  使用此检查列表来执行网络发现</li>
<li>Device uniqueness criteria 唯一标识</li>
<li>Host name  主机名称</li>
<li>Visible name 可见名称</li>
</ul>
<h3 id="创建发现动作">创建发现动作<a hidden class="anchor" aria-hidden="true" href="#创建发现动作">#</a></h3>
<p><img loading="lazy" src="https://s2.loli.net/2022/09/21/aE74jtgmZpHCJkG.png" alt="aE74jtgmZpHCJkG"  />
</p>
<p><code>Configuration -&gt; Actions -&gt; Discovery actions</code></p>
<p><img loading="lazy" src="https://s2.loli.net/2022/09/21/k2zJWCjy13bVt7Z.png" alt="k2zJWCjy13bVt7Z"  />
</p>
<p>Action 选项中：
主要配置Conditions内容：
我写了两个条件，因为我发现写了v2，v3版本的协议。所以有两个条件。如果都是v2就写一个就ok。简单来讲满足我demo。</p>
<p>Operations 选项：
<img loading="lazy" src="https://s2.loli.net/2022/09/21/rEc2Y5apTeO6JK3.png" alt="rEc2Y5apTeO6JK3"  />
</p>
<ol>
<li>发现的设备添加， Add host 。</li>
<li>加入设备组， Add to host groups：组名。</li>
<li>关联模版，Link to templates：模版名。</li>
<li>开启Host。</li>
</ol>
<p>通过这个配置后，发现的主机会根据这个配置进行操作。</p>
<h3 id="最终结果">最终结果<a hidden class="anchor" aria-hidden="true" href="#最终结果">#</a></h3>
<p><img loading="lazy" src="https://s2.loli.net/2022/09/21/iPfZF8gN7K4yOjp.png" alt="iPfZF8gN7K4yOjp"  />

通过Monitoring -&gt; Discovery 能看到发现信息。</p>
<p><img loading="lazy" src="https://s2.loli.net/2022/09/21/FV39yemtZ45uYgb.png" alt="FV39yemtZ45uYgb"  />
</p>
<p>并且监控的主机配置参数都正常，可以取到模版配置的数据。</p>
<p>简单的demo完成。
完结
祝好 ～</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/aLong/tags/zabbix/">Zabbix</a></li>
    </ul>
  </footer>
</article>
    </main>
    <footer>
    // ... 其他页脚内容 ...
    <a href="http://localhost:1313/aLong/index.xml">订阅RSS</a>
</footer></body>

</html>