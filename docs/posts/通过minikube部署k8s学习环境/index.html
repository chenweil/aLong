<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Hugo 0.109.0">
  
  <meta name="description" content="Minikube æ˜¯æœ¬åœ° Kubernetesï¼Œä¸“æ³¨äºè®© Kubernetes æ˜“äºå­¦ä¹ å’Œå¼€å‘ã€‚
MacOSéƒ¨ç½²æ–¹å¼: å®˜æ–¹æ•™ç¨‹
æœ¬æ¬¡ä½¿ç”¨çš„é©±åŠ¨æ˜¯ parallelsé©±åŠ¨ã€‚æ‰€ä»¥æœ¬æœºéœ€è¦å®‰è£…æ­¤è½¯ä»¶ã€‚ å®‰è£…kubectlï¼šbrew install kubectl å®‰è£…minikubeï¼š
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64 sudo install minikube-darwin-amd64 /usr/local/bin/minikube é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤ minikube start \ --kubernetes-version=v1.23.9 \ --image-mirror-country=&#39;cn&#39; \ --registry-mirror=https://ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ.mirror.aliyuncs.com å› ä¸ºæ˜¯å›½å†…ï¼Œæ‰€ä»¥--image-mirror-country=&#39;cn&#39;ã€‚é€šè¿‡--registry-mirrorä¸º Docker daemon é…ç½®é•œåƒåŠ é€Ÿã€‚ä¾‹å¦‚ä¸Šé¢æ˜¯é˜¿é‡Œäº‘é•œåƒæœåŠ¡åœ°å€ã€‚ å› ä¸ºæˆ‘å­¦ä¹ çš„ç‰ˆæœ¬æ˜¯1.23.xï¼Œæ‰€ä»¥åˆ¶å®šäº†ç‰ˆæœ¬--kubernetes-version=v1.23.9ã€‚ é»˜è®¤ä»–è¯»å»äº†é©±åŠ¨é…ç½®ï¼Œè¯†åˆ«æ˜¯parallels,è‡ªå·±å®šä¹‰æ–¹å¼--driver=hyperkitã€‚
å®‰è£…ç»“æœï¼š é”™è¯¯ï¼š å¦‚æœå­˜åœ¨é”™è¯¯è¯·çœ‹å…·ä½“ä¸Šé¢çš„é—®é¢˜ï¼Œå¾ˆå¤šæƒ…å†µéƒ½èƒ½ç›´è§‚çœ‹åˆ°æç¤ºã€‚å…¶ä¸­å›¾æ ‡æ˜¯â—ï¸æç¤ºä¸€äº›é—®é¢˜ã€ğŸ’¡ç»™ä½ ä¸€äº›å»ºè®®ç­‰ç­‰ã€‚
é©±åŠ¨é€‰æ‹©ï¼š ä½¿ç”¨dockeré©±åŠ¨éœ€è¦å®‰è£…docker desktopã€‚å…¶ä»–é©±åŠ¨ï¼švirtualboxã€vmwareã€sshã€Hyperkitç­‰ã€‚å…·ä½“è¯¦è§drivers page
éªŒè¯ç»“æœ æŸ¥è¯¢minikubeçŠ¶æ€ è¿›å…¥é¢æ¿ kubectlæ§åˆ¶ minikube kubectl -- get pods -A kubectlåœ¨minikubeä¸­ä½¿ç”¨ï¼Œéœ€è¦å†™ nimikune kubectl --åé¢åŠ å…¥æ‰§è¡Œçš„å‘½ä»¤ã€‚ macosé»˜è®¤ä½¿ç”¨çš„zshï¼Œåœ¨zshåŠ å…¥aliaså°±å¯ä»¥æ•²çš„å°‘çš„äº†ã€‚
vi ~/.zshrc #åŠ å…¥ä¸€è¡Œ alias kubectl=&#34;minikube kubectl --&#34; #é€€å‡º source ~/.zshrc å†åˆ›å»ºä¸€ä¸ªPod åˆ›å»ºï¼š kubectl run nginx --image=nginx:alpine æŸ¥è¯¢ï¼š kubectl get pods nginx è¯¦æƒ…ï¼š kubectl describe pods nginx åˆ°è¿™é‡Œk8så¯ä»¥ä½¿ç”¨äº†ã€‚">
  <link rel="stylesheet" href="https://blog.51ai.vip/aLong/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  
  
  
  <link rel="stylesheet" href="https://blog.51ai.vip/aLong/css/cayman.ea0e967413f3851071cc8ace3621bc4205fe8fa79b2abe3d7bf94ff2841f0d47.css">
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

  <title>é€šè¿‡minikubeéƒ¨ç½²K8Så­¦ä¹ ç¯å¢ƒ | aLong blog</title>
</head>

<body>
  <section class="page-header">
  <h1 class="project-name">
    aLong
  </h1>
  <h2 class="project-tagline">
    Hello world
  </h2>
  <nav>
    
    
      
      
      
      
      <a href="/aLong/" class="btn">Blog</a>
    
      
      
      
      
      <a href="/aLong/tags/" class="btn">Tags</a>
    
  </nav>
</section>

  <section class="main-content">
    
  <h1>é€šè¿‡minikubeéƒ¨ç½²K8Så­¦ä¹ ç¯å¢ƒ</h1>
  <p>Minikube æ˜¯æœ¬åœ° Kubernetesï¼Œä¸“æ³¨äºè®© Kubernetes æ˜“äºå­¦ä¹ å’Œå¼€å‘ã€‚</p>
<h1 id="macoséƒ¨ç½²æ–¹å¼">MacOSéƒ¨ç½²æ–¹å¼:</h1>
<p><a href="https://minikube.sigs.k8s.io/docs/start/">å®˜æ–¹æ•™ç¨‹</a></p>
<p>æœ¬æ¬¡ä½¿ç”¨çš„é©±åŠ¨æ˜¯ parallelsé©±åŠ¨ã€‚æ‰€ä»¥æœ¬æœºéœ€è¦å®‰è£…æ­¤è½¯ä»¶ã€‚
å®‰è£…kubectlï¼š<code>brew install kubectl</code>
å®‰è£…minikubeï¼š</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo install minikube-darwin-amd64 /usr/local/bin/minikube
</span></span></code></pre></div><h3 id="é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤">é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤</h3>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>minikube start <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--kubernetes-version<span style="color:#666">=</span>v1.23.9 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--image-mirror-country<span style="color:#666">=</span><span style="color:#ba2121">&#39;cn&#39;</span> <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--registry-mirror<span style="color:#666">=</span>https://ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ.mirror.aliyuncs.com
</span></span></code></pre></div><p>å› ä¸ºæ˜¯å›½å†…ï¼Œæ‰€ä»¥<code>--image-mirror-country='cn'</code>ã€‚é€šè¿‡<code>--registry-mirror</code>ä¸º Docker daemon é…ç½®é•œåƒåŠ é€Ÿã€‚ä¾‹å¦‚ä¸Šé¢æ˜¯é˜¿é‡Œäº‘é•œåƒæœåŠ¡åœ°å€ã€‚
å› ä¸ºæˆ‘å­¦ä¹ çš„ç‰ˆæœ¬æ˜¯1.23.xï¼Œæ‰€ä»¥åˆ¶å®šäº†ç‰ˆæœ¬<code>--kubernetes-version=v1.23.9</code>ã€‚
é»˜è®¤ä»–è¯»å»äº†é©±åŠ¨é…ç½®ï¼Œè¯†åˆ«æ˜¯<code>parallels</code>,è‡ªå·±å®šä¹‰æ–¹å¼<code>--driver=hyperkit</code>ã€‚</p>
<p>å®‰è£…ç»“æœï¼š
<img src="https://s2.loli.net/2023/01/06/C3AFxdiPbq8aIuR.jpg" alt="C3AFxdiPbq8aIuR"></p>
<p><em>é”™è¯¯</em>ï¼š
å¦‚æœå­˜åœ¨é”™è¯¯è¯·çœ‹å…·ä½“ä¸Šé¢çš„é—®é¢˜ï¼Œå¾ˆå¤šæƒ…å†µéƒ½èƒ½ç›´è§‚çœ‹åˆ°æç¤ºã€‚å…¶ä¸­å›¾æ ‡æ˜¯â—ï¸æç¤ºä¸€äº›é—®é¢˜ã€ğŸ’¡ç»™ä½ ä¸€äº›å»ºè®®ç­‰ç­‰ã€‚</p>
<h4 id="é©±åŠ¨é€‰æ‹©">é©±åŠ¨é€‰æ‹©ï¼š</h4>
<p>ä½¿ç”¨dockeré©±åŠ¨éœ€è¦å®‰è£…docker desktopã€‚å…¶ä»–é©±åŠ¨ï¼švirtualboxã€vmwareã€sshã€Hyperkitç­‰ã€‚å…·ä½“è¯¦è§<a href="https://minikube.sigs.k8s.io/docs/drivers/">drivers page</a></p>
<h3 id="éªŒè¯ç»“æœ">éªŒè¯ç»“æœ</h3>
<ul>
<li>
<p>æŸ¥è¯¢minikubeçŠ¶æ€
<img src="https://s2.loli.net/2023/01/06/otU8LYBjuFeDa31.png" alt="otU8LYBjuFeDa31"></p>
</li>
<li>
<p>è¿›å…¥é¢æ¿
<img src="https://s2.loli.net/2023/01/06/FmrBXOTJ1N2AZgU.png" alt="FmrBXOTJ1N2AZgU">
<img src="https://s2.loli.net/2023/01/06/IPBCwUSx7Fb28Ee.png" alt="IPBCwUSx7Fb28Ee"></p>
</li>
<li>
<p>kubectlæ§åˆ¶
<code>minikube kubectl -- get pods -A</code>
<img src="https://s2.loli.net/2023/01/06/EziUHcpln27ufeB.png" alt="EziUHcpln27ufeB"></p>
</li>
</ul>
<p>kubectlåœ¨minikubeä¸­ä½¿ç”¨ï¼Œéœ€è¦å†™ <code>nimikune kubectl --</code>åé¢åŠ å…¥æ‰§è¡Œçš„å‘½ä»¤ã€‚
macosé»˜è®¤ä½¿ç”¨çš„zshï¼Œåœ¨zshåŠ å…¥aliaså°±å¯ä»¥æ•²çš„å°‘çš„äº†ã€‚</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>vi ~/.zshrc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#åŠ å…¥ä¸€è¡Œ</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">alias</span> <span style="color:#19177c">kubectl</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;minikube kubectl --&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#é€€å‡º</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">source</span> ~/.zshrc
</span></span></code></pre></div><ul>
<li>å†åˆ›å»ºä¸€ä¸ªPod
åˆ›å»ºï¼š
<code>kubectl run nginx --image=nginx:alpine</code>
æŸ¥è¯¢ï¼š
<code>kubectl get pods nginx</code>
è¯¦æƒ…ï¼š
<code>kubectl describe pods nginx</code>
<img src="https://s2.loli.net/2023/01/06/pYPqIgt84LzBcEU.png" alt="pYPqIgt84LzBcEU"></li>
</ul>
<p>åˆ°è¿™é‡Œk8så¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h1 id="ubuntu2204éƒ¨ç½²æ–¹å¼">Ubuntu22.04éƒ¨ç½²æ–¹å¼</h1>
<p>æˆ‘åœ¨ç»­é›†ä¸Šå®‰è£…äº†ä¸€ä¸ªUbuntuçš„æ“ä½œç³»ç»Ÿã€‚åœ¨ä¸Šé¢å®‰è£…ä¸€éï¼Œè¿™æ¬¡é©±åŠ¨æ˜¯dockerã€‚
è£…å®Œç³»ç»Ÿåï¼Œå®‰è£…dockerã€‚
<a href="https://docs.docker.com/engine/install/ubuntu/">å®˜æ–¹æ‰‹å†Œ</a></p>
<ol>
<li>å‡†å¤‡æºæ“ä½œ</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get remove docker docker-engine docker.io containerd runc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get -y install <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>ca-certificates <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>curl <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>gnupg <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>lsb-release
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>sudo mkdir -p /etc/apt/keyrings <span style="color:#666">&amp;&amp;</span> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>  <span style="color:#ba2121">&#34;deb [arch=</span><span style="color:#008000;font-weight:bold">$(</span>dpkg --print-architecture<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121"> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">  </span><span style="color:#008000;font-weight:bold">$(</span>lsb_release -cs<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121"> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span></code></pre></div><ol start="2">
<li>å®‰è£…Docker Engine</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo apt-get update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#ç»™å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„ï¼ŒåŠ å…¥å®Œæˆæ³¨é”€å†ç™»é™†</span>
</span></span><span style="display:flex;"><span>sudo usermod -aG docker <span style="color:#19177c">$USER</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># è‡ªå¯</span>
</span></span><span style="display:flex;"><span>sudo systemctl <span style="color:#008000">enable</span> docker.service
</span></span></code></pre></div><ol start="3">
<li>å®‰è£…minikube</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo install minikube-linux-amd64 /usr/local/bin/minikube
</span></span></code></pre></div><p><img src="https://s2.loli.net/2023/01/06/b8ZMAqLeOviN19D.jpg" alt="b8ZMAqLeOviN19D"></p>
<ol start="4">
<li>éƒ¨ç½²k8s</li>
</ol>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>minikube start <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--kubernetes-version<span style="color:#666">=</span>v1.23.9 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--image-mirror-country<span style="color:#666">=</span><span style="color:#ba2121">&#39;cn&#39;</span> <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>--registry-mirror<span style="color:#666">=</span>https://????????.mirror.aliyuncs.com
</span></span></code></pre></div><p><img src="https://s2.loli.net/2023/01/06/CkRH2nNBodxzh6F.jpg" alt="CkRH2nNBodxzh6F"></p>
<p>å¯ä»¥çœ‹åˆ°è£…å®Œä»–è¿˜æç¤ºæˆ‘ kubectlæ²¡æœ‰ã€‚
5. å®‰è£…kubectl
<code>curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl</code></p>
<p><code>sudo chmod +x kubectl &amp;&amp; sudo  mv ./kubectl /usr/local/bin/kubectl </code></p>
<p><img src="https://s2.loli.net/2023/01/06/rOksbmSFMdhXipu.jpg" alt="rOksbmSFMdhXipu"></p>
<p>åˆ°æ­¤å†Ubuntu2204ä¹Ÿéƒ¨ç½²å®Œæˆã€‚</p>
<p>åé¢ç»§ç»­å­¦ä¹ </p>
<p>ç¥å¥½ï½</p>


    <footer class="site-footer">
  <span class="site-footer-credits">
    Made with <a href="https://gohugo.io/">Hugo</a>. Themed by <a href="https://github.com/zwbetz-gh/cayman-hugo-theme">Cayman</a>. Deployed to <a href="https://www.netlify.com/">Netlify</a>.
  </span>
</footer>

  </section>
  
  

</body>
</html>
