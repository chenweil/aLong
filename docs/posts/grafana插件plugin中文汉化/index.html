<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Hugo 0.109.0">
  
  <meta name="description" content="汉化三方插件 前面说过汉化Grafana的工作。目前在7.2.1上面，大部分已经完成。细节继续完善。 今天考虑在第三方插件上做一些汉化。点到插件一看全是英文感觉很突出。领导看到了也不爽啊-.-！。
找个软的捏 饼图在展示方面比较直观。Grafana上有一个插件Pie Chart 。这个现象比较少，同时在一些模版上使用中。就拿这个热热身。
具体步骤 下载项目
项目地址：piechart-panel 文件结构：
git clone git@github.com:grafana/piechart-panel.git cd piechart-panel # 进入到目录 yarn install 我直接把项目clone到grafana存放插件的位置，我的grafana是为了测试run的一个docker镜像。把插件目录挂载到本机，代码clone到目录中。
汉化工作
根据上面目录看，主要修改文件都在src里面。 IDE打开此项目，在src中修改需要编辑的文件。
图片举例，选项第一项选择图形类型。选项内容pie / donut。通过翻译我修改成了 派/甜甜圈。根据修改内容其他地方设计修改的都需要修改。我通过查询替换方式，在其他文件中修改了代码中的判断。例如上图右侧展示的文件类似。
build插件
修改完需要的内容之后，grafana是能识别到有一个插件，但没有build时候他会提示你没有build插件。就是他不认识你的项目代码。
这个怎么处理呢？看官方的文档
执行 yarn dev
# 执行结束提示，美滋滋～ ✔ Bundling plugin in dev mode ✨ Done in 4.91s. 执行完毕我们重启grafana就可以看到成果了。
对比下原来的版本和汉化后的版本：
before：
After：
测试&amp;调试
以上2，3步骤基本就是一个测试、调试的过程。
我开始先把所有配置项汉化。然后再处理选项参数。 接着build，重启grafana查看。如此往复达到预期目标。 我本机调试用docker启动grafana，测完删了容器就好了。
持续改进 考虑持续处理某个插件，可以考虑fork原插件项目，remote add XXX源。 然后新建分之来做自己的处理。master fetch XXX源 以跟踪上游的更新。 这样自己项目安装插件时候拉自己的就好啦，美滋滋。">
  <link rel="stylesheet" href="https://blog.51ai.vip/aLong/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  
  
  
  <link rel="stylesheet" href="https://blog.51ai.vip/aLong/css/cayman.ea0e967413f3851071cc8ace3621bc4205fe8fa79b2abe3d7bf94ff2841f0d47.css">
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

  <title>Grafana插件Plugin中文汉化 | aLong blog</title>
</head>

<body>
  <section class="page-header">
  <h1 class="project-name">
    aLong
  </h1>
  <h2 class="project-tagline">
    Hello world
  </h2>
  <nav>
    
    
      
      
      
      
      <a href="/aLong/" class="btn">Blog</a>
    
      
      
      
      
      <a href="/aLong/tags/" class="btn">Tags</a>
    
  </nav>
</section>

  <section class="main-content">
    
  <h1>Grafana插件Plugin中文汉化</h1>
  <h2 id="汉化三方插件">汉化三方插件</h2>
<p>前面说过汉化Grafana的工作。目前在7.2.1上面，大部分已经完成。细节继续完善。
今天考虑在第三方插件上做一些汉化。点到插件一看全是英文感觉很突出。领导看到了也不爽啊-.-！。</p>
<h2 id="找个软的捏">找个软的捏</h2>
<p>饼图在展示方面比较直观。Grafana上有一个插件<a href="https://grafana.com/grafana/plugins/grafana-piechart-panel">Pie Chart</a>
。这个现象比较少，同时在一些模版上使用中。就拿这个热热身。</p>
<h2 id="具体步骤">具体步骤</h2>
<ol>
<li>
<p>下载项目</p>
<p>项目地址：<a href="https://github.com/grafana/piechart-panel">piechart-panel</a>
文件结构：</p>
<p><img src="https://t1.picb.cc/uploads/2020/11/30/ZVbHPT.jpg" alt=""></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone git@github.com:grafana/piechart-panel.git
</span></span><span style="display:flex;"><span><span style="color:#008000">cd</span> piechart-panel <span style="color:#408080;font-style:italic"># 进入到目录</span>
</span></span><span style="display:flex;"><span>yarn install  
</span></span></code></pre></div><p><strong>我直接把项目clone到grafana存放插件的位置，我的grafana是为了测试run的一个docker镜像。把插件目录挂载到本机，代码clone到目录中。</strong></p>
</li>
<li>
<p>汉化工作</p>
<p>根据上面目录看，主要修改文件都在src里面。
IDE打开此项目，在src中修改需要编辑的文件。</p>
<p><img src="https://t1.picb.cc/uploads/2020/11/30/ZVb8Ht.jpg" alt=""></p>
<p>图片举例，选项第一项选择图形类型。选项内容<code>pie</code> / <code>donut</code>。通过翻译我修改成了 派/甜甜圈。根据修改内容其他地方设计修改的都需要修改。我通过查询替换方式，在其他文件中修改了代码中的判断。例如上图右侧展示的文件类似。</p>
</li>
<li>
<p>build插件</p>
<p>修改完需要的内容之后，grafana是能识别到有一个插件，但没有build时候他会提示你没有build插件。就是他不认识你的项目代码。</p>
<p>这个怎么处理呢？看<a href="https://grafana.com/tutorials/build-a-panel-plugin/#3"><strong>官方的文档</strong></a></p>
<p>执行 <code>yarn dev</code></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 执行结束提示，美滋滋～</span>
</span></span><span style="display:flex;"><span>✔ Bundling plugin in dev mode
</span></span><span style="display:flex;"><span>✨  Done in 4.91s.
</span></span></code></pre></div><p>执行完毕我们重启grafana就可以看到成果了。</p>
<p>对比下原来的版本和汉化后的版本：</p>
<p>before：</p>
<p><img src="https://t1.picb.cc/uploads/2020/11/30/ZVb5gM.jpg" alt=""></p>
<p>After：</p>
<p><img src="https://t1.picb.cc/uploads/2020/11/30/ZVbGO6.png" alt=""></p>
</li>
<li>
<p>测试&amp;调试</p>
<p>以上2，3步骤基本就是一个测试、调试的过程。</p>
<ul>
<li>我开始先把所有配置项汉化。然后再处理选项参数。</li>
<li>接着build，重启grafana查看。如此往复达到预期目标。</li>
</ul>
</li>
</ol>
<p><strong>我本机调试用docker启动grafana，测完删了容器就好了。</strong></p>
<h2 id="持续改进">持续改进</h2>
<p>考虑持续处理某个插件，可以考虑fork原插件项目，remote add XXX源。
然后新建分之来做自己的处理。master fetch XXX源 以跟踪上游的更新。
这样自己项目安装插件时候拉自己的就好啦，美滋滋。</p>


    <footer class="site-footer">
  <span class="site-footer-credits">
    Made with <a href="https://gohugo.io/">Hugo</a>. Themed by <a href="https://github.com/zwbetz-gh/cayman-hugo-theme">Cayman</a>. Deployed to <a href="https://www.netlify.com/">Netlify</a>.
  </span>
</footer>

  </section>
  
  

</body>
</html>
