<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Hugo 0.86.0" />
  
  <meta name="description" content="gulp gulp.js是一个前端构建工具。
安装  npm 安装全局gulp，npm install -g gulp。（如果没有梯子，最好安装下cnpm） cnpm 安装 npm install -g cnpm --registry=https://registry.npm.taobao.org 安装完cnpm，下面所有npm操作替换cnpm 执行即可。 进入项目，初始化（npm init） 项目安装gulp，项目文件夹下，npm install --save-dev gulp。 (–save-dev 加入此项目依赖中，不需要可取消这个参数) 项目根创建gulpfile.js文件，文件内创建任务测试。  var gulp = require(&#39;gulp&#39;); gulp.task(&#39;default&#39;,function(){ console.log(&#39;hello world!&#39;); }); 运行 gulp，可以看到默认执行，输出 hello world! 。测试成功。  gulp API 上面运行 gulp 执行default ，这个是gulp API。 [文档](https://www.gulpjs.com.cn/docs/api/)  gulp工作方式 gulp.src 获取文件流,通过pipe方法导入到插件，插件处理的流通过pipe方法导入 gulp.dest中, gulp.dest 输出目标文件。
  gulp src gulp.src(globs[, options])
 输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中。">
  <link rel="stylesheet" href="https://blog.51ai.vip/aLong/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  
  
  
  <link rel="stylesheet" href="https://blog.51ai.vip/aLong/css/cayman.ea0e967413f3851071cc8ace3621bc4205fe8fa79b2abe3d7bf94ff2841f0d47.css">
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

  <title>gulp笔记 | aLong blog</title>
</head>

<body>
  <section class="page-header">
  <h1 class="project-name">
    aLong
  </h1>
  <h2 class="project-tagline">
    Hello world
  </h2>
  <nav>
    
    
      
      
      
      
      <a href="/aLong/" class="btn">Blog</a>
    
      
      
      
      
      <a href="/aLong/tags/" class="btn">Tags</a>
    
  </nav>
</section>

  <section class="main-content">
    
  <h1>gulp笔记</h1>
  <h3 id="gulp">gulp</h3>
<p>gulp.js是一个前端构建工具。</p>
<h3 id="安装">安装</h3>
<ol>
<li>npm</li>
<li>安装全局gulp，<code>npm install -g gulp</code>。（如果没有梯子，最好安装下cnpm）
cnpm 安装 <code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code>
安装完cnpm，下面所有npm操作替换cnpm 执行即可。</li>
<li>进入项目，初始化（npm init）</li>
<li>项目安装gulp，项目文件夹下，<code>npm install --save-dev gulp</code>。 (&ndash;save-dev 加入此项目依赖中，不需要可取消这个参数)</li>
<li>项目根创建gulpfile.js文件，文件内创建任务测试。</li>
</ol>
<pre><code>var gulp = require('gulp');
gulp.task('default',function(){
    console.log('hello world!');
});

</code></pre><ol start="6">
<li>运行 <code>gulp</code>，可以看到默认执行，输出 hello world! 。测试成功。</li>
</ol>
<h3 id="gulp-api">gulp API</h3>
<pre><code>上面运行 gulp 执行default ，这个是gulp API。 [文档](https://www.gulpjs.com.cn/docs/api/) 
</code></pre>
<h4 id="gulp工作方式">gulp工作方式</h4>
<p><code>gulp.src</code> 获取文件流,通过<code>pipe</code>方法导入到插件，插件处理的流通过<code>pipe</code>方法导入 <code>gulp.dest</code>中, <code>gulp.dest</code> 输出目标文件。</p>
<ul>
<li>
<p>gulp src
<code>gulp.src(globs[, options])</code></p>
<blockquote>
<p>输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中。</p>
</blockquote>
</li>
</ul>
<p>文档这意思看着有点费劲，理解为获取文件路径。gulp通过这个方法获取到处理的文件流。</p>
<p>参数：</p>
<pre><code>globs 文件匹配模式，匹配文件路径，文件名。
类型： string array

options  额外可选参数
类型： object
额外参数需要看手册
</code></pre>
<ul>
<li>
<p>gulp.dest
<code>gulp.dest(path[, options])</code></p>
<blockquote>
<p>能被 pipe 进来，并且将会写文件。并且重新输出（emits）所有数据，因此你可以将它 pipe 到多个文件夹。如果某文件夹不存在，将会自动创建它。</p>
</blockquote>
</li>
</ul>
<p>理解为写文件，写入path路径文件。</p>
<p>参数：</p>
<pre><code>path 文件写入路径
类型：string function

options 额外可选参数
类型：object
</code></pre>
<ul>
<li>
<p>gulp.task
<code>gulp.task(name[, deps], fn)</code></p>
<blockquote>
<p>定义一个使用 Orchestrator 实现的任务（task）。</p>
</blockquote>
</li>
</ul>
<p>用来定义任务，内部使用的是Orchestrator。</p>
<p>参数：</p>
<pre><code>name 任务名字

deps 是当前任务需要的其他任务，一个数组。依赖任务，先于此任务执行。
类型：array

fn  该函数定义任务所要执行的一些操作，把任务要执行的代码写在里面。
</code></pre>
<ul>
<li>gulp.watch
<code>gulp.watch(glob[, opts], tasks)</code>
<code>gulp.watch(glob[, opts, cb])</code></li>
</ul>
<blockquote>
<p>监视文件，并且可以在文件发生改动时候做一些事情。</p>
</blockquote>
<p>参数：</p>
<pre><code>glob 文件匹配模式
类型 string array

opts 可选配置
类型 object

tasks 文件变动后执行的任务
类型 array

cb 一个函数，文件发生变化时调用的函数。
类型 function
</code></pre>
<p><em>Glob</em> 匹配模式  <a href="https://github.com/isaacs/node-glob">(node-glob）参考语法</a></p>
<pre><code>匹配符                             说明
      *                               匹配文件路径中的0个或多个字符，但不会匹配路径分割符，
                                      除非分隔符出现在末尾

      **                              匹配路径的0个会多个目录 及子目录 需要单独出现，
                                      即他左右不能有其他的东西了如果出现在末尾，也能匹配文件

      ？                              匹配文件路径中的一个字符（不能匹配路径分割符/）

      [...]                           匹配方括号中 出现字符的任意一个，当方括号中第一个字符为^或!时，
                                      则表示不匹配方括号中出现字符中的任意一个，
                                      类似于js中正则表达式中的用法

      !(pattern|pattern|pattern)      匹配任何与括号中给定的任意模式都不匹配
      ？(pattern|pattern|pattern)     匹配括号中给定的任意模式0次或1次
      +(pattern|pattern|pattern)      匹配括号中的至少一次
      *(pattern|pattern|pattern)      匹配括号中给定的任意模式0次或多次
      @(pattern|pattern|pattern)      匹配括号中 给定的任意模式一次

    eg：glob 匹配
      |能匹配 a.js,x.y,abc,abc/,但不能匹配a/b.js|
      |.*   a.js,style.css,a.b,x.y
      //*.js    能匹配 a/b/c.js,x/y/z.js,不能匹配a/b.js,a/b/c/d.js
      **    能匹配 abc,a/b.js,a/b/c.js,x/y/z,x/y/z/a.b,能用来匹配所有的目录和文件
      a/**/z    能匹配 a/z,a/b/z,a/b/c/z,a/d/g/h/j/k/z
      a/**b/z   能匹配 a/b/z,a/sb/z,但不能匹配a/x/sb/z,因为只有单**单独出现才能匹配多级目录
      ?.js  能匹配 a.js,b.js,c.js
      a??   能匹配 a.b,abc,但不能匹配ab/,因为它不会匹配路径分隔符
      [xyz].js  只能匹配 x.js,y.js,z.js,不会匹配xy.js,xyz.js等,整个中括号只代表一个字符
      [^xyz].js 能匹配 a.js,b.js,c.js等,不能匹配x.js,y.js,z.js
</code></pre><p>多种匹配模式时，使用数组
<code>gulp.src(['js/*.js','css/*.css','*.html'])</code></p>
<p>数组中可以用 <code>！</code> 排除*(放在数组第一个无效)*
<code>gulp.src([*.js,'!b*.js'])</code></p>
<h3 id="编写一个任务">编写一个任务</h3>
<p>常用到压缩，写个压缩demo。
目录，根目录下有两个文件夹，dist空文件，src目录,src/js文件夹2个文件，common.js,demo.js。
任务目标，将js目录下的.js文件，压缩合并为new.min.js。之后将合并压缩的文件保存到dist/js/。</p>
<ol>
<li>我们在初始化后的项目中，先安装所需插件，gulp-rename（重命名插件）,gulp-uglify（压缩js插件），gulp-concat（合并文件插件）。
npm install gulp-rename gulp-uglify gulp-concat &ndash;save-dev</li>
<li>编辑gulpfile.js</li>
</ol>
<pre><code>   var gulp=require('gulp'); 
   var  rename= require('gulp-rename');  //引入插件
   var  uglify= require('gulp-uglify');
   var  concat= require('gulp-concat');

    gulp.task('js', function(){                   //创建名为 js的任务
        return gulp.src('src/js/*.js')           //读取文件流           
        .pipe(concat())                             //合并
        .pipe(uglify())                              //压缩
        .pipe(rename({suffix: '.min'}))     //重命名
        .pipe(gulp.dest('dist/js/'))          //输出到指定路径
      });

</code></pre><p>文件保存后，命令行执行任务： <code>gulp js</code> 。
可以看到Finshed时间，去dist目录可以看到合并压缩的文件已在里面。</p>
<h3 id="gulp插件">gulp插件</h3>
<ul>
<li>CSS压缩 gulp-minify-css</li>
<li>Js压缩 gulp-uglify</li>
<li>重命名 gulp-rename</li>
<li>文件合并 gulp-concat</li>
<li>自动加载 gulp-load-plugins</li>
<li>less编译 gulp-less</li>
<li>sass编译 gulp-sass</li>
</ul>


    <footer class="site-footer">
  <span class="site-footer-credits">
    Made with <a href="https://gohugo.io/">Hugo</a>. Themed by <a href="https://github.com/zwbetz-gh/cayman-hugo-theme">Cayman</a>. Deployed to <a href="https://www.netlify.com/">Netlify</a>.
  </span>
</footer>

  </section>
  
  

</body>
</html>
