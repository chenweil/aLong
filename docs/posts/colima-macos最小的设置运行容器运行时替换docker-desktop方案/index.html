<!DOCTYPE html>
<html lang="en" dir=" auto">

<head><script src="/aLong/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=aLong/livereload" data-no-instant defer></script>
</head>

<body class="" id="
    top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/aLong/" accesskey="h" title="aLong blog (Alt + H)">aLong blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Colima MacOS最小的设置运行容器运行时,替换Docker Desktop方案
    </h1>
    <div class="post-meta"><span title='2023-04-07 19:33:25 +0800 CST'>2023-04-07</span>

</div>
  </header> 
  <div class="post-content"><h1 id="colima">Colima<a hidden class="anchor" aria-hidden="true" href="#colima">#</a></h1>
<p><a href="https://github.com/abiosoft/colima">GitHub</a></p>
<p>Colima 是一个轻量级的容器运行时，专门针对开发者在本地环境中运行容器应用。它的目标是提供一种比 Docker Desktop 更简单、更快速、更安全的容器运行时解决方案。</p>
<p>Colima 基于 Moby 和 LinuxKit 构建，具有以下特点：</p>
<p>由于它只是一个容器运行时，因此相对于 Docker Desktop，它的安装和启动速度更快，所需的资源更少。
它使用了轻量级的虚拟化技术，例如 HyperKit 和 VPNKit，以提高容器的性能和安全性。
Colima 提供了一组简单的 CLI 命令，使得用户可以轻松地启动、停止、删除容器，以及执行其他常见操作。
它还提供了一些有用的功能，例如在本地浏览器中打开容器中运行的应用程序、自动重启容器等。
总的来说，Colima 是一个轻量级、易于使用的容器运行时，旨在为开发者提供一种更快、更安全的容器环境，使得开发和测试容器应用程序变得更加轻松。</p>
<h2 id="安装">安装<a hidden class="anchor" aria-hidden="true" href="#安装">#</a></h2>
<p>在 macOS 上安装 Colima 很简单，只需要执行以下几个步骤：</p>
<ul>
<li>
<p>首先，您需要打开终端并使用 Homebrew 包管理器安装 Colima。如果您没有安装 Homebrew，请先安装 Homebrew：
<code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</code></p>
</li>
<li>
<p>安装 Colima：
<code>brew install colima</code></p>
<p>安装完成后，您可以使用 colima 命令来启动 Colima：
<code>colima start</code></p>
</li>
</ul>
<p>如果您想停止 Colima，可以使用以下命令：
<code>colima stop</code></p>
<ul>
<li>要卸载 Colima，请运行以下命令：</li>
</ul>
<p><code>brew uninstall colima</code></p>
<p>安装完成后，您就可以使用 Colima 运行和管理容器应用程序了。</p>
<h2 id="docker交互">docker交互<a hidden class="anchor" aria-hidden="true" href="#docker交互">#</a></h2>
<p>启动 Colima 后，您可以使用 Docker CLI 与容器交互。在 Colima 中，Docker CLI 已经预先安装了，所以您可以直接使用 <code>docker</code> 命令来管理容器。</p>
<p>以下是一些基本的 Docker CLI 命令：</p>
<ul>
<li><code>docker run</code> - 运行容器</li>
<li><code>docker ps</code> - 查看正在运行的容器</li>
<li><code>docker stop</code> - 停止容器</li>
<li><code>docker rm</code> - 删除容器</li>
<li><code>docker images</code> - 查看本地镜像</li>
<li><code>docker pull</code> - 下载镜像</li>
<li><code>docker push</code> - 上传镜像</li>
</ul>
<p>请注意，当您在 Colima 中运行容器时，它们将运行在 Colima 虚拟机中，而不是您的本地计算机上。因此，在使用 Docker CLI 命令时，请确保将其指向 Colima 虚拟机，而不是本地 Docker 安装。</p>
<p>您可以使用以下命令来配置 Docker CLI，使其指向 Colima 虚拟机：</p>
<p>bash</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#008000">eval</span> <span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">$(</span>colima env<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121">&#34;</span>
</span></span></code></pre></div><p>此命令将设置环境变量，使得 <code>docker</code> 命令指向 Colima 虚拟机中的 Docker 服务。在执行此命令后，您就可以直接使用 <code>docker</code> 命令来管理 Colima 中的容器了。</p>
<h2 id="colima-部分操作命令说明">Colima 部分操作命令说明<a hidden class="anchor" aria-hidden="true" href="#colima-部分操作命令说明">#</a></h2>
<p>以下是一些常见的 Colima CLI 命令及其说明：</p>
<ul>
<li><code>colima start</code> - 启动 Colima 容器运行时。</li>
<li><code>colima stop</code> - 停止 Colima 容器运行时。</li>
<li><code>colima restart</code> - 重启 Colima 容器运行时。</li>
<li><code>colima status</code> - 显示 Colima 容器运行时的状态信息。</li>
<li><code>colima ssh</code> - 通过 SSH 连接到 Colima 容器运行时。</li>
<li><code>colima ip</code> - 显示 Colima 容器运行时的 IP 地址。</li>
<li><code>colima info</code> - 显示有关 Colima 容器运行时的详细信息，包括版本、磁盘使用情况和安装路径等。</li>
<li><code>colima doctor</code> - 运行诊断程序以检查 Colima 容器运行时的配置和设置是否正确。</li>
<li><code>colima web</code> - 在本地浏览器中打开容器中运行的应用程序。</li>
</ul>
<p><img loading="lazy" src="https://i.imgur.com/isS4jKa.png" alt="isS4jKa"  />
</p>
<p>比如你想修改docker源的地址，可以通过<code>colima ssh</code> 进去之后，编辑 Docker 的配置文件 <code>/etc/docker/daemon.json</code>。</p>
<p>除了以上列出的常见命令外，Colima 还提供了许多其他有用的命令和选项。您可以使用 <code>colima --help</code> 命令来查看完整的命令列表和选项说明。</p>
<h2 id="colima自定义虚拟机">Colima自定义虚拟机<a hidden class="anchor" aria-hidden="true" href="#colima自定义虚拟机">#</a></h2>
<p>Colima 使用虚拟机技术来提供容器运行时环境。默认情况下，Colima 会自动创建和配置虚拟机。但是，如果您需要更改虚拟机的配置或行为，可以使用以下命令来配置 Colima 的虚拟机：</p>
<ul>
<li><code>colima config set</code> - 设置指定的 Colima 配置项。</li>
<li><code>colima config get</code> - 获取指定的 Colima 配置项的值。</li>
<li><code>colima config unset</code> - 删除指定的 Colima 配置项。</li>
<li><code>colima config inspect</code> - 显示所有 Colima 配置项的当前值。</li>
</ul>
<p>在初始启动时，Colima 使用用户指定的运行时，默认为 Docker。其他还有 Containerd、Kubernetes。</p>
<p>以下是一些常用的 Colima 配置项：</p>
<ul>
<li><code>vm-cpus</code> - 虚拟机的 CPU 核心数量。</li>
<li><code>vm-memory</code> - 虚拟机的内存大小。</li>
<li><code>vm-disk-size</code> - 虚拟机磁盘的大小。</li>
<li><code>vm-network</code> - 虚拟机的网络配置，如 IP 地址、网关和 DNS 服务器等。</li>
<li><code>docker-version</code> - Colima 容器运行时中 Docker 的版本号。</li>
</ul>
<p>例如，要将虚拟机的 CPU 核心数量设置为 4，可以使用以下命令：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-arduino" data-lang="arduino"><span style="display:flex;"><span>colima <span style="color:#00f">config</span> set vm<span style="color:#666">-</span>cpus <span style="color:#666">4</span>
</span></span></code></pre></div><p>完成以上命令后，重新启动 Colima 容器运行时即可使设置生效：</p>
<p><code>colima restart</code></p>
<p>您可以使用 <code>colima config get</code> 命令来查看当前的 Colima 配置项值。如果需要删除某个配置项，可以使用 <code>colima config unset</code> 命令。如果需要查看所有 Colima 配置项的当前值，可以使用 <code>colima config inspect</code> 命令。</p>
<h2 id="重启电脑后">重启电脑后<a hidden class="anchor" aria-hidden="true" href="#重启电脑后">#</a></h2>
<p>重启电脑后，需要先启动colima的之前创建的虚拟机。 默认启动上次关闭的虚拟机。 <code>colima staer</code> 启动之后，就可以进行docker的操作了。</p>
<p>完结
祝好～</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/aLong/tags/docker/">Docker</a></li>
      <li><a href="http://localhost:1313/aLong/tags/container/">Container</a></li>
      <li><a href="http://localhost:1313/aLong/tags/macos/">MacOS</a></li>
    </ul>
  </footer>
</article>
    </main>
    <footer>
    // ... 其他页脚内容 ...
    <a href="http://localhost:1313/aLong/index.xml">订阅RSS</a>
</footer></body>

</html>