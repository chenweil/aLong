<!DOCTYPE html>
<html lang="en" dir=" auto">

<head><script src="/aLong/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=aLong/livereload" data-no-instant defer></script>
</head>

<body class="" id="
    top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/aLong/" accesskey="h" title="aLong blog (Alt + H)">aLong blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Laradock安装与使用
    </h1>
    <div class="post-meta"><span title='2019-08-15 10:01:03 +0000 UTC'>2019-08-15</span>

</div>
  </header> 
  <div class="post-content"><h3 id="laradock-安装与使用">Laradock 安装与使用<a hidden class="anchor" aria-hidden="true" href="#laradock-安装与使用">#</a></h3>
<p><a href="https://laradock.io">官网</a></p>
<p>GitHub: <a href="https://github.com/laradock/laradock">https://github.com/laradock/laradock</a></p>
<h3 id="要求">要求<a hidden class="anchor" aria-hidden="true" href="#要求">#</a></h3>
<blockquote>
<ul>
<li>Git</li>
<li>Docker &gt;= 17.12</li>
</ul>
</blockquote>
<h3 id="项目的位置">项目的位置<a hidden class="anchor" aria-hidden="true" href="#项目的位置">#</a></h3>
<ol>
<li>已有项目情况: <code>git submodule add https://github.com/Laradock/laradock.git</code> 克隆到项目根目录.</li>
</ol>
<p>结构 :</p>
<blockquote>
<ul>
<li>project-a</li>
</ul>
</blockquote>
<ul>
<li>laradock-a</li>
<li>project-b
<ul>
<li>laradock-b</li>
</ul>
</li>
</ul>
<ol start="2">
<li>没有项目情况: <code>git clone https://github.com/laradock/laradock.git</code> 克隆后,在同级部署项目.</li>
</ol>
<blockquote>
</blockquote>
<ul>
<li>laradock</li>
<li>project-x</li>
<li>project-y</li>
</ul>
<h3 id="启动环境">启动环境<a hidden class="anchor" aria-hidden="true" href="#启动环境">#</a></h3>
<p>clone下来还没有生成.</p>
<p>进入laradock目录,编辑Web服务器站点配置. <code>cp env-exalpme .env</code>
环境是laradock环境,里面可以对相应的版本,配置进行修改.
例如指定mysql版本为5.7 ,<code>vim .env</code> ,搜索到mysql部分, 修改<strong>MYSQL_VERSION=5.7.26</strong> 保存退出.(这里还没生成容器前可以统一配置好需要的环境,再生成容器.)</p>
<p>例如我们需要启动环境需要 mysql,redis,nginx.</p>
<p>执行 docker-compose up -d nginx mysql redis</p>
<p>经过漫长等待后,可以得到我们想要的环境,通过 docker ps 或者 docker-compose ps 查看容器.</p>
<p>如果先生成容器,在之后编辑环境时,需要停掉容器,修改完 build之后 再start 容器.
例如修改nginx:</p>
<ol>
<li><code>docker-compose stop nginx</code></li>
<li>修改.env 或者 nginx conf</li>
<li><code>docker-compose build nginx</code> (完全重建,加参数: &ndash;no-cache)</li>
<li><code>docker-compose start nginx</code></li>
</ol>
<h3 id="nginx-配置项目">Nginx 配置项目<a hidden class="anchor" aria-hidden="true" href="#nginx-配置项目">#</a></h3>
<p>我们再laradock中,进入nginx/sites/ 下.复制laravel.conf.example 命名为我们的项目.</p>
<p><code>cp laravel.conf.example Myblog.conf</code></p>
<p>我们在Myblog.conf 配置nginx 具体信息.这里与配置Vhost一样的操作.</p>
<p><strong>修改完成后,需要build nginx(重建nginx容器).</strong></p>
<h3 id="项目配置数据库">项目配置数据库<a hidden class="anchor" aria-hidden="true" href="#项目配置数据库">#</a></h3>
<p>laravel项目, .env 中 此项需要改为<strong>DB_HOST=mysql</strong>,其他参数按照容器mysql配置账号密码等.
Redis 修改类似.</p>
<h3 id="项目执行php-artisan-方式">项目执行php artisan 方式<a hidden class="anchor" aria-hidden="true" href="#项目执行php-artisan-方式">#</a></h3>
<p>在laravel 需要执行 php artisan命令时,我们进入到workspace容器,</p>
<p><code>docker-compose exec workspace bash</code></p>
<p>进入workkspace后,就可以像以前一样进入项目目录中可以执行.</p>
<p>也可以通过开启ssh.连接workspace 执行.</p>
<h3 id="关闭所有正在运行的容器">关闭所有正在运行的容器<a hidden class="anchor" aria-hidden="true" href="#关闭所有正在运行的容器">#</a></h3>
<p><code>docker-compose stop</code></p>
<h3 id="删除所有现有容器">删除所有现有容器<a hidden class="anchor" aria-hidden="true" href="#删除所有现有容器">#</a></h3>
<p><code>docker-compose down</code></p>
<p><em>其他内容请详见手册吧</em></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/aLong/tags/laravel/">Laravel</a></li>
      <li><a href="http://localhost:1313/aLong/tags/docker/">Docker</a></li>
    </ul>
  </footer>
</article>
    </main>
    <footer>
    // ... 其他页脚内容 ...
    <a href="http://localhost:1313/aLong/index.xml">订阅RSS</a>
</footer></body>

</html>