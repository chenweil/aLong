<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>aLong blog</title>
    <link>http://localhost:1313/aLong/</link>
    <description>Recent content on aLong blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 14 Sep 2024 10:42:26 +0800</lastBuildDate><atom:link href="http://localhost:1313/aLong/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Snapbox</title>
      <link>http://localhost:1313/aLong/posts/snapbox/</link>
      <pubDate>Sat, 14 Sep 2024 10:42:26 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/snapbox/</guid>
      <description>&lt;h1 id=&#34;一款macos的app&#34;&gt;一款macOS的APP&lt;/h1&gt;
&lt;p&gt;app网站 : &lt;a href=&#34;https://snapbox.app/&#34;&gt;https://snapbox.app/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我在&lt;a href=&#34;https://www.v2ex.com/t/1062087&#34;&gt;v2ex&lt;/a&gt;上看到此贴.&lt;/p&gt;
&lt;p&gt;作者3.5天的时间通过Claude 3.5 Sonnet协助开发的macOS App.需要M系列芯片的设备.&lt;/p&gt;
&lt;p&gt;看起来像是&lt;code&gt;spotlight&lt;/code&gt;,&lt;code&gt;raycast&lt;/code&gt;这种工具的方式启动,调出后实现与AI的一系列操作.
比如翻译、对话、优化内容等工作.&lt;/p&gt;
&lt;p&gt;支持ollama和服务提供商API.&lt;/p&gt;
&lt;p&gt;配置内容简单,支持prompt.&lt;/p&gt;
&lt;h1 id=&#34;接入配置&#34;&gt;接入配置&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/14/z83RnpaOZh56Hwu.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;呼出主界面时,进入 &lt;code&gt;settings&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/14/CpLyGafc6xA7eRm.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;设置界面中的 &lt;strong&gt;SELECT PROVIDER&lt;/strong&gt;中选择模型的厂商.&lt;/p&gt;
&lt;p&gt;我这里配置过&lt;code&gt;Ollama&lt;/code&gt;和&lt;code&gt;Custom Endpoint&lt;/code&gt;.&lt;code&gt;Custom Endpoint&lt;/code&gt;我选择了 &lt;strong&gt;siliconflow&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;配置时,输入完 &lt;strong&gt;CUSTOM ENDPOINT URL&lt;/strong&gt; 和 ** CUSTOM ENDPOINT API KEY**后可以获取模型.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/14/itNTZsmAGuX17Ik.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;勾选自己使用的模型名字即可.如果API服务商不支持获取可以自己点击&lt;code&gt;+&lt;/code&gt;号添加.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/14/Gmbf93cek286JBT.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;功能演示&#34;&gt;功能演示&lt;/h1&gt;
&lt;p&gt;我觉得此软件的特色是:&lt;/p&gt;
&lt;p&gt;此软件支持全局快捷键,呼出程序,快捷进入某特定prompt等.&lt;/p&gt;
&lt;p&gt;选择文字后会被程序捕获. 免去了复制粘贴.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;常规对话&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/14/jAsTeFm9kKUSqGV.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;复制粘贴、打字与AI交互. 快捷上支持重新生成、继续、继续输入.&lt;/p&gt;
&lt;p&gt;放个视频演示:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://watch.wave.video/6UP7usIlnYJ9vC0B&#34;&gt;https://watch.wave.video/6UP7usIlnYJ9vC0B&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reactor 模式&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;此模式是监听你的指针选择,剪切板内容.快速响应.&lt;/p&gt;
&lt;p&gt;放个视频演示:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://watch.wave.video/KRjgWJQ5nJmSj0yX&#34;&gt;https://watch.wave.video/KRjgWJQ5nJmSj0yX&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;最后&#34;&gt;最后&lt;/h1&gt;
&lt;p&gt;看到作者仅用几天时间借助大模型开发出一个功能丰富的app，令人惊叹。&lt;/p&gt;
&lt;p&gt;既体现了大模型的强大能力，也展示了作者高超的开发技巧和创新思维。&lt;/p&gt;
&lt;p&gt;反思自己也在日常工作中尝试利用AI模型来优化脚本编写和项目代码调整，确实感受到了效率的提升。&lt;/p&gt;
&lt;p&gt;展望未来，AI辅助开发很可能成为主流趋势。but我们仍需谨慎对待，在享受AI带来便利的同时，也要注意培养自身解决问题的能力，而不是过度依赖AI。&lt;/p&gt;
&lt;p&gt;完结~
感谢观看&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Arc</title>
      <link>http://localhost:1313/aLong/posts/arc/</link>
      <pubDate>Fri, 13 Sep 2024 14:23:51 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/arc/</guid>
      <description>&lt;h1 id=&#34;背景&#34;&gt;背景&lt;/h1&gt;
&lt;p&gt;使用arc浏览器作为主力之前,更喜欢chrome.&lt;/p&gt;
&lt;p&gt;也考虑edge替代朴素的chrome.事与愿违,在后面使用中edge变越越来越不喜欢的东西.&lt;/p&gt;
&lt;p&gt;加入了很多我不喜欢、不去用的功能展示在界面上. 后面我就没继续使用了,不评价edge的好坏.我不喜欢用它.&lt;/p&gt;
&lt;p&gt;后面看到arc,也是简单尝试了一下,后面我觉得不错的菜就换成了主力.&lt;/p&gt;
&lt;h1 id=&#34;喜欢的功能&#34;&gt;喜欢的功能&lt;/h1&gt;
&lt;p&gt;下面我介绍一下我使用这个arc浏览器喜欢的点.&lt;/p&gt;
&lt;h2 id=&#34;space&#34;&gt;space&lt;/h2&gt;
&lt;p&gt;在每个Space可放不同的标签,做到了管理和分类. 同时还可以定制颜色,样式.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/hU8qgeYufw4FO1Z.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可以根据不同账号(profile)分配不同的&lt;strong&gt;会话信息&lt;/strong&gt;. 也就是一个浏览器不同space区分账号.满足挂小号、测试等需要多身份在同一个浏览器访问.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/HP3ZGCYNQDEjoFe.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;如上图,我新建了一个along的profile,创建了一个space.
在访问linux.do时,如图.如果我有小号就可以这么搞拉.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/VGZ7zqwAcmxr5kR.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;easel&#34;&gt;Easel&lt;/h2&gt;
&lt;p&gt;我用这个功能很简单,就是看下动态信息.
比如你想一些动态信息,但又不需要整个页面,是不是想把局部拿出来. 白板可以的,你截取某网页部分放到白板里,开启就可以实现.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/olkLjYzgICXZR5y.png&#34; alt=&#34;&#34;  /&gt;

&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/dAZMsg9fh7xcSXW.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上面是我自己创建的两个页面. 这俩一个是没事看看模型排行. 另一个是关注自己的其他信息.&lt;/p&gt;
&lt;p&gt;可能图片不能直观解释这个用途.放个动图,看那个时间的变化:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/l8gcuOXb7v2QU3B.gif&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;当我想看周刊我就直接在这里点就好了,不需要单独打开此网站去查看这个列表,美滋滋.&lt;/p&gt;
&lt;p&gt;我能想到画架的用途还有: 头脑风暴、协作、笔记、可视化信息、素材灵感搜集、整理内容、组织结构.&lt;/p&gt;
&lt;p&gt;这些做完可以分享.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/hjCG9XRnslwztSo.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;boost&#34;&gt;Boost&lt;/h2&gt;
&lt;p&gt;这个功能可更改网页一些元素的颜色，字体类型、字体大小等.
还是以佬友为例:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/XScBNmgVJFWzdUC.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;主题是默认,我通过boost功能将颜色、字体、英文文字是蛇形、全大写、全小写的配置来自定义一下.&lt;/p&gt;
&lt;p&gt;boost中我最喜欢的是zap.
可以隐藏掉自己不喜欢的页面元素.&lt;/p&gt;
&lt;p&gt;继续以佬友为例:
点击zap后,可以选择页面元素.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/Ahv7iQMr49Dd1Vt.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;当选择元素后点击 zap this 就可以干掉他.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/F3lUHbRMhV8qmcD.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这是隐藏掉一些页面元素后的样子.&lt;/p&gt;
&lt;h2 id=&#34;favorite&#34;&gt;Favorite&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/UoHBwWDEJAt1ZQP.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这是左上角那部分内容,做多可以放12个块.块支持split的组合tab.特定适配过的还有奇效,比如gmail、outlook、slack等等等. 我把常用的网站放在这里,佬友有消息提示,这icon上会有标记的.以便我打开查看消息.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/09/13/tBoPcZLpj1lVADx.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;split&#34;&gt;Split&lt;/h2&gt;
&lt;p&gt;通过简单拖拽,可实现tab的分屏.
新打开一个网页想和当前tab做分屏,点击链接时按住&lt;code&gt;option&lt;/code&gt;就实现了分屏.&lt;/p&gt;
&lt;p&gt;能分能拆,用起来体验不错.但有一点不太好,就是在分屏中关闭的tab就没了.只能重新pinned.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>LLM_fine Tuning</title>
      <link>http://localhost:1313/aLong/posts/llm_fine-tuning/</link>
      <pubDate>Thu, 15 Aug 2024 13:39:15 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/llm_fine-tuning/</guid>
      <description>&lt;h1 id=&#34;微调-fine-tuning&#34;&gt;微调 fine-tuning&lt;/h1&gt;
&lt;p&gt;微调是一种监督学习过程,在这个过程中可以使用一组带标签的示例数据来更新LLM的权重.使其为特定任务生成良好完成的能力.&lt;/p&gt;
&lt;p&gt;指令微调特别擅长提高模型在各种任务中的性能.
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/08/15/zdjLFeb17cpSwvO.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;比如想让模型翻译能力增强,那就给他一些示例是包括翻译这句话之类的说明.即时完成示例允许模型学习生成遵循给定说明的响应.&lt;/p&gt;
&lt;h2 id=&#34;微调大致步骤&#34;&gt;微调大致步骤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;准备训练数据,需要特定的格式. 也可以通过数据集+模版来处理使其既是模版又是数据集(指令数据集).&lt;/li&gt;
&lt;li&gt;将数据集划分为训练验证和测试.然后使用计算出的损失来更新标准反向传播中的模型权重(standard backpropagation)。多批次重复操作.
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/08/15/NnuGVBHyRJAmeSQ.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/li&gt;
&lt;li&gt;更新完进行最终的性能评估.通过测试得出精度.
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/08/15/7V1TbfgcANhPyk5.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/li&gt;
&lt;li&gt;最终得到一个微调模型(Instruct LLM).
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2024/08/15/4dINakbHTDw2WRJ.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Roadmap&amp;Go</title>
      <link>http://localhost:1313/aLong/posts/roadmapgo/</link>
      <pubDate>Mon, 15 May 2023 14:53:11 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/roadmapgo/</guid>
      <description>&lt;p&gt;技术类的Roadmap（路线图）具有许多好处，下面是其中几个主要的好处：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;明确目标：Roadmap可以帮助技术团队明确目标和愿景。它提供了一个清晰的计划，使团队成员知道他们正在朝着什么方向前进，并且可以更好地集中精力和资源。&lt;/li&gt;
&lt;li&gt;规划优先级：Roadmap可以帮助团队确定优先级和时间表。通过将不同的功能、项目和任务安排在时间轴上，团队可以了解何时开始和完成每个任务，从而更好地分配资源和人力。&lt;/li&gt;
&lt;li&gt;沟通和协作：Roadmap是与团队成员、管理层和利益相关者进行沟通和协作的重要工具。它提供了一个共同的视觉框架，帮助各方理解技术发展的方向和计划，从而促进更好的合作和决策制定。&lt;/li&gt;
&lt;li&gt;风险管理：Roadmap有助于识别和管理潜在的风险和挑战。通过在Roadmap中考虑外部因素、技术依赖关系和风险因素，团队可以更好地规划和应对可能的问题，降低项目失败的风险。&lt;/li&gt;
&lt;li&gt;激励和动力：Roadmap可以为团队提供激励和动力。清晰的目标和规划可以激发团队成员的工作热情和投入，使他们感到对项目和组织的价值和重要性。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我之前保存过&lt;a href=&#34;https://github.com/Alikhll/golang-developer-roadmap&#34;&gt;GitHub: Alikhll/golang-developer-roadmap&lt;/a&gt;的roadmap。正好在上周末想看看自己找一块内容来学习学习。我发现作者还是2021年的版本，后面也没有更新什么。那我想在obsidian中把这个图复刻一个，然后根据内容去做计划去学习。后来我又想到另一个roadmap也不错。正好两个整合一下。那么就有了一个我魔改的内容。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.imgur.com/IkaIOP6.jpg&#34; alt=&#34;IkaIOP6&#34;  /&gt;

此图是通过Obsidian的canvas 功能进行的制作。并且我后面打算通过双链来完成此图中部分内容的笔记。&lt;/p&gt;
&lt;p&gt;此图整体可以看到通过颜色来区分了一些作者划分的知识点优先级，以便确定哪些内容应优先进行。此图我觉得有个遗憾就是没能够持续进行更新。后面还好我找到另一个认为不错的&lt;a href=&#34;https://roadmap.sh/&#34;&gt;roadmap&lt;/a&gt;进行补充和完善。&lt;/p&gt;
&lt;p&gt;主体还是&lt;a href=&#34;https://github.com/Alikhll/golang-developer-roadmap&#34;&gt;golang-developer-roadmap&lt;/a&gt;，顺便在前后加入了 &lt;a href=&#34;https://roadmap.sh/backend&#34;&gt;Backend Developer&lt;/a&gt; ,后面加入了&lt;a href=&#34;https://roadmap.sh/full-stack&#34;&gt;Full Stack Developer&lt;/a&gt;。 其实还有很多roadmap相关，比如&lt;code&gt;devops&lt;/code&gt;，&lt;code&gt;docker&lt;/code&gt;，&lt;code&gt;Frontend Developer&lt;/code&gt;等等吧都会涉及到一些内容。并且这个&lt;a href=&#34;https://roadmap.sh/&#34;&gt;roadmap&lt;/a&gt;还可以在图中交互，我觉得不错。&lt;/p&gt;
&lt;p&gt;主要不错地方包含：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;可交互。&lt;/li&gt;
&lt;li&gt;此roadmap是持续更新的。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.imgur.com/E4QRa5M.png&#34; alt=&#34;E4QRa5M&#34;  /&gt;

比如这个后端内容中，你点击 &lt;code&gt;What is HTTP？&lt;/code&gt; 在右侧弹出内容中，可以看到具体内容，并有相关的链接可以去访问。 最上面还有个状态，可通过状态编辑此内容是否已经达到目的。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.imgur.com/dLk2tVY.png&#34; alt=&#34;dLk2tVY&#34;  /&gt;

点击&lt;code&gt;Update Status&lt;/code&gt;后可以看到有三个选项。&lt;/p&gt;
&lt;p&gt;点击&lt;code&gt;Done&lt;/code&gt;之后，图中将做出变化：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.imgur.com/krk3YT0.png&#34; alt=&#34;krk3YT0&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;个人认为是个不错的方式。&lt;/p&gt;
&lt;p&gt;个人认为技术类的Roadmap可以帮助团队提高效率、降低风险、改善沟通和协作，并为实现技术目标提供清晰的指导。它是一个重要的管理工具，有助于组织和规划技术团队的工作，使其能够更好地满足业务需求并取得成功。&lt;/p&gt;
&lt;p&gt;完结
祝好
～&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Colima MacOS最小的设置运行容器运行时,替换Docker Desktop方案</title>
      <link>http://localhost:1313/aLong/posts/colima-macos%E6%9C%80%E5%B0%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9B%BF%E6%8D%A2docker-desktop%E6%96%B9%E6%A1%88/</link>
      <pubDate>Fri, 07 Apr 2023 19:33:25 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/colima-macos%E6%9C%80%E5%B0%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9B%BF%E6%8D%A2docker-desktop%E6%96%B9%E6%A1%88/</guid>
      <description>&lt;h1 id=&#34;colima&#34;&gt;Colima&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/abiosoft/colima&#34;&gt;GitHub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Colima 是一个轻量级的容器运行时，专门针对开发者在本地环境中运行容器应用。它的目标是提供一种比 Docker Desktop 更简单、更快速、更安全的容器运行时解决方案。&lt;/p&gt;
&lt;p&gt;Colima 基于 Moby 和 LinuxKit 构建，具有以下特点：&lt;/p&gt;
&lt;p&gt;由于它只是一个容器运行时，因此相对于 Docker Desktop，它的安装和启动速度更快，所需的资源更少。
它使用了轻量级的虚拟化技术，例如 HyperKit 和 VPNKit，以提高容器的性能和安全性。
Colima 提供了一组简单的 CLI 命令，使得用户可以轻松地启动、停止、删除容器，以及执行其他常见操作。
它还提供了一些有用的功能，例如在本地浏览器中打开容器中运行的应用程序、自动重启容器等。
总的来说，Colima 是一个轻量级、易于使用的容器运行时，旨在为开发者提供一种更快、更安全的容器环境，使得开发和测试容器应用程序变得更加轻松。&lt;/p&gt;
&lt;h2 id=&#34;安装&#34;&gt;安装&lt;/h2&gt;
&lt;p&gt;在 macOS 上安装 Colima 很简单，只需要执行以下几个步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;首先，您需要打开终端并使用 Homebrew 包管理器安装 Colima。如果您没有安装 Homebrew，请先安装 Homebrew：
&lt;code&gt;/bin/bash -c &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装 Colima：
&lt;code&gt;brew install colima&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装完成后，您可以使用 colima 命令来启动 Colima：
&lt;code&gt;colima start&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果您想停止 Colima，可以使用以下命令：
&lt;code&gt;colima stop&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;要卸载 Colima，请运行以下命令：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;brew uninstall colima&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装完成后，您就可以使用 Colima 运行和管理容器应用程序了。&lt;/p&gt;
&lt;h2 id=&#34;docker交互&#34;&gt;docker交互&lt;/h2&gt;
&lt;p&gt;启动 Colima 后，您可以使用 Docker CLI 与容器交互。在 Colima 中，Docker CLI 已经预先安装了，所以您可以直接使用 &lt;code&gt;docker&lt;/code&gt; 命令来管理容器。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Ubuntu22.04安装kubeadm</title>
      <link>http://localhost:1313/aLong/posts/ubuntu22.04%E5%AE%89%E8%A3%85kubeadm/</link>
      <pubDate>Wed, 11 Jan 2023 16:30:47 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/ubuntu22.04%E5%AE%89%E8%A3%85kubeadm/</guid>
      <description>&lt;h1 id=&#34;学习k8s&#34;&gt;学习k8s&lt;/h1&gt;
&lt;p&gt;学习k8s做笔记，通过kubeadm搭建1master、2node。网络插件：flannel。系统Ubuntu22.04&lt;/p&gt;
&lt;h2 id=&#34;系统安装docker&#34;&gt;系统安装docker&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/engine/install/ubuntu/&#34;&gt;Docker官方手册&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;master、node设备各安装docker、kubelet、 kubeadm、 kubectl。&lt;/p&gt;
&lt;h2 id=&#34;为kubeadm准备&#34;&gt;为kubeadm准备&lt;/h2&gt;
&lt;p&gt;master、node进行准备工作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;将cgroup处理改成systemd&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;nano /etc/docker/daemon.json&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;#34;exec-opts&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;native.cgroupdriver=systemd&amp;#34;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;#34;log-driver&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;json-file&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;#34;log-opts&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;#34;max-size&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;100m&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;#34;storage-driver&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;overlay2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;sudo systemctl enable docker&lt;/code&gt;
&lt;code&gt;sudo systemctl daemon-reload&lt;/code&gt;
&lt;code&gt;sudo systemctl restart docker&lt;/code&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;为了让 Kubernetes 能够检查、转发网络流量，你需要修改 iptables 的配置，启用“br_netfilter”模块&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;nano /etc/modules-load.d/k8s.conf&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;br_netfilter&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;nano /etc/sysctl.d/k8s.conf&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;net.bridge.bridge-nf-call-ip6tables&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;net.bridge.bridge-nf-call-iptables&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;net.ipv4.ip_forward&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;sudo sysctl --system&lt;/code&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;修改“/etc/fstab”，关闭 Linux 的 swap 分区，提升 Kubernetes 的性能&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;sudo swapoff -a&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;sudo sed -ri &amp;#39;/\sswap\s/s/^#?/#/&amp;#39; /etc/fstab&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;安装kubeadm&#34;&gt;安装kubeadm&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/&#34;&gt;Kuneadm官方手册&lt;/a&gt;
&lt;strong&gt;在master、node上都需要安装&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;更新 &lt;code&gt;apt&lt;/code&gt; 包索引并安装使用 Kubernetes &lt;code&gt;apt&lt;/code&gt; 仓库所需要的包：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt-get install -y apt-transport-https ca-certificates curl
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;(有条件)下载 Google Cloud 公开签名秘钥：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo curl -fsSLo /etc/apt/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果上面访问不到，可选择其他,例如&lt;a href=&#34;https://mirrors.tuna.tsinghua.edu.cn/help/kubernetes/&#34;&gt;清华源&lt;/a&gt;提供：
导入gpg key&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>通过minikube部署K8S学习环境</title>
      <link>http://localhost:1313/aLong/posts/%E9%80%9A%E8%BF%87minikube%E9%83%A8%E7%BD%B2k8s%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/</link>
      <pubDate>Fri, 06 Jan 2023 15:35:43 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E9%80%9A%E8%BF%87minikube%E9%83%A8%E7%BD%B2k8s%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/</guid>
      <description>&lt;p&gt;Minikube 是本地 Kubernetes，专注于让 Kubernetes 易于学习和开发。&lt;/p&gt;
&lt;h1 id=&#34;macos部署方式&#34;&gt;MacOS部署方式:&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://minikube.sigs.k8s.io/docs/start/&#34;&gt;官方教程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;本次使用的驱动是 parallels驱动。所以本机需要安装此软件。
安装kubectl：&lt;code&gt;brew install kubectl&lt;/code&gt;
安装minikube：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo install minikube-darwin-amd64 /usr/local/bin/minikube
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;通过minikube启动集群&#34;&gt;通过minikube启动集群&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;minikube start &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;--kubernetes-version&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;v1.23.9 &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;--image-mirror-country&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;cn&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;--registry-mirror&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;https://？？？？？.mirror.aliyuncs.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;因为是国内，所以&lt;code&gt;--image-mirror-country=&#39;cn&#39;&lt;/code&gt;。通过&lt;code&gt;--registry-mirror&lt;/code&gt;为 Docker daemon 配置镜像加速。例如上面是阿里云镜像服务地址。
因为我学习的版本是1.23.x，所以制定了版本&lt;code&gt;--kubernetes-version=v1.23.9&lt;/code&gt;。
默认他读去了驱动配置，识别是&lt;code&gt;parallels&lt;/code&gt;,自己定义方式&lt;code&gt;--driver=hyperkit&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;安装结果：
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2023/01/06/C3AFxdiPbq8aIuR.jpg&#34; alt=&#34;C3AFxdiPbq8aIuR&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;em&gt;错误&lt;/em&gt;：
如果存在错误请看具体上面的问题，很多情况都能直观看到提示。其中图标是❗️提示一些问题、💡给你一些建议等等。&lt;/p&gt;
&lt;h4 id=&#34;驱动选择&#34;&gt;驱动选择：&lt;/h4&gt;
&lt;p&gt;使用docker驱动需要安装docker desktop。其他驱动：virtualbox、vmware、ssh、Hyperkit等。具体详见&lt;a href=&#34;https://minikube.sigs.k8s.io/docs/drivers/&#34;&gt;drivers page&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;验证结果&#34;&gt;验证结果&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;查询minikube状态
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2023/01/06/otU8LYBjuFeDa31.png&#34; alt=&#34;otU8LYBjuFeDa31&#34;  /&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;进入面板
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2023/01/06/FmrBXOTJ1N2AZgU.png&#34; alt=&#34;FmrBXOTJ1N2AZgU&#34;  /&gt;

&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2023/01/06/IPBCwUSx7Fb28Ee.png&#34; alt=&#34;IPBCwUSx7Fb28Ee&#34;  /&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;kubectl控制
&lt;code&gt;minikube kubectl -- get pods -A&lt;/code&gt;
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2023/01/06/EziUHcpln27ufeB.png&#34; alt=&#34;EziUHcpln27ufeB&#34;  /&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;kubectl在minikube中使用，需要写 &lt;code&gt;nimikune kubectl --&lt;/code&gt;后面加入执行的命令。
macos默认使用的zsh，在zsh加入alias就可以敲的少的了。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-zsh&#34; data-lang=&#34;zsh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vi ~/.zshrc
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#加入一行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;alias&lt;/span&gt; &lt;span style=&#34;color:#19177c&#34;&gt;kubectl&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;minikube kubectl --&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#退出&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;source&lt;/span&gt; ~/.zshrc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;再创建一个Pod
创建：
&lt;code&gt;kubectl run nginx --image=nginx:alpine&lt;/code&gt;
查询：
&lt;code&gt;kubectl get pods nginx&lt;/code&gt;
详情：
&lt;code&gt;kubectl describe pods nginx&lt;/code&gt;
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2023/01/06/pYPqIgt84LzBcEU.png&#34; alt=&#34;pYPqIgt84LzBcEU&#34;  /&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;到这里k8s可以使用了。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>IOS使用Shadowrocket激活Emby</title>
      <link>http://localhost:1313/aLong/posts/ios%E4%BD%BF%E7%94%A8shadowrocket%E6%BF%80%E6%B4%BBembyx/</link>
      <pubDate>Wed, 16 Nov 2022 10:44:11 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/ios%E4%BD%BF%E7%94%A8shadowrocket%E6%BF%80%E6%B4%BBembyx/</guid>
      <description>&lt;p&gt;前提需要手机安装ShadowRocket。没有可以自己去找共享ID。
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/aMKuwbEe1Y3BVgF.png&#34; alt=&#34;aMKuwbEe1Y3BVgF&#34;  /&gt;

长按后弹出选项：
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/1HKa2Vywfq9uU8L.png&#34; alt=&#34;1HKa2Vywfq9uU8L&#34;  /&gt;

打开配置，例如在default上添加规则。点击default，编辑纯文本。
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/aMNLtnGY6TxwuHS.png&#34; alt=&#34;aMNLtnGY6TxwuHS&#34;  /&gt;

在文本最下面加入内容：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-conf&#34; data-lang=&#34;conf&#34;&gt;[Script]
EmbyPremiere = type=http-response,script-path=https://gitlab.com/iptv-org/embypublic/-/raw/master/Script/EmbyPremiere.js,pattern=^https?:\/\/mb3admin.com\/admin\/service\/registration\/validateDevice,max-size=131072,requires-body=true,timeout=10,enable=true

[MITM]
hostname = mb3admin.com
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/S3tpX5xZlwqKCYe.png&#34; alt=&#34;S3tpX5xZlwqKCYe&#34;  /&gt;

点击保存后，点右侧!进入。点击HTTPS解密。
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/oP4D65aX2MKbwxO.png&#34; alt=&#34;oP4D65aX2MKbwxO&#34;  /&gt;

&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/5pQf9oy73ISxi1M.png&#34; alt=&#34;5pQf9oy73ISxi1M&#34;  /&gt;

开启HTTPS加密，会生成证书。同意安装描述文件。右上角点击勾。
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/gnRNIqTBvfZVsMd.png&#34; alt=&#34;gnRNIqTBvfZVsMd&#34;  /&gt;

&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/3gsU81y6Av9OoFT.png&#34; alt=&#34;3gsU81y6Av9OoFT&#34;  /&gt;

去手机设置中，通用-&amp;gt;描述文件与设备管理-&amp;gt;点击描述文件(名称大概有Shadowrocket那个)-&amp;gt;安装。
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/wVqbC231FH945Zn.png&#34; alt=&#34;wVqbC231FH945Zn&#34;  /&gt;

注意在Shadowrocket的首页上，全局路由选择配置。&lt;/p&gt;
&lt;p&gt;最后进入Emby软件。可能会提示证书点OK。如果没有提示，点一个影片后也会提示，点OK。如果Shadowrocket开启通知可以看到提示认证成功。
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/11/16/TgfoqKyI2pFNrt8.png&#34; alt=&#34;TgfoqKyI2pFNrt8&#34;  /&gt;

后面就可以畅快看影视啦。&lt;/p&gt;
&lt;p&gt;下次进入Emby时不需要Shadowrocket的配置了。当出现付费提示再开启那个配置就可以激活了。&lt;/p&gt;
&lt;p&gt;完结～
祝好！&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Zabbix自动发现SNMP设备</title>
      <link>http://localhost:1313/aLong/posts/zabbix%E8%87%AA%E5%8A%A8%E5%8F%91%E7%8E%B0snmp%E8%AE%BE%E5%A4%87/</link>
      <pubDate>Wed, 12 Oct 2022 11:15:29 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/zabbix%E8%87%AA%E5%8A%A8%E5%8F%91%E7%8E%B0snmp%E8%AE%BE%E5%A4%87/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;Zabbix提供高效灵活的网络自动发现功能。
网络发现的优势：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;加快部署速度&lt;/li&gt;
&lt;li&gt;简化管理&lt;/li&gt;
&lt;li&gt;在快速变化的环境中避免过度管理
&lt;a href=&#34;https://www.zabbix.com/documentation/6.0/zh/manual/discovery/network_discovery&#34;&gt;manual-zh&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;发现snmp例子&#34;&gt;发现SNMP例子&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;网段内存在几天设备，其中一台是SNMPv2，一台SNMPv3，通过发现将他们加入并监控&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;大概流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;发现规则，通过发现规则去发现设备。&lt;/li&gt;
&lt;li&gt;发现后的动作，发现设备后做什么。&lt;/li&gt;
&lt;li&gt;验证发现结果。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;创建发现规则&#34;&gt;创建发现规则&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/09/21/QkadRCY9h4MlpH1.png&#34; alt=&#34;QkadRCY9h4MlpH1&#34;  /&gt;

&lt;code&gt;Configuration -&amp;gt; Discovery -&amp;gt; Create discovery rule &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/09/21/lUKJ59gjF6wtWzv.png&#34; alt=&#34;lUKJ59gjF6wtWzv&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过SNMPv2协议，根据oid检查。 这个oid是设备名。 community是根据设备来的。通过SNMP取设备名，host名称是IP地址，可见名称是SNMP取的设备名称。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;重点配置内容&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IP range  发现IP范围&lt;/li&gt;
&lt;li&gt;Update interval 发现周期&lt;/li&gt;
&lt;li&gt;Checks  使用此检查列表来执行网络发现&lt;/li&gt;
&lt;li&gt;Device uniqueness criteria 唯一标识&lt;/li&gt;
&lt;li&gt;Host name  主机名称&lt;/li&gt;
&lt;li&gt;Visible name 可见名称&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;创建发现动作&#34;&gt;创建发现动作&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/09/21/aE74jtgmZpHCJkG.png&#34; alt=&#34;aE74jtgmZpHCJkG&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Configuration -&amp;gt; Actions -&amp;gt; Discovery actions&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/09/21/k2zJWCjy13bVt7Z.png&#34; alt=&#34;k2zJWCjy13bVt7Z&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Action 选项中：
主要配置Conditions内容：
我写了两个条件，因为我发现写了v2，v3版本的协议。所以有两个条件。如果都是v2就写一个就ok。简单来讲满足我demo。&lt;/p&gt;
&lt;p&gt;Operations 选项：
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/09/21/rEc2Y5apTeO6JK3.png&#34; alt=&#34;rEc2Y5apTeO6JK3&#34;  /&gt;
&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;发现的设备添加， Add host 。&lt;/li&gt;
&lt;li&gt;加入设备组， Add to host groups：组名。&lt;/li&gt;
&lt;li&gt;关联模版，Link to templates：模版名。&lt;/li&gt;
&lt;li&gt;开启Host。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;通过这个配置后，发现的主机会根据这个配置进行操作。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Lux视频下载工具</title>
      <link>http://localhost:1313/aLong/posts/lux%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/</link>
      <pubDate>Thu, 01 Sep 2022 13:03:41 +0800</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/lux%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/</guid>
      <description>&lt;h2 id=&#34;简介&#34;&gt;简介&lt;/h2&gt;
&lt;p&gt;是一个下载视频的软件. 我一般通过此软件下载b站视频.支持专辑下载.
支持的站点: &lt;a href=&#34;https://github.com/iawia002/lux#supported-sites&#34;&gt;介绍&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;仓库&#34;&gt;仓库&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/iawia002/lux&#34;&gt;github:lux&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;安装mac&#34;&gt;安装(mac)&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;brew install lux&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;需要的依赖&#34;&gt;需要的依赖&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://www.ffmpeg.org/&#34;&gt;ffmpeg&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;使用&#34;&gt;使用&lt;/h2&gt;
&lt;p&gt;命令: &lt;code&gt;lux [OPTIONS] URL [URL...]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;例子:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#我想下载某专辑视频,首先创建一个文件夹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir golang
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#然后进入文件夹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;cd&lt;/span&gt; golang
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;##执行lux 下载专辑 (-eto bilibili每集文件名不包含播放列表标题)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lux -p -eto https://www.bilibiLi.com/video/BV1SF411z7XW
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;##选择性下载 例如只下载 10-20集&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lux -p -eto -items 10-20 https://www.bilibiLi.com/video/BV1SF411z7XW
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;## 选择清晰度 需要-i查看一下清晰度.查看 download with值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lux -i https://www.bilibili.com/video/BV1SF411z7XW
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;## 加入清晰度参数1080(不建议,列表执行清晰度可能不全是1080会导致报错)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lux -p -eto -f 80-7 https://www.bilibili.com/video/BV1SF411z7XW
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;图片展示&#34;&gt;图片展示&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;下载:
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/08/24/5MYUxakfXPiBZIq.png&#34; alt=&#34;下载&#34;  /&gt;
&lt;/li&gt;
&lt;li&gt;下载完成结果
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/08/24/41QIMdEcWzi2s5K.png&#34; alt=&#34;41QIMdEcWzi2s5K&#34;  /&gt;
&lt;/li&gt;
&lt;li&gt;查询清晰度
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/08/24/mEfOYcG9Uq76L2D.png&#34; alt=&#34;mEfOYcG9Uq76L2D&#34;  /&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Zabbix6 网络发现</title>
      <link>http://localhost:1313/aLong/posts/zabbix-%E7%BD%91%E7%BB%9C%E5%8F%91%E7%8E%B0/</link>
      <pubDate>Fri, 14 Jan 2022 10:15:53 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/zabbix-%E7%BD%91%E7%BB%9C%E5%8F%91%E7%8E%B0/</guid>
      <description>&lt;p&gt;Zabbix6 网络发现&lt;/p&gt;
&lt;h3 id=&#34;功能&#34;&gt;功能&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;快速发现并添加主机&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;简单的管理&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;随着环境的改变而快速搭建系统&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;发现配置依据&#34;&gt;发现配置依据&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;IP地址段&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;基于服务(FTP、SSH、Web、POP3、IMAP、TCP&amp;hellip;)的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;从Zabbix-Agent接收到的信息&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SNMP agent接收的信息&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;添加方式&#34;&gt;添加方式&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;创建 Discovery rule&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/05/30/8kqFzeiKIAr6fDN.png&#34; alt=&#34;3qoFJE.png&#34;  /&gt;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Name：规则名称（唯一）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Discovery by proxy： 是否由代理执行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IP range： IP地址范围&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;单个IP: 192.168.1.33
IP段: 192.168.1-10.1-255. 范围受限于覆盖地址的总数（小于64K）。
子网掩码: : 192.168.4.0/24
支持的子网掩码:
/16 - /30 for IPv4 addresses
/112 - /128 for IPv6 addresses\IP列表: 192.168.1.1-255, 192.168.2.1-100, 192.168.2.200, 192.168.4.0/24
Zabbix 3.0.0起，此字段支持空格，表格和多行。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Update interval: Zabbix执行规则的频率&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Checks: 发现的方式&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/05/30/Y8R6VhGNgmFq7KS.png&#34; alt=&#34;FTCW1e.png&#34;  /&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Device uniqueness criteria：设备唯一标识&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Host name ： 主机名&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Visible name：描述名&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/05/30/8azsd4mVbDPU39L.png&#34; alt=&#34;ohbmIZ.png&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>linux环境redis开机启动</title>
      <link>http://localhost:1313/aLong/posts/linux%E7%8E%AF%E5%A2%83redis%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</link>
      <pubDate>Tue, 11 Jan 2022 10:16:39 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/linux%E7%8E%AF%E5%A2%83redis%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</guid>
      <description>&lt;h2 id=&#34;前提&#34;&gt;前提&lt;/h2&gt;
&lt;p&gt;系统部署在ubuntu20.04中，用到redis数据库。
但是测试时候，设备重启发现redis服务没有启动。
由于是变异安装的，系统找不到redis.service。&lt;/p&gt;
&lt;h2 id=&#34;解决方案&#34;&gt;解决方案&lt;/h2&gt;
&lt;p&gt;系统添加服务文件，并执行。&lt;/p&gt;
&lt;h3 id=&#34;编写文件&#34;&gt;编写文件&lt;/h3&gt;
&lt;p&gt;文件路径&lt;code&gt;/usr/lib/systemd/system&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;编写文件 &lt;code&gt;vi /usr/lib/systemd/system/redis.service&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;[Unit]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#服务描述&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;Description&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;Redis persistent key-value database&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#服务依赖&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;After&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;network.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;After&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;network-online.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;Wants&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;network-online.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;[Service]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#启动 命令&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ExecStart&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;/home/monitor/redis-6.0.8/src/redis-server /home/monitor/redis-6.0.8/redis.conf --protected-mode no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#停止命令&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ExecStop&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;/home/monitor/redis-6.0.8/src/redis-cli shutdown&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;Restart&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;always&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#服务类型&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;Type&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;forking&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#User=redis&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#Group=redis&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;RuntimeDirectory&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;redis&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;RuntimeDirectoryMode&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;0755&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;[Install]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#服务安装设置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;WantedBy&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;multi-user.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;服务配置文件分为[Unit]、[Service]和[Install]三部分。
具体详细的解释需要结合linux知识补充。&lt;/p&gt;
&lt;h3 id=&#34;服务生效&#34;&gt;服务生效&lt;/h3&gt;
&lt;p&gt;系统重新读取所有服务文件： &lt;code&gt;systemctl daemon-reload&lt;/code&gt;
启用/禁用开机自启动: &lt;code&gt;systemctl enable/disable redis&lt;/code&gt;
启动/重启redis： &lt;code&gt;systemctl start/restart redis&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>armbian配置-N1盒子</title>
      <link>http://localhost:1313/aLong/posts/armbian%E7%B3%BB%E7%BB%9F%E6%96%90%E8%AE%AFn1%E7%9B%92%E5%AD%90%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Sat, 20 Nov 2021 14:04:47 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/armbian%E7%B3%BB%E7%BB%9F%E6%96%90%E8%AE%AFn1%E7%9B%92%E5%AD%90%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/</guid>
      <description>&lt;p&gt;armbian配置（N1盒子）&lt;/p&gt;
&lt;h2 id=&#34;设置时区&#34;&gt;设置时区：&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;timedatectl set-timezone Asia/Shanghai&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;安装docker&#34;&gt;安装docker&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;apt update&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;apt install ca-certificates  curl  gnupg  lsb-release&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;echo \ &amp;quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \ $(lsb_release -cs) stable&amp;quot; | tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;apt update&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;apt install docker-ce docker-ce-cli containerd.io&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;安装docker-compose&#34;&gt;安装docker-compose&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;wget地址是加速器转换地址，版本和地址请根据版本号编辑地址&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;wget https://download.fastgit.org/docker/compose/releases/download/v2.1.1/docker-compose-linux-aarch64 &amp;amp;&amp;amp; mv docker-compose-linux-aarch64 /usr/local/bin/docker-compose &amp;amp;&amp;amp; chmod +x /usr/local/bin/docker-compose&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;wifi&#34;&gt;WIFI&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;查看附近无线网络信号：nmcli dev wifi list&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;无密码的 WIFI：nmcli device wifi connect &amp;lt;SSID|BSSID&amp;gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;加密WIFI： nmcli device wifi connect &amp;lt;SSID|BSSID&amp;gt; password &lt;!-- raw HTML omitted --&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>S5720 SNMP v3配置</title>
      <link>http://localhost:1313/aLong/posts/s5720-snmp-v3/</link>
      <pubDate>Tue, 16 Nov 2021 16:38:35 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/s5720-snmp-v3/</guid>
      <description>&lt;h2 id=&#34;s5720-snmp-v3配置&#34;&gt;S5720 SNMP v3配置&lt;/h2&gt;
&lt;h3 id=&#34;系统视图&#34;&gt;系统视图&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;system-view&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;snmp服务&#34;&gt;SNMP服务&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;snmp-agent&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;管理端口默认161&#34;&gt;管理端口(默认161)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;snmp-agent udp-port *port-num*&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;配置版本默认v3&#34;&gt;配置版本(默认v3)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;snmp-agent sys-info version *v3*&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;配置用户组&#34;&gt;配置用户组&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;snmp-agent group v3 *group-name* {authentication | privacy | noauthentication}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;三种认证加密方式&lt;/p&gt;
&lt;h3 id=&#34;配置v3用户&#34;&gt;配置v3用户&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;snmp-agent usm-user v3 *user-name* [ group *group-name*] &lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;配置用户认证密码&#34;&gt;配置用户认证密码&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;snmp-agent usm-user v3 *user-name* authentication-mode { md5 | sha } [ cipher *password* ]&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;配置加密密码&#34;&gt;配置加密密码&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;snmp-agent usm-user v3 *user-name* privacy-mode { des56 | aes128 |aes192 | aes256 | 3des } [ cipher *password* ]&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>zabbix proxy cannot perform check now for itemid [xxxxx]: item is not in cache</title>
      <link>http://localhost:1313/aLong/posts/zabbix-proxy-cannot-perform-check-now-for-itemid-xxxxx-item-is-not-in-cache/</link>
      <pubDate>Wed, 27 Oct 2021 15:06:44 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/zabbix-proxy-cannot-perform-check-now-for-itemid-xxxxx-item-is-not-in-cache/</guid>
      <description>&lt;h1 id=&#34;zabbix-proxy-cannot-perform-check-now-for-itemid-xxxxx-item-is-not-in-cache&#34;&gt;zabbix proxy cannot perform check now for itemid [xxxxx]: item is not in cache&lt;/h1&gt;
&lt;h2 id=&#34;情况&#34;&gt;情况&lt;/h2&gt;
&lt;p&gt;接上次做完容器部署proxy后，为其添加host进行添加任务。&lt;/p&gt;
&lt;p&gt;发现一直没有数据，就到item里面执行 &lt;code&gt;execute now&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;然后过了几分钟回来一看，还是没有。&lt;/p&gt;
&lt;p&gt;Emmm，看下log吧。&lt;/p&gt;
&lt;p&gt;Server没一场，那问题就在proxy了吧。&lt;/p&gt;
&lt;p&gt;连上proxy去看看：
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/05/30/LSCEA9yqXHwiZmk.png&#34; alt=&#34;TQcfjq.png&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提示好像是去检查对应的itemid，然后说item不在还cache中。
赶紧上网科普！&lt;/p&gt;
&lt;h2 id=&#34;原因&#34;&gt;原因&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/05/30/lorCR8jJaw1OAQ6.png&#34; alt=&#34;I5WWwc.png&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;因为是主动的proxy，那他会定期去server要数据。&lt;/p&gt;
&lt;p&gt;这个3600就是配置的更新周期了。1个小时才去要一次，所以肯定是没监控了。&lt;/p&gt;
&lt;p&gt;为了验证，就等了1小时看看：
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/05/30/jBIEmozFDgJ6dq5.png&#34; alt=&#34;EWJu2V.png&#34;  /&gt;

实锤了，1小时。后面也就有了数据。
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.loli.net/2022/05/30/oN5DvPXsLW6gyVQ.png&#34; alt=&#34;C0pDSl.png&#34;  /&gt;

Host是1小时之后开始有数据的，也就是他同步后就开始执行监控项了。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;查询到的内容：
[地址](https://subscription.packtpub.com/book/networking_and_servers/9781784399764/1/ch01lvl1sec10/understanding-the-zabbix-proxies-data-flow)
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;解决&#34;&gt;解决&lt;/h2&gt;
&lt;p&gt;Ok，那么在重新部署的容器加上此参数(ZBX_CONFIGFREQUENCY)。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker run --name zbxproxy -d &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_SERVER_HOST&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;192.168.10.66 &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_HOSTNAME&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;testproxy&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_TIMEOUT&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;10&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_TLSACCEPT&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;psk &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_TLSCONNECT&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;psk &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_TLSPSKIDENTITY&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;helloworld &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_TLSPSKFILE&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;zbx_proxy.psk &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-e &lt;span style=&#34;color:#19177c&#34;&gt;ZBX_CONFIGFREQUENCY&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;600&lt;/span&gt; &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-v /etc/localtime:/etc/localtime:ro &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-v /zbx_proxy.psk:/var/lib/zabbix/enc/zbx_proxy.psk &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;--restart&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;always &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;zabbix/zabbix-proxy-sqlite3:alpine-trunk
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&amp;ndash;祝好&lt;/p&gt;
&lt;p&gt;本文结束&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Zabbix-Proxy 部署运行</title>
      <link>http://localhost:1313/aLong/posts/zabbix-proxy-%E9%83%A8%E7%BD%B2-%E8%BF%90%E8%A1%8C/</link>
      <pubDate>Thu, 24 Jun 2021 17:20:40 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/zabbix-proxy-%E9%83%A8%E7%BD%B2-%E8%BF%90%E8%A1%8C/</guid>
      <description>&lt;h2 id=&#34;前提&#34;&gt;前提&lt;/h2&gt;
&lt;p&gt;版本： zabbix-server 5.4&lt;/p&gt;
&lt;p&gt;任务： 通过SNMP监控网络设备，需要需通过zabbix-proxy 发送到zabbix-server。&lt;/p&gt;
&lt;h2 id=&#34;安装zabbix-proxy&#34;&gt;安装Zabbix-Proxy&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;安装Zabbix仓库&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    wget https://repo.zabbix.com/zabbix/5.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_5.4-1+ubuntu20.04_all.deb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    dpkg -i zabbix-release_5.4-1+ubuntu20.04_all.deb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    apt update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;安装Zabbix-proxy &amp;amp; mysql&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;em&gt;这里我选择的是mysql作为数据库&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;apt install mysql-server&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;apt install zabbix-proxy-mysql&lt;/code&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;导入数据&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;zcat /usr/share/doc/zabbix-proxy-mysql/schema.sql.gz | mysql -uzabbix -p zabbix&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这里可能跑不通。我装了两次都发现没有 schema.sql.gz 这个文件。
如果你也是，那需要找一下这个sql文件。&lt;/p&gt;
&lt;p&gt;下载5.4源码包：
&lt;code&gt;wget https://cdn.zabbix.com/zabbix/sources/stable/5.4/zabbix-5.4.1.tar.gz&lt;/code&gt;
&lt;img loading=&#34;lazy&#34; src=&#34;https://img-blog.csdnimg.cn/img_convert/8eadb68dbe4f2051e1c72a2919286f07.png#id=yP1Gu&amp;amp;originHeight=1340&amp;amp;originWidth=652&amp;amp;originalType=binary&amp;amp;ratio=1&amp;amp;status=done&amp;amp;style=none&#34; alt=&#34;&#34;  /&gt;

解压之后，在 &lt;code&gt;/zabbix-5.4.1/databases/mysql/&lt;/code&gt; 中&lt;/p&gt;
&lt;p&gt;通过 &lt;code&gt;cat schema.sql | mysql -uzabbix -p&lt;/code&gt; 导入到数据库中。&lt;/p&gt;
&lt;p&gt;4.配置zabbix-proxy&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vim /etc/zabbix/zabbix_proxy.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;修改Zabbix Server地址,Hostname，在server添加中，此名称要与这里一致。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://img-blog.csdnimg.cn/img_convert/8e3e758e82804c0909ee74bd40d1b988.png#id=HVbW6&amp;amp;originHeight=820&amp;amp;originWidth=1968&amp;amp;originalType=binary&amp;amp;ratio=1&amp;amp;status=done&amp;amp;style=none&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改为正确的数据库名字、用户名、密码。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://img-blog.csdnimg.cn/img_convert/4f0b8f22d1c7753e24705f37025297a1.png#id=ogGz5&amp;amp;originHeight=994&amp;amp;originWidth=1230&amp;amp;originalType=binary&amp;amp;ratio=1&amp;amp;status=done&amp;amp;style=none&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;其他配置可以酌情配置。例如server配置频率，log位置，本地缓存时间、主动被动、监听端口等等。&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;启动zabbix-proxy
&lt;code&gt;systemctl start zabbix-proxy &amp;amp;&amp;amp; systemctl enable zabbix-proxy&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;在zabbix-server 中添加proxy，然后在对应的host主机上选择proxy。
&lt;img loading=&#34;lazy&#34; src=&#34;https://img-blog.csdnimg.cn/img_convert/c869c5c2e48a6d94965c4ee9afd1d3a3.png#id=XryPJ&amp;amp;originHeight=1252&amp;amp;originWidth=1686&amp;amp;originalType=binary&amp;amp;ratio=1&amp;amp;status=done&amp;amp;style=none&#34; alt=&#34;&#34;  /&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://img-blog.csdnimg.cn/img_convert/4236f0501054b223da6b5dde07a340a0.png#id=UMgsH&amp;amp;originHeight=930&amp;amp;originWidth=3870&amp;amp;originalType=binary&amp;amp;ratio=1&amp;amp;status=done&amp;amp;style=none&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>小米手环解锁MacOS系统笔记本MacBookPro</title>
      <link>http://localhost:1313/aLong/posts/%E5%B0%8F%E7%B1%B3%E6%89%8B%E7%8E%AF%E8%A7%A3%E9%94%81macbookpro%E7%AC%94%E8%AE%B0%E6%9C%AC/</link>
      <pubDate>Fri, 21 May 2021 16:51:23 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E5%B0%8F%E7%B1%B3%E6%89%8B%E7%8E%AF%E8%A7%A3%E9%94%81macbookpro%E7%AC%94%E8%AE%B0%E6%9C%AC/</guid>
      <description>&lt;h2 id=&#34;通过小米手环解锁笔记本&#34;&gt;通过小米手环解锁笔记本&lt;/h2&gt;
&lt;p&gt;官方windows是提供了方法的。
我目前用的MacBookPro，所以说下苹果笔记本的解锁方式。&lt;/p&gt;
&lt;h2 id=&#34;安装软件bleunlock&#34;&gt;安装软件&lt;code&gt;BLEUnlock&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/ts1/BLEUnlock&#34;&gt;库&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;安装方式&#34;&gt;安装方式：&lt;/h3&gt;
&lt;p&gt;brew 安装 &lt;code&gt;brew install bleunlock&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;或下载程序 &lt;a href=&#34;https://github.com/ts1/BLEUnlock/releases&#34;&gt;下载发布的程序&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;安装好打开软件&#34;&gt;安装好打开软件：&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/21/BAINRZxyTp3zV5Y.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;设备列表选择手环，如果发现不到就在&lt;code&gt;小米运动app&lt;/code&gt;中打开&lt;code&gt;实验室&lt;/code&gt;选项里&lt;code&gt;小米笔记本解锁&lt;/code&gt;开关。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/21/vtHLPFJ2jIfoAWR.jpg&#34; alt=&#34;实验室功能&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;设备列表选择你的小米手环。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/21/JjhRDlLHA4idP3O.png&#34; alt=&#34;选择设备&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;解锁RSSI与锁定RSSI 是根据你dBM值来判断是否锁定/解锁笔记本。是一个阈值。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/21/wJcOye9SYs7QLXM.png&#34; alt=&#34;锁定RSSI&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;延迟锁定，无信号超时是时间阈值。功能顾名思义。&lt;/p&gt;
&lt;p&gt;我这里选择开启了屏保来锁定、以及开机启动。&lt;/p&gt;
&lt;p&gt;通过以上配置之后，我们就可以通过小米手环来解锁MacOS笔记本了。&lt;/p&gt;
&lt;h2 id=&#34;请注意一点&#34;&gt;请注意一点&lt;/h2&gt;
&lt;p&gt;如果你是每天背着本上下班的话，那我建议上下班前后别开启此功能。
为什么呢，因为你设定的RSSI值肯定是离近笔记本的。这时候你带着手环和笔记本的时候。他很容易就吧本解锁了。然后你发现从书包拿出来本巨热无比。&lt;/p&gt;
&lt;p&gt;为啥呢，他唤醒了设备啊 还解锁了～&lt;/p&gt;
&lt;p&gt;这点我不知道怎么搞定呢，好 结束～&lt;/p&gt;
&lt;p&gt;祝好&lt;/p&gt;
&lt;p&gt;拜拜～&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>小米手环表盘自定义</title>
      <link>http://localhost:1313/aLong/posts/%E5%B0%8F%E7%B1%B3%E6%89%8B%E7%8E%AF%E5%8F%98%E7%9B%98%E8%87%AA%E5%AE%9A%E4%B9%89/</link>
      <pubDate>Thu, 20 May 2021 16:34:55 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E5%B0%8F%E7%B1%B3%E6%89%8B%E7%8E%AF%E5%8F%98%E7%9B%98%E8%87%AA%E5%AE%9A%E4%B9%89/</guid>
      <description>&lt;p&gt;前阵子媳妇给买了个手环。小米手环5NFC，价格还可以。
&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/pSb2DolBKGYfd38.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;定义表盘&#34;&gt;定义表盘&lt;/h2&gt;
&lt;p&gt;手环就不做评价了，我感觉续航不错。屏幕划痕太容了吧。&lt;/p&gt;
&lt;p&gt;吐槽完了说下能玩的也就表盘了吧。&lt;/p&gt;
&lt;p&gt;出小米运动能同步的那些之外，总想搞点与众不同的。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;请访问-&amp;gt;&lt;a href=&#34;https://amazfitwatchfaces.com/&#34;&gt;AW&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/aYhGMESFAt3PHpq.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不仅是小米5，6都有了。&lt;/p&gt;
&lt;p&gt;我们根据自己的设备来选择。&lt;/p&gt;
&lt;p&gt;可以看到有面上方有个分类，语言筛选。&lt;/p&gt;
&lt;p&gt;这个还是很有用的，如果你只希望看到中文表盘，那就选择中文。
但是中文可能相对较少，我建议所有，然后看喜欢的界面吧。毕竟表盘上也没几个字。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;当我们点中某一个表盘，他会进到详情页。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/jKSMhXgiu8HLRy3.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;点击下载，可以弹出来具体的表盘文件。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/nsa9xkZdiuTlcmI.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可以看到不同的文件有一些描述，比如语言，以及其他的一些描述。根据喜好下载。&lt;/p&gt;
&lt;p&gt;我建议手机下载，省的再从电脑发到手机上。&lt;/p&gt;
&lt;p&gt;下完之后，下面就需要同步表盘了。&lt;/p&gt;
&lt;p&gt;我目前知道的方式，就是通过一些APP来同步。其他方式我没研究过。&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;我使用的手机是Iphone，所以我安装此软件：&lt;code&gt;amaztools&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/pmMfVPBR3AC1dIY.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;安装完软件进入：
主页同步信息等这些不重要略过。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/zpkCwt9GxTjAsLE.png&#34; alt=&#34;Home&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里app也提供了一些表盘。相比之下，这里面内容不多。喜欢可以看看，下载。在这里的下载后，同步就好。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/9MGnzhjtbpogfld.png&#34; alt=&#34;Browse&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里展示从app下载的表盘。
&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/PdufqrKl7JSYAoM.png&#34; alt=&#34;Downloads&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;在More里面，有我们需要的功能，&lt;code&gt;install custom file&lt;/code&gt;。安装我们下载的表盘。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/pMEZWwuaSqhRdvA.png&#34; alt=&#34;More&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;点击 &lt;code&gt;install custom file&lt;/code&gt;
&lt;img loading=&#34;lazy&#34; src=&#34;https://i.loli.net/2021/05/20/AMHrGvTR8N4ks29.png&#34; alt=&#34;Install Custom File&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;选择我们下载的变盘，然后同步到手环上。 过程就结束了。&lt;/p&gt;
&lt;p&gt;真的结束了吗？！ 还要下载好多一个个去试～ 哈哈哈哈&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;结束
祝好&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Mac OS自己安装的小软件</title>
      <link>http://localhost:1313/aLong/posts/mac-os%E8%87%AA%E5%B7%B1%E5%AE%89%E8%A3%85%E7%9A%84%E5%B0%8F%E8%BD%AF%E4%BB%B6/</link>
      <pubDate>Thu, 06 May 2021 11:06:20 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/mac-os%E8%87%AA%E5%B7%B1%E5%AE%89%E8%A3%85%E7%9A%84%E5%B0%8F%E8%BD%AF%E4%BB%B6/</guid>
      <description>&lt;h2 id=&#34;自己使用mac一年多&#34;&gt;自己使用Mac一年多&lt;/h2&gt;
&lt;p&gt;自己在19年12月换了mac 16&amp;quot; 笔记本。之前一直windwos，后来看很多讲师在讲课的时候都是mac本本。又觉得windws10更新频繁，还强制让我很不爽。&lt;/p&gt;
&lt;p&gt;最后凑巧16&amp;quot;出来后，自己媳妇送了我一台。美滋滋～&lt;/p&gt;
&lt;h2 id=&#34;讲讲我说的小软件&#34;&gt;讲讲我说的小软件&lt;/h2&gt;
&lt;p&gt;一些好玩的，实用的软件。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Bob&lt;/li&gt;
&lt;li&gt;Hidden Bar&lt;/li&gt;
&lt;li&gt;itsycal&lt;/li&gt;
&lt;li&gt;pap.er&lt;/li&gt;
&lt;li&gt;uPic&lt;/li&gt;
&lt;li&gt;Go2Shell&lt;/li&gt;
&lt;li&gt;uTools&lt;/li&gt;
&lt;li&gt;PicGo&lt;/li&gt;
&lt;li&gt;electerm&lt;/li&gt;
&lt;li&gt;BLEUnlock&lt;/li&gt;
&lt;li&gt;Clipy&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>SSH 指定端口访问</title>
      <link>http://localhost:1313/aLong/posts/ssh-%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE/</link>
      <pubDate>Sat, 13 Mar 2021 18:21:50 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/ssh-%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE/</guid>
      <description>&lt;h2 id=&#34;很尴尬&#34;&gt;很尴尬&lt;/h2&gt;
&lt;p&gt;今天测试，一个通过隧道远程到设备的功能。&lt;/p&gt;
&lt;p&gt;隧道创建完成，然后我就要ssh到哪台设备。反复连接一直不通，心里万马奔腾啊！～&lt;/p&gt;
&lt;p&gt;查看配置没问题啊，怎么就！@#¥%！！！&lt;/p&gt;
&lt;p&gt;后来发现 自己的锅， &lt;code&gt;ssh user@ip：prot&lt;/code&gt;  Hahaha～～&lt;/p&gt;
&lt;h2 id=&#34;ssh连接&#34;&gt;SSH连接&lt;/h2&gt;
&lt;p&gt;SSH 默认端口22，通常我们ssh 时候指令是这样的 &lt;code&gt;ssh user@ip&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;指定端口&#34;&gt;指定端口&lt;/h3&gt;
&lt;p&gt;指定端口 我很少用，即便是改端口的我也大部分终端软件去连的。&lt;/p&gt;
&lt;p&gt;正确方式： &lt;code&gt;ssh -p port user@ip&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;记忆深刻，这下很尴尬。 特此记录。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>解决/usr/local/go/pkg/darwin_amd64/runtime/cgo.a: permission denied问题</title>
      <link>http://localhost:1313/aLong/posts/%E8%A7%A3%E5%86%B3-usr-local-go-pkg-darwin-amd64-runtime-cgo-a-permission-denied%E9%97%AE%E9%A2%98/</link>
      <pubDate>Mon, 22 Feb 2021 09:06:08 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E8%A7%A3%E5%86%B3-usr-local-go-pkg-darwin-amd64-runtime-cgo-a-permission-denied%E9%97%AE%E9%A2%98/</guid>
      <description>&lt;h3 id=&#34;最近goland在run的时候发现一个问题&#34;&gt;最近Goland在run的时候发现一个问题&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;open /usr/local/go/pkg/darwin_amd64/runtime/cgo.a: permission denied&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;情况具体是当我run的时候有问题。debug可以。根据错误提示看到是权限的事。&lt;/p&gt;
&lt;h3 id=&#34;解决方式&#34;&gt;解决方式&lt;/h3&gt;
&lt;p&gt;执行 &lt;code&gt;sudo chown -R xxx:yyy /usr/local/go&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;xxx 用户名， yyy 组名&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;命令的目的：更改go目录的所有者用户和组。&lt;/p&gt;
&lt;h3 id=&#34;查看用户名用户组&#34;&gt;查看用户名&amp;amp;用户组&lt;/h3&gt;
&lt;p&gt;当前用户名 常用命令 &lt;code&gt;who am i&lt;/code&gt;
查看当前用户名和组 &lt;code&gt;ls -la&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;参考&#34;&gt;参考&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/golang/go/issues/37962&#34;&gt;https://github.com/golang/go/issues/37962&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Grafana插件Plugin中文汉化</title>
      <link>http://localhost:1313/aLong/posts/grafana%E6%8F%92%E4%BB%B6plugin%E4%B8%AD%E6%96%87%E6%B1%89%E5%8C%96/</link>
      <pubDate>Mon, 30 Nov 2020 13:46:47 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/grafana%E6%8F%92%E4%BB%B6plugin%E4%B8%AD%E6%96%87%E6%B1%89%E5%8C%96/</guid>
      <description>&lt;h2 id=&#34;汉化三方插件&#34;&gt;汉化三方插件&lt;/h2&gt;
&lt;p&gt;前面说过汉化Grafana的工作。目前在7.2.1上面，大部分已经完成。细节继续完善。
今天考虑在第三方插件上做一些汉化。点到插件一看全是英文感觉很突出。领导看到了也不爽啊-.-！。&lt;/p&gt;
&lt;h2 id=&#34;找个软的捏&#34;&gt;找个软的捏&lt;/h2&gt;
&lt;p&gt;饼图在展示方面比较直观。Grafana上有一个插件&lt;a href=&#34;https://grafana.com/grafana/plugins/grafana-piechart-panel&#34;&gt;Pie Chart&lt;/a&gt;
。这个现象比较少，同时在一些模版上使用中。就拿这个热热身。&lt;/p&gt;
&lt;h2 id=&#34;具体步骤&#34;&gt;具体步骤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;下载项目&lt;/p&gt;
&lt;p&gt;项目地址：&lt;a href=&#34;https://github.com/grafana/piechart-panel&#34;&gt;piechart-panel&lt;/a&gt;
文件结构：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2020/11/30/ZVbHPT.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone git@github.com:grafana/piechart-panel.git
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;cd&lt;/span&gt; piechart-panel &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 进入到目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yarn install  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;我直接把项目clone到grafana存放插件的位置，我的grafana是为了测试run的一个docker镜像。把插件目录挂载到本机，代码clone到目录中。&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;汉化工作&lt;/p&gt;
&lt;p&gt;根据上面目录看，主要修改文件都在src里面。
IDE打开此项目，在src中修改需要编辑的文件。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2020/11/30/ZVb8Ht.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;图片举例，选项第一项选择图形类型。选项内容&lt;code&gt;pie&lt;/code&gt; / &lt;code&gt;donut&lt;/code&gt;。通过翻译我修改成了 派/甜甜圈。根据修改内容其他地方设计修改的都需要修改。我通过查询替换方式，在其他文件中修改了代码中的判断。例如上图右侧展示的文件类似。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;build插件&lt;/p&gt;
&lt;p&gt;修改完需要的内容之后，grafana是能识别到有一个插件，但没有build时候他会提示你没有build插件。就是他不认识你的项目代码。&lt;/p&gt;
&lt;p&gt;这个怎么处理呢？看&lt;a href=&#34;https://grafana.com/tutorials/build-a-panel-plugin/#3&#34;&gt;&lt;strong&gt;官方的文档&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;执行 &lt;code&gt;yarn dev&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 执行结束提示，美滋滋～&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Bundling plugin in dev mode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✨  Done in 4.91s.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;执行完毕我们重启grafana就可以看到成果了。&lt;/p&gt;
&lt;p&gt;对比下原来的版本和汉化后的版本：&lt;/p&gt;
&lt;p&gt;before：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2020/11/30/ZVb5gM.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;After：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2020/11/30/ZVbGO6.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;测试&amp;amp;调试&lt;/p&gt;
&lt;p&gt;以上2，3步骤基本就是一个测试、调试的过程。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我开始先把所有配置项汉化。然后再处理选项参数。&lt;/li&gt;
&lt;li&gt;接着build，重启grafana查看。如此往复达到预期目标。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;我本机调试用docker启动grafana，测完删了容器就好了。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;持续改进&#34;&gt;持续改进&lt;/h2&gt;
&lt;p&gt;考虑持续处理某个插件，可以考虑fork原插件项目，remote add XXX源。
然后新建分之来做自己的处理。master fetch XXX源 以跟踪上游的更新。
这样自己项目安装插件时候拉自己的就好啦，美滋滋。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>docker-compose编排搭建prometheus&#43;grafana&#43;alertmanager&#43;node-exporter&#43;snmp-exporter</title>
      <link>http://localhost:1313/aLong/posts/docker-compose%E7%BC%96%E6%8E%92%E6%90%AD%E5%BB%BAprometheus-grafana-alertmanager-node-exporter-snmp-exporter/</link>
      <pubDate>Tue, 17 Nov 2020 13:02:50 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/docker-compose%E7%BC%96%E6%8E%92%E6%90%AD%E5%BB%BAprometheus-grafana-alertmanager-node-exporter-snmp-exporter/</guid>
      <description>&lt;h2 id=&#34;docker-compose&#34;&gt;Docker-compose&lt;/h2&gt;
&lt;p&gt;目前集成很多Exporter，加上grafana的image-renderer，后面又加上ping-exporter，很多东西加起来发现操作一次docker 很烦啊。&lt;/p&gt;
&lt;p&gt;科普之后感觉自己对k8s还有有些发怵的。从简单的一个入手吧，选择了docker-compose。&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Docker-Compose项目是Docker官方的开源项目，负责实现对Docker容器集群的快速编排。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;安装&#34;&gt;安装&lt;/h3&gt;
&lt;p&gt;安装方式看了一下，我选择直接下载bin文件方式：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -L https://get.daocloud.io/docker/compose/releases/download/1.12.0/docker-compose-&lt;span style=&#34;color:#ba2121&#34;&gt;`&lt;/span&gt;uname -s&lt;span style=&#34;color:#ba2121&#34;&gt;`&lt;/span&gt;-&lt;span style=&#34;color:#ba2121&#34;&gt;`&lt;/span&gt;uname -m&lt;span style=&#34;color:#ba2121&#34;&gt;`&lt;/span&gt; &amp;gt; /usr/local/bin/docker-compose
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;chmod +x /usr/local/bin/docker-compose&lt;span style=&#34;color:#ba2121&#34;&gt;```&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;通过 &lt;code&gt;docker-compose version&lt;/code&gt;  看到版本信息算是安装完成。&lt;/p&gt;
&lt;h3 id=&#34;编写docker-composeyml&#34;&gt;编写docker-compose.yml&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;目录结构：&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;├── docker-compose.yaml
├── prometheus
│   ├── rules 
│   │   └── *(rules).yaml/json
│   ├── nodes
│   │   └── *(nodes).yaml
│   ├── data
│   │   └── ... # 挂载prom的data数据
│   └── prometheus.yaml
├── alertmanager
│   ├── templates
│   │   └── *.tmpl
│   └── alertmanager.yaml
├── grafana
│   ├── data
│   │   ├── plugins #插件目录
│   │   ├── png     
│   │   └── grafana.db
│   └── grafana.ini
├── snmp(snmp_exporter)
│   └── snmp.yml
└── blackbox(balck box-exporter)
    └── blackbox.yml
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;根据结构编写&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>关闭Mac的Microsoft AutoUpdate</title>
      <link>http://localhost:1313/aLong/posts/%E5%85%B3%E9%97%ADmac%E7%9A%84microsoft-autoupdate/</link>
      <pubDate>Tue, 13 Oct 2020 13:14:34 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E5%85%B3%E9%97%ADmac%E7%9A%84microsoft-autoupdate/</guid>
      <description>&lt;p&gt;最近使用Office 发现AutoUpdate一直会启动。我也不需要里面的更新。每次还要把它推出。&lt;/p&gt;
&lt;p&gt;网上看到有两种方法，一种是暴力删除，另一种是通过权限限制。&lt;/p&gt;
&lt;p&gt;暴力可不是我喜欢的方式，所以选择后者。&lt;/p&gt;
&lt;p&gt;方法：&lt;/p&gt;
&lt;p&gt;打开终端&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;cd&lt;/span&gt; /Library/Application&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\ &lt;/span&gt;Support/Microsoft/MAU2.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo chmod &lt;span style=&#34;color:#666&#34;&gt;000&lt;/span&gt; Microsoft&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\ &lt;/span&gt;AutoUpdate.app  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;两行命令后，输入密码就可以了。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>申请Let&#39;s Encrypt HTTPS 证书脚本</title>
      <link>http://localhost:1313/aLong/posts/%E7%94%B3%E8%AF%B7let-s-encrypt-https-%E8%AF%81%E4%B9%A6%E8%84%9A%E6%9C%AC/</link>
      <pubDate>Wed, 24 Jun 2020 13:33:18 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E7%94%B3%E8%AF%B7let-s-encrypt-https-%E8%AF%81%E4%B9%A6%E8%84%9A%E6%9C%AC/</guid>
      <description>&lt;h2 id=&#34;最近需要到ssl证书又想免懒选择脚本来更新ssl证书文件&#34;&gt;最近需要到SSL证书，又想免懒。选择脚本来更新SSL证书文件&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Let’s Encrypt是一个由非营利性组织互联网安全研究小组（ISRG）提供的免费、自动化和开放的证书颁发机构（CA）。
简单的说，借助Let’s Encrypt颁发的证书可以为我们的网站免费启用HTTPS(SSL/TLS) 。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;那我们通过一个脚本来申请：&lt;/p&gt;
&lt;p&gt;脚本名称： &lt;a href=&#34;https://github.com/acmesh-official/acme.sh&#34;&gt;acme.sh&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;安装acmesh&#34;&gt;安装acme.sh：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;curl https://get.acme.sh | sh&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;创建指令： &lt;code&gt;alias acme.sh=~/.acme.sh/acme.sh&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;测试收否安装成功： &lt;code&gt;acme.sh --Version&lt;/code&gt;
出现版本，安装完成。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;生成证书&#34;&gt;生成证书&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;acme.sh --issue -d demo.com -d www.demo.con -w  /home/wwwroot/demo.com&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–issue是acme.sh脚本用来颁发证书的指令；
-d是–domain的简称，其后面须填写已备案的域名；
-w是–webroot的简称，其后面须填写网站的根目录。&lt;/p&gt;
&lt;h3 id=&#34;查看证书&#34;&gt;查看证书&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;acme.sh --list&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;nginx-配置&#34;&gt;Nginx 配置&lt;/h3&gt;
&lt;p&gt;项目是Nginx，下面是对Nginx的配置。&lt;/p&gt;
&lt;p&gt;acme.sh  &amp;ndash;installcert -d demo.com &lt;br&gt;
&amp;ndash;key-file /etc/nginx/ssl/demo.com.key &lt;br&gt;
&amp;ndash;fullchain-file /etc/nginx/ssl/fullchain.cer &lt;br&gt;
&amp;ndash;reloadcmd &amp;ldquo;service nginx force-reload&amp;rdquo;&lt;/p&gt;
&lt;p&gt;通过 installcert 来完成安装，此处我们需要把*.key,fullchain.cer 文件拷贝到指定位置。最后通过reload命令让Nginx重载（force-reload 我环境中无法使用此参数，这里换成 restart）。&lt;/p&gt;
&lt;p&gt;最后我们需要配置Nginx的443 server&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-nginx&#34; data-lang=&#34;nginx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;server&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;listen&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;443&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;ssl&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;server_name&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;demo.com&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;ssl&lt;/span&gt; &lt;span style=&#34;color:#800&#34;&gt;on&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;ssl_certificate&lt;/span&gt;      &lt;span style=&#34;color:#ba2121&#34;&gt;/etc/nginx/ssl/fullchain.cer&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;ssl_certificate_key&lt;/span&gt;  &lt;span style=&#34;color:#ba2121&#34;&gt;/etc/nginx/ssl/esofar.cn.key&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;到此基本上配置完成了。
Acme.sh 通过定时任务可以实现定期更新。 查看 &lt;code&gt;crontab -l&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>GORM 创建联合约束/索引</title>
      <link>http://localhost:1313/aLong/posts/gorm-%E5%88%9B%E5%BB%BA%E8%81%94%E5%90%88%E7%BA%A6%E6%9D%9F-%E7%B4%A2%E5%BC%95/</link>
      <pubDate>Thu, 11 Jun 2020 11:50:55 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/gorm-%E5%88%9B%E5%BB%BA%E8%81%94%E5%90%88%E7%BA%A6%E6%9D%9F-%E7%B4%A2%E5%BC%95/</guid>
      <description>&lt;h3 id=&#34;grom创建联合索引&#34;&gt;GROM创建联合索引&lt;/h3&gt;
&lt;p&gt;之前提到一个联合约束，那么根据需求再次做一个演示：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;type&lt;/span&gt; Demo &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	ID           &lt;span style=&#34;color:#b00040&#34;&gt;uint&lt;/span&gt;          &lt;span style=&#34;color:#ba2121&#34;&gt;`gorm:&amp;#34;primary_key&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	CreatedAt    time.Time
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	UpdatedAt    time.Time
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	DeletedAt    &lt;span style=&#34;color:#666&#34;&gt;*&lt;/span&gt;time.Time    &lt;span style=&#34;color:#ba2121&#34;&gt;`gorm:&amp;#34;index;unique_index:name_d&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	Name     &lt;span style=&#34;color:#b00040&#34;&gt;string&lt;/span&gt;            &lt;span style=&#34;color:#ba2121&#34;&gt;`gorm:&amp;#34;unique_index:name_d&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	Status       &lt;span style=&#34;color:#b00040&#34;&gt;int&lt;/span&gt;         
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;通过demo 迁移后，&lt;code&gt;deleted_at&lt;/code&gt; 与 &lt;code&gt;name&lt;/code&gt; 会形成一个联合约束。&lt;/p&gt;
&lt;p&gt;-OK,完结-&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>解决约束与软删除冲突</title>
      <link>http://localhost:1313/aLong/posts/%E8%A7%A3%E5%86%B3%E7%BA%A6%E6%9D%9F-%E8%BD%AF%E5%88%A0%E9%99%A4%E5%86%B2%E7%AA%81/</link>
      <pubDate>Thu, 11 Jun 2020 11:15:55 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E8%A7%A3%E5%86%B3%E7%BA%A6%E6%9D%9F-%E8%BD%AF%E5%88%A0%E9%99%A4%E5%86%B2%E7%AA%81/</guid>
      <description>&lt;h3 id=&#34;约束软删除冲突&#34;&gt;约束&amp;amp;软删除冲突&lt;/h3&gt;
&lt;p&gt;本咸鱼对数据库方面研究甚少。能存数据就没多考虑其他问题。尤其是在设计方面。都是按照接口或者业务推到一下就好了。
这次考虑一个问题，学习了一个小问题的处理。
就是标题所述 约束与软删除的冲突。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;场景问题例子：&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;一表单 字段为：&lt;/p&gt;
&lt;p&gt;|:&amp;ndash;|
| id |
| name |
|&amp;hellip; |
| u_number |
| deleted_at |&lt;/p&gt;
&lt;p&gt;考虑 &lt;code&gt;u_number&lt;/code&gt; 唯一问题，添加 约束 &lt;code&gt;UNIQUE&lt;/code&gt;。
&lt;code&gt;u_number&lt;/code&gt; 是可复用的一些唯一数据。&lt;/p&gt;
&lt;p&gt;那么问题来了：&lt;/p&gt;
&lt;p&gt;当操作软删除时候，deleted_at (类型 &lt;code&gt;datetime&lt;/code&gt;) 填充删除时间后，我理想化数据已经被删除。当 &lt;code&gt;u_number&lt;/code&gt; 被其他用户使用插入此表结果是失败的。&lt;/p&gt;
&lt;h4 id=&#34;解决方式&#34;&gt;解决方式&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;u_number&lt;/code&gt; 因为唯一，导致后续使用此前删除的数据是不可行的，如果直接删前者数据也是不太有B格，不科学的事情。
通过 联合的约束来完善此事，&lt;code&gt;deleted_at&lt;/code&gt; 正好是时间， 与其联合使用即解决此事。&lt;/p&gt;
&lt;p&gt;约束不再是单一约束 &lt;code&gt;u_number&lt;/code&gt; 修改成 &lt;code&gt;u_number,deleted_at&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;-OK，完结。-&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Linux重启后Docker设置自动启动&amp;容器自动启动设置</title>
      <link>http://localhost:1313/aLong/posts/linux%E9%87%8D%E5%90%AF%E5%90%8Edocker%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8-%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AE/</link>
      <pubDate>Mon, 18 May 2020 11:03:48 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/linux%E9%87%8D%E5%90%AF%E5%90%8Edocker%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8-%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AE/</guid>
      <description>&lt;h2 id=&#34;linux系统重启后docker自动启动&#34;&gt;Linux系统重启后Docker自动启动&lt;/h2&gt;
&lt;p&gt;系统重启后，如果docker没有启动，那么docker下所有的服务就都挂了。
配置过一次总是忘记命令，这里特意记录一下：
&lt;code&gt;systemctl enable docker.service&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;容器自动启动配置&#34;&gt;容器自动启动配置&lt;/h2&gt;
&lt;p&gt;容器配置好自动启动后，当docker运行后，容器也自动启动。这样能保证服务的稳定性。不用再登录到系统来操作各种容易启动问题。
涉及到的参数为：
&lt;code&gt;--restart=always&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;参数有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;no，默认策略，在容器退出时不重启容器&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;on-failure，在容器非正常退出时（退出状态非0），才会重启容器。例如：on-failure:3，在容器非正常退出时重启容器，最多重启3次&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;always，在容器退出时总是重启容器&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;unless-stopped，在容器退出时总是重启容器，但是不考虑在Docker守护进程启动时就已经停止了的容器&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;容器已存在更新重启配置&#34;&gt;容器已存在更新重启配置&lt;/h3&gt;
&lt;p&gt;可能容器我们已经生成了，后面想实现always这个参数，可以用到下面的命令：
&lt;code&gt;docker container update --restart=always 容器名XXX&lt;/code&gt;
这样就达到了想要的目的。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>解决MAC软件提示已损坏或移到废纸篓</title>
      <link>http://localhost:1313/aLong/posts/%E8%A7%A3%E5%86%B3mac%E8%BD%AF%E4%BB%B6%E6%8F%90%E7%A4%BA%E5%B7%B2%E6%8D%9F%E5%9D%8F%E6%88%96%E7%A7%BB%E5%88%B0%E5%BA%9F%E7%BA%B8%E7%AF%93/</link>
      <pubDate>Fri, 07 Feb 2020 20:24:02 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E8%A7%A3%E5%86%B3mac%E8%BD%AF%E4%BB%B6%E6%8F%90%E7%A4%BA%E5%B7%B2%E6%8D%9F%E5%9D%8F%E6%88%96%E7%A7%BB%E5%88%B0%E5%BA%9F%E7%BA%B8%E7%AF%93/</guid>
      <description>&lt;h3 id=&#34;系统版本&#34;&gt;系统版本&lt;/h3&gt;
&lt;p&gt;macOS Catalina 10.15.1&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;方法一&lt;/p&gt;
&lt;p&gt;允许任何来源的应用。&lt;/p&gt;
&lt;p&gt;系统偏好设置 -&amp;gt; 安全性和隐私： 在 &lt;strong&gt;允许从以下位置下载的应用程序&lt;/strong&gt; 选项中选择 &lt;strong&gt;任何来源&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在 Sierra 10.12 中可能看不到这个选项，开启此功能需要执行命令&lt;code&gt;sudo spctl --master-disable&lt;/code&gt;,&lt;/p&gt;
&lt;p&gt;输入密码就可以看到此选项。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;方法二&lt;/p&gt;
&lt;p&gt;如果上面发法还是打不开，可能需要此方法。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo xattr -r -d com.apple.quarantine /Applications/xxxx.app/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;这里的x x.app如果你不知道名字，可以通过应用中查看应用简介中的名称与扩展名,&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;或者在Applications目录下输入名称补全&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.ax1x.com/2020/02/07/12ElE6.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Mac book pro 终端走代理配置</title>
      <link>http://localhost:1313/aLong/posts/mac-book-pro-%E7%BB%88%E7%AB%AF%E8%B5%B0%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Mon, 20 Jan 2020 08:13:10 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/mac-book-pro-%E7%BB%88%E7%AB%AF%E8%B5%B0%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/</guid>
      <description>&lt;h3 id=&#34;mac-终端走ssr代理&#34;&gt;mac 终端走ssr代理&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;前提是你已经知道怎么使用shadowsocks软件，并且可以出去之后。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;看下自己ssr 代理端口号是多少
高级设置看下 本地Socks5监听端口
&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.ax1x.com/2020/01/20/1PYNKs.png&#34; alt=&#34;高级设置&#34;  /&gt;

&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.ax1x.com/2020/01/20/1PYabq.png&#34; alt=&#34;端口号&#34;  /&gt;

记住这个端口号。
后面：
mac 现在默认终端是用的zsh
编辑 &lt;code&gt;vi ～/.zshrc&lt;/code&gt;
在最后加入
//alias 后面的名字自己可以按照习惯定义， 比如我定义proxy 是 ss。 每当我需要时候 ss 一下就可以了。 不需要的时候执行第二句。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;//端口按照你的来配置alias unproxy&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;unset all_proxy&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;alias proxy&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;export all_proxy=socks5://127.0.0.1:1086&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;测试：
首先在没有走ss 的时候， &lt;code&gt;curl cip.cc&lt;/code&gt; 得到一个国内的信息。
当使用ss之后， 再通过这个查询就可以看到变化了。&lt;/p&gt;
&lt;p&gt;为了便捷，我觉得这个命令也可以设置成别名方式。&lt;/p&gt;
&lt;p&gt;设置一个where 每次当我迷茫不知道自己出没出去的时候，就可以 输入where 看下。
&lt;code&gt;alias where=&#39;curl cip.cc&#39;&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>golang.org/x/xerrors：undefined: errors.Frame</title>
      <link>http://localhost:1313/aLong/posts/golang-org-x-xerrorsundefined-errors-frame/</link>
      <pubDate>Thu, 16 Jan 2020 19:05:39 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/golang-org-x-xerrorsundefined-errors-frame/</guid>
      <description>&lt;h3 id=&#34;项目初始化遇到问题&#34;&gt;项目初始化遇到问题&lt;/h3&gt;
&lt;p&gt;错误为：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-bahs&#34; data-lang=&#34;bahs&#34;&gt;../go/pkg/mod/golang.org/x/xerrors@v0.0.0-20190410155217-1f06c39b4373/adaptor_go1_13.go:16:14: undefined: errors.Frame
../go/pkg/mod/golang.org/x/xerrors@v0.0.0-20190410155217-1f06c39b4373/format_go1_13.go:12:18: undefined: errors.Formatter
exit status 2
exit status 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;通过科普得到一个方法：
&lt;code&gt;go get -u golang.org/x/xerrors&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;问题解决了。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Golang 环境准备</title>
      <link>http://localhost:1313/aLong/posts/golang-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/</link>
      <pubDate>Thu, 16 Jan 2020 18:51:34 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/golang-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/</guid>
      <description>&lt;h2 id=&#34;安装golang&#34;&gt;安装GOlang&lt;/h2&gt;
&lt;p&gt;环境:macOS&lt;/p&gt;
&lt;p&gt;shell: zsh&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装步骤：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew update &lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; brew upgrade &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 更新&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install go             &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 安装 go&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;配置环境变量
我的本shell 是zsh 下面是按照zsh配置：
如果需要修改默认的环境变量配置修改 &lt;code&gt;vim ~/.bash_profile&lt;/code&gt; 或 &lt;code&gt;vim ~/.zshrc&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# GOROOT安装的路径&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#19177c&#34;&gt;GOROOT&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;/usr/local/Cellar/go/1.9/libexec
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#GOPATH root bin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#19177c&#34;&gt;GOBIN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#19177c&#34;&gt;$GOROOT&lt;/span&gt;/bin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#19177c&#34;&gt;PATH&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#19177c&#34;&gt;$PATH&lt;/span&gt;:&lt;span style=&#34;color:#19177c&#34;&gt;$GOBIN&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#GOPATH&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#19177c&#34;&gt;GOPATH&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#19177c&#34;&gt;$HOME&lt;/span&gt;/go
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#GOPATH bin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#19177c&#34;&gt;PATH&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#19177c&#34;&gt;$PATH&lt;/span&gt;:&lt;span style=&#34;color:#19177c&#34;&gt;$GOPATH&lt;/span&gt;/bin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;退出保存后，使文件生效 &lt;code&gt;source ~/.zshrc=&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>yarn install phantomjs-prebuilt: Command failed.</title>
      <link>http://localhost:1313/aLong/posts/yarn-install-phantomjs-prebuilt-command-failed/</link>
      <pubDate>Thu, 16 Jan 2020 14:21:26 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/yarn-install-phantomjs-prebuilt-command-failed/</guid>
      <description>&lt;h3 id=&#34;项目yarn-install-出现phantomjs-prebuilt-command-failed&#34;&gt;项目yarn install 出现phantomjs-prebuilt： Command failed.&lt;/h3&gt;
&lt;p&gt;自己在项目中发现执行 &lt;code&gt;yarn install&lt;/code&gt;时候，一直卡住没走完。&lt;/p&gt;
&lt;p&gt;最后报错， &lt;em&gt;error phantomjs-prebuilt： Command failed.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;可以看到错误中，他是从 github.com/Medium/&amp;hellip;   感觉就是没下载成功吧。&lt;/p&gt;
&lt;p&gt;最开始以为网络问题，翻墙等方式都试过后发现还是没完成。&lt;/p&gt;
&lt;p&gt;没办法，借助网络得知。可以轻松搞定：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;npm config set phantomjs_cdnurl=&lt;a href=&#34;http://cdn.npm.taobao.org/dist/phantomjs_cdnurl&#34;&gt;http://cdn.npm.taobao.org/dis&amp;hellip;&lt;/a&gt;
yarn config set &amp;ldquo;phantomjs_cdnurl&amp;rdquo; &amp;ldquo;&lt;a href=&#34;https://npm.taobao.org/mirrors/phantomjs%22&#34;&gt;https://npm.taobao.org/mirrors/phantomjs&amp;quot;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;看你是npm 还是node。按照上面方式设置一下。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rm -rf path/node_moudels&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;yarn install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;解决问题，美滋滋。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://segmentfault.com/q/1010000010278132&#34;&gt;引用地址&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>MySQL5.7修改root密码</title>
      <link>http://localhost:1313/aLong/posts/mysql5-7%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81/</link>
      <pubDate>Wed, 15 Jan 2020 15:23:54 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/mysql5-7%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81/</guid>
      <description>&lt;p&gt;最近维护一个MySQL数据库，由于各种原因，密码已经不知道了。现在让我在这台服务器上使用里面的MySQL数据库。&lt;/p&gt;
&lt;p&gt;怎么办？&lt;/p&gt;
&lt;p&gt;首先问了一圈没有人知道。那么只能靠自己了。&lt;/p&gt;
&lt;p&gt;查看软件版本:  &lt;code&gt;mysql --version&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;之后通过神奇的Google科普了一下。
知道了具体的方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;关闭mysql服务。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改my.conf
在里面[mysqld] 下面最后加入一行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;[mysqld]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;skip-grant-tables&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改完保存退出。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;重启mysql服务。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;mysql&lt;/code&gt; 进入mysql 不需要密码了。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;show databases;&lt;/code&gt;  查看数据库&lt;/p&gt;
&lt;p&gt;&lt;code&gt;use mysql;&lt;/code&gt; 选择 mysql 数据库
在此数据库执行更新语句（修改root用户的密码为root）：
&lt;code&gt;update user set authentication_string=password(&#39;root&#39;) where user=&#39;root&#39;; &lt;/code&gt;
&lt;code&gt;flush privileges;&lt;/code&gt; 更新权限&lt;/p&gt;
&lt;p&gt;退出mysql&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;把最开始my.conf加入的语句删除。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;重启mysql服务&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后可以通过设置的密码登陆数据库了。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Prometheus-SNMP_Exporter Generator</title>
      <link>http://localhost:1313/aLong/posts/prometheus-snmp-exporter-generator/</link>
      <pubDate>Tue, 24 Dec 2019 15:26:33 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/prometheus-snmp-exporter-generator/</guid>
      <description>&lt;h2 id=&#34;prometheus-snmp-exporter&#34;&gt;Prometheus-SNMP Exporter&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;生成器从generator.yml读取并写入snmp.yml。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;之前在说&lt;a href=&#34;https://blog.51ai.vip/2019/08/29/Prometheus-snmp-export%E9%83%A8%E7%BD%B2/&#34;&gt;Prometheus-snmp_export部署&lt;/a&gt;时,没有具体提到snmp.yml的生成器是怎么生成的.几乎用的都是github上的&lt;a href=&#34;https://github.com/prometheus/snmp_exporter/blob/master/snmp.yml&#34;&gt;snmp.yml&lt;/a&gt;文件(只在demo中添加了auth配置).&lt;/p&gt;
&lt;p&gt;因为刚好所有通用的指标都取得通用的mib树. 在后期我搜集设备的信息需要一些私有mib的数据,这时候需要自己通过生成器来生成snmp.yml.&lt;/p&gt;
&lt;h2 id=&#34;generator-的操作步骤&#34;&gt;Generator 的操作步骤&lt;/h2&gt;
&lt;h3 id=&#34;下载需要的程序docker方式跳过此步骤&#34;&gt;下载需要的程序(Docker方式跳过此步骤)&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Debian-based distributions.
sudo apt-get install unzip build-essential libsnmp-dev # Debian-based distros
# Redhat-based distributions.
sudo yum install gcc gcc-g++ make net-snmp net-snmp-utils net-snmp-libs net-snmp-devel # RHEL-based distros

go get github.com/prometheus/snmp_exporter/generator
cd ${GOPATH-$HOME/go}/src/github.com/prometheus/snmp_exporter/generator
go build
make mibs(不建议直接make)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里直接make mibs 可能会失败,在make文件里设置的源有些已经不能访问了或执行出现错误.&lt;/p&gt;
&lt;p&gt;我建议先下载好mibs ,我已经上传&lt;a href=&#34;https://github.com/chenweil/mibs&#34;&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;建议自行搜集mib 不执行make mibs会方便一些&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;把所有的mib放入mibs 目录下.&lt;/p&gt;
&lt;p&gt;需要准备好所有需要涉及到的mib文件. 除了公有的mib,我们还需要监控目标设备的私有mib.思科/华为之类的会提供这些mib,像锐捷这种需要和商务部联系.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;一些mib:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/netdisco/netdisco-mibs&#34;&gt;https://github.com/netdisco/netdisco-mibs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/pgmillon/observium/tree/master/mibs&#34;&gt;https://github.com/pgmillon/observium/tree/master/mibs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/librenms/librenms/tree/master/mibs&#34;&gt;https://github.com/librenms/librenms/tree/master/mibs&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;当我们准备好所有的mib后需要编写一个generatoryml&#34;&gt;当我们准备好所有的mib后,需要编写一个generator.yml.&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;下面是一个翻译的官方文档(翻译比较烂,自行查阅[原文]([https://github.com/prometheus/snmp\_exporter/tree/master/generator](https://github.com/prometheus/snmp\_exporter/tree/master/generator))):&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;modules&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;module_name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 模块名称。您可以根据需要拥有任意数量的模块。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;walk&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;       &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 要walk的OID列表。 也可以是SNMP对象名称或特定实例。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;- &lt;span style=&#34;color:#666&#34;&gt;1.3.6.1.2.1.2&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 与“接口”相同。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;- sysUpTime                 &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 与“ 1.3.6.1.2.1.1.3”相同。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;- &lt;span style=&#34;color:#666&#34;&gt;1.3.6.1.2.1.31.1.1.1.6.40&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 索引为“ 40”的“ ifHCInOctets”的实例。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;version&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 要使用的SNMP版本。 默认2。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 1将使用GETNEXT，2和3将使用GETBULK。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;max_repetitions&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;25&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 使用GET / GETBULK请求多少个对象，默认为25。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                         &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 对于有故障的设备，可能需要减少。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;retries&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 重试失败请求的次数，默认为3。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;timeout&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;10s&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 每次步行的超时时间，默认为10秒。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;auth&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 社区字符串与SNMP v1和v2一起使用。 默认为“ public”。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;community&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;public&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# v3具有不同且更复杂的设置。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 需要哪些取决于security_level。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 还列出了NetSNMP命令上的等效选项，例如snmpbulkwalk和snmpget。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 请参见snmpcmd（1）。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;username&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;user &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 必需，无默认值。 NetSNMP的-u选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;security_level&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;noAuthNoPriv &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 默认为noAuthNoPriv。 NetSNMP的-l选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                                    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 可以是noAuthNoPriv，authNoPriv或authPriv。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;password&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;pass &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 没有默认值。 也称为authKey，NetSNMP的-A选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 如果security_level是authNoPriv或authPriv，则为必需。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;auth_protocol&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;MD5 &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# MD5或SHA，默认为MD5。 -NetSNMP的选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                          &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 如果security_level为authNoPriv或authPriv，则使用此属性。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;priv_protocol&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;DES &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# DES或AES，默认为DES。 NetSNMP的-x选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                          &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 如果security_level为authPriv，则使用。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;priv_password&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;otherPass&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 没有默认值。 也称为privKey，NetSNMP的-X选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                               &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 如果security_level是authPriv，则为必需。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;context_name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;context&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 没有默认值。 NetSNMP的-n选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                            &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 如果在设备上配置了上下文，则为必需。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;lookups&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 要执行的查找的可选列表。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# “keep_source_indexes”的默认值为false。 &lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 索引必须唯一，才能使用此选项。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 如果表的索引是bsnDot11EssIndex，则通常是该表结果度量的标签。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 相反,使用索引查找bsnDot11EssSsid表条目，并使用该值创建一个bsnDot11EssSsid标签。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_indexes&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[bsnDot11EssIndex]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;lookup&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;bsnDot11EssSsid&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;drop_source_indexes&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 如果为true，则删除此查找的源索引标签。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                                    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 当新索引唯一时，这可以避免标签混乱。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;     &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;overrides&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 允许每个模块覆盖MIB的位&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;       &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;metricName&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;         &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;ignore&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 从输出中删除度量。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;         &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex_extracts&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;           &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;Temp&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 将创建一个新的度量，并将其附加到metricName上，成为metricNameTemp。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;             &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;(.*)&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 正则表达式从返回的SNMP walk的值中提取一个值。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;               &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;value&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;$1&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 结果将解析为float64，默认为$1。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;           &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;Status&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;             &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;.*Example&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;               &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;value&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;             &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;.*&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;               &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;value&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;         &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;type&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;DisplayString&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 覆盖度量标准类型，可能的类型有：&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   gauge:   带gauge的整数。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   counter: 带类型计数器的整数。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   OctetString: 一个位字符串，呈现为0xff34。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   DateAndTime: RFC 2579日期和时间字节序列。如果设备没有时区数据，则使用UTC。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   DisplayString: ASCII或UTF-8字符串。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   PhysAddress48: 一个48位的MAC地址，呈现为00:01:02:03:04:ff。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   Float: 一个32位浮点值，带有类型gauge。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   Double: 一个64位浮点值，带有类型gauge。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   InetAddressIPv4: IPv4地址，呈现为1.2.3.4。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   InetAddressIPv6: IPv6地址，呈现为0102:0304:0506:0708:090A:0B0C:0D0E:0F10。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   InetAddress: 每个RFC 4001有一个InetAddress。必须以InetAddressType开头。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   InetAddressMissingSize: 因索引中没有大小而违反RFC 4001第4.1节的InetAddress。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#                           必须以InetAddressType开头。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   EnumAsInfo: 为其创建单个时间序列的枚举。适用于恒定值。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   EnumAsStateSet: 每个状态具有时间序列的枚举。适用于可变低基数枚举。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#   Bits: 一种RFC2578位结构，它产生一个具有每位时间序列的状态集。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;下面提供一个自己编写的generator.yml&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Prometheus告警模板详解</title>
      <link>http://localhost:1313/aLong/posts/prometheus%E5%91%8A%E8%AD%A6%E6%A8%A1%E6%9D%BF%E8%AF%A6%E8%A7%A3/</link>
      <pubDate>Wed, 04 Dec 2019 11:51:43 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/prometheus%E5%91%8A%E8%AD%A6%E6%A8%A1%E6%9D%BF%E8%AF%A6%E8%A7%A3/</guid>
      <description>&lt;h2 id=&#34;目的&#34;&gt;目的&lt;/h2&gt;
&lt;p&gt;之前配置告警之后,可以发送告警信息.但对于数据具体的结构信息,在模板中数据读取都比较懵.原因是不太清除警报都提供了哪些数据,除了我们设置的信息,还有没有其他的信息.&lt;/p&gt;
&lt;h3 id=&#34;告警数据结构&#34;&gt;告警数据结构&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://prometheus.io/docs/alerting/notifications/#alert&#34;&gt;官方docs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;推送数据结构:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;alerts数据&#34;&gt;Alerts数据&lt;/h3&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;kv数据的处理方式&#34;&gt;KV数据的处理方式&lt;/h3&gt;
&lt;p&gt;KV结构很简单,键值对.通过键获取对应的值.下面提供了一些方法处理这种结构的一些方法.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;字符串相关方法&#34;&gt;字符串相关方法&lt;/h3&gt;
&lt;p&gt;警报提供的数据是通过GO模板解析的,GO模板的功能通过&lt;a href=&#34;https://golang.org/pkg/text/template/#hdr-Functions&#34;&gt;GO模板文档&lt;/a&gt;可以了解.&lt;/p&gt;
&lt;p&gt;下面提供了一些处理字符串的方法:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2019/12/05/kngppe.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;微信通知的demo&#34;&gt;微信通知的DEMO&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2019/12/05/kngxOt.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上图中是微信接受的通知,下面展示通知模板的代码.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-tmpl&#34; data-lang=&#34;tmpl&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- define &amp;#34;_alert_list&amp;#34; -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- range .Alerts.Firing -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;-----------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警类型：{{ .Labels.alertname }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警主题: {{ .Annotations.summary }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警详情: {{ .Annotations.description }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;触发时间: {{ (.StartsAt.Add 28800e9).Format &amp;#34;2006-01-02 15:04:05&amp;#34; }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ end -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---------结束-----------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- end -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- define &amp;#34;_resolve_list&amp;#34; -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- range .Alerts.Resolved -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;**************************
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警类型：{{ .Labels.alertname }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警主题: {{ .Annotations.summary }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警详情: {{ .Annotations.description }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;触发时间: {{ (.StartsAt.Add 28800e9).Format &amp;#34;2006-01-02 15:04:05&amp;#34; }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;恢复时间: {{ (.EndsAt.Add 28800e9).Format &amp;#34;2006-01-02 15:04:05&amp;#34; }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ end -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;************结束*****************
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- end -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- define &amp;#34;wechat.message&amp;#34; -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- if and (gt (len .Alerts.Firing) 0) (gt (len .Alerts.Resolved) 0) -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警数量:{{.Alerts.Firing | len}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警设备:{{ .GroupLabels.server}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ template &amp;#34;_alert_list&amp;#34; . }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;====================================
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警恢复:{{len .Alerts.Resolved}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警设备:{{ .GroupLabels.server}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ template &amp;#34;_resolve_list&amp;#34; . }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- else -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  {{- if gt (len .Alerts.Firing) 0 -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警数量:{{.Alerts.Firing | len}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警设备:{{ .GroupLabels.server}}  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ template &amp;#34;_alert_list&amp;#34; . }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  {{- end -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  {{- if gt (len .Alerts.Resolved) 0 -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警恢复:{{len .Alerts.Resolved}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;告警设备:{{ .GroupLabels.server}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ template &amp;#34;_resolve_list&amp;#34; . }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  {{- end -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- end -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{- end -}}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;其中告警设备 server 这个标签是自定义的.如果没有可以删除此行或根据自己标签定义.&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Prometheus标签处理&amp;服务发现</title>
      <link>http://localhost:1313/aLong/posts/prometheus%E6%A0%87%E7%AD%BE%E5%A4%84%E7%90%86-%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/</link>
      <pubDate>Tue, 03 Dec 2019 15:14:16 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/prometheus%E6%A0%87%E7%AD%BE%E5%A4%84%E7%90%86-%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/</guid>
      <description>&lt;h3 id=&#34;标签处理的重要性&#34;&gt;标签处理的重要性&lt;/h3&gt;
&lt;p&gt;之前的[配置](&lt;a href=&#34;https://blog.51ai.vip/2019/10/09/prometueus-yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E/&#34;&gt;https://blog.51ai.vip/2019/10/09/prometueus-yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E/&lt;/a&gt;中提到了标签的处理,不过由于写的是静态的配置,标签可以自己设置或者不设置都可以.&lt;/p&gt;
&lt;p&gt;当使用服务发现之后发现标签处理的重要性提升了更高的级别.&lt;/p&gt;
&lt;h3 id=&#34;标签处理&#34;&gt;标签处理&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;job_name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;node&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;targets&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;172.16.23.110:9100&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;172.16.23.111:9100&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;metric_relable_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#通过正则重命名标签&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;action&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;replace &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#replace替换是默认动作。keep（只参加匹配标签的实例）、drop（不采集匹配正则的实例）、labelkeep\labeldrop(对标签进行过滤处理而非实例)等动作&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;job&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#原标签，job是默认就会产生的标签，这里job标签的值是node&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;(.*) &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#正则匹配，这里匹配job标签内的内容，也就是node&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;replacement&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;beijing &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#替换成什么内容，如果写$1就是将正则里读取的值&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;idc &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#把替换内容赋值给idc标签&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;action&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;labeldrop &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#删除标签&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;job &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#把原job标签删除&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;job_name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;prometheus&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;targets&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;localhost:9090&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;location&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;bj3&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;relabel_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;action&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;replace&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;job&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;(.*)&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;replacement&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;$1&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;server&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;以上两个例子都是替换标签,job:node中,删除了前job标签,下面的job新增了&amp;rsquo;server&amp;rsquo;标签内容取的job内容,但没删除job标签.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>M3DB笔记</title>
      <link>http://localhost:1313/aLong/posts/m3db%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Fri, 29 Nov 2019 17:41:43 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/m3db%E7%AC%94%E8%AE%B0/</guid>
      <description>&lt;h2 id=&#34;m3db笔记&#34;&gt;M3DB笔记&lt;/h2&gt;
&lt;p&gt;前阵子研究prometheus,初期没有考虑存储问题.本地默认存储30天数据.&lt;/p&gt;
&lt;p&gt;监控已经折腾完毕,现在需要来处理存储的方案.&lt;/p&gt;
&lt;p&gt;通过互联网的科普,发现目前有两个方案可以解决这个问题.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;thanos&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;M3DB&lt;/p&gt;
&lt;p&gt;thanos是需要存储云端数据(本地存储官方不推荐).不符合我们的考虑范围内.那就来学习M3DB了.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;简介&#34;&gt;简介&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;M3可以在较长的保留时间内可靠地存储大规模指标。为了向更广泛的社区中的其他人提供这些好处，我们决定开放M3平台作为Prometheus的远程存储后端，Prometheus是一种流行的监控和警报解决方案。正如其文档所述，Prometheus的可扩展性和耐用性受到单个节点的限制。 M3平台旨在为Prometheus指标提供安全，可扩展且可配置的多租户的存储。&lt;/p&gt;
&lt;p&gt;M3于2015年发布，目前拥有超过66亿个时间序列。 M3每秒聚合5亿个指标，并在全球范围内（使用M3DB）每秒持续存储2000万个度量指标，批量写入将每个指标持久保存到区域中的三个副本。它还允许工程师编写度量策略，告诉M3以更短或更长的保留时间（两天，一个月，六个月，一年，三年，五年等）以特定的粒度（一秒，十秒，一分钟，十分钟等）。这允许工程师和数据科学家使用与定义的存储策略匹配的度量标签（标签），在精细和粗粒度范围内智能地存储不同保留的时间序列。例如，工程师可以选择存储“应用程序”标记为“mobile_api”且“端点”标记为“注册”的所有度量标准，这些标记在10秒粒度下为30天，在一小时粒度下为5年。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;相关组件&#34;&gt;相关组件&lt;/h3&gt;
&lt;blockquote&gt;
&lt;h4 id=&#34;m3-coordinator&#34;&gt;M3 Coordinator&lt;/h4&gt;
&lt;p&gt;M3 Coordinator是一种服务，用于协调上游系统（如Prometheus和M3DB）之间的读写操作。它还提供了管理API，用于设置和配置M3的不同部分。它是用户可以部署以访问M3DB的优势的桥梁，例如长期存储和与其他监控系统（如Prometheus）的多DC设置。&lt;/p&gt;
&lt;h4 id=&#34;m3db&#34;&gt;M3DB&lt;/h4&gt;
&lt;p&gt;M3DB是一个分布式时间序列数据库，提供可扩展存储和时间序列的反向索引。它经过优化，具有成本效益和可靠的实时和长期保留指标存储和索引&lt;/p&gt;
&lt;h4 id=&#34;m3-query&#34;&gt;M3 Query&lt;/h4&gt;
&lt;p&gt;M3 Query是一种服务，它包含一个分布式查询引擎，用于查询实时和历史指标，支持多种不同的查询语言。它旨在支持低延迟实时查询和可能需要更长时间执行的查询，聚合更大的数据集，用于分析用例&lt;/p&gt;
&lt;h4 id=&#34;m3-aggregator&#34;&gt;M3 Aggregator&lt;/h4&gt;
&lt;p&gt;M3 Aggregator是一种作为专用度量聚合器运行的服务，它基于存储在etcd中的动态规则提供基于流的下采样。它使用领导者选举和聚合窗口跟踪，利用etcd来管理此状态，从而可靠地为低采样度量标准发送至少一次聚合到长期存储。这提供了成本有效且可靠的下采样和汇总指标。这些功能也存在于M3协调器中，但专用聚合器是分片和复制的，而M3协调器则不需要并且需要谨慎部署和以高可用性方式运行。还有一些工作要使用户更容易访问聚合器，而无需他们编写自己的兼容生产者和消费者。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;入门&#34;&gt;入门&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2019/11/29/kIj7yu.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上面的组件通俗讲:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;prometheus&lt;/em&gt; 需要通过&lt;em&gt;M3 Coordinator&lt;/em&gt;来协调存储与查询到M3DB,&lt;em&gt;prometheus&lt;/em&gt;本地存储数据时间与这个没关系.&lt;/p&gt;
&lt;p&gt;上面没有提到一个名字etcd服务.此服务推断拓扑\配置功能. 如果db嵌入此服务就称为种子节点SeedNode.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;官方提供了一个镜象,里面包含 M3 Coordinator + SeedNode.&lt;/p&gt;
&lt;p&gt;拉取镜象:&lt;code&gt;docker pull quay.io/m3db/m3dbnode:latest&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;启动名为m3db容器:&lt;code&gt;docker run -d -p 7201:7201 -p 7203:7203 -p 9003:9003 --name m3db -v $(pwd)/m3db_data:/var/lib/m3db quay.io/m3db/m3dbnode:latest&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;该容器的端口为7201（用于管理集群拓扑），端口为7203，Prometheus用来刮除M3DB和M3Coordinator生成的度量，端口9003（用于读取和写入度量）已公开。&lt;/p&gt;
&lt;p&gt;这时候m3db已经启动,需要创建一个初始命名空间.官方镜象默认是type:local,namespace:default. 这个可以进入容器查看到配置位置&lt;code&gt;/etc/d3dbnode/m3dbnode.yml&lt;/code&gt;.如果我们创建其他命名空间需要在m3coordinator中配置好.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;curl -X POST http://localhost:7201/api/v1/database/create -d &#39;{ &amp;quot;type&amp;quot;: &amp;quot;local&amp;quot;, &amp;quot;namespaceName&amp;quot;: &amp;quot;default&amp;quot;, &amp;quot;retentionTime&amp;quot;: &amp;quot;24h&amp;quot; }&#39;&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>网络传输速度测试工具</title>
      <link>http://localhost:1313/aLong/posts/%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E9%80%9F%E5%BA%A6%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/</link>
      <pubDate>Wed, 23 Oct 2019 17:31:55 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E9%80%9F%E5%BA%A6%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/</guid>
      <description>&lt;h2 id=&#34;网络传输测试软件&#34;&gt;网络传输测试软件&lt;/h2&gt;
&lt;p&gt;最近公司测试限速,搜集软件发现两款,iperf,LANSpeedTest.
iperf,多平台.
LANSpeedTest,读写显示,操作简单.
&lt;strong&gt;局域网测试传输,优先考虑UDP.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;iperf&#34;&gt;iperf&lt;/h3&gt;
&lt;p&gt;Iperf可以报告带宽,延迟抖动和数据包丢失.
&lt;a href=&#34;https://iperf.fr/iperf-doc.php&#34;&gt;官方文档&lt;/a&gt;
安装不写了.跳过&lt;/p&gt;
&lt;p&gt;iperf常用参数介绍&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-i 2	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#表示每2秒显示一次报告&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-w 80k	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#对于TCP方式，此设置为TCP窗口大小。对于UDP方式，此设置为接受UDP数据包的缓冲区大小，限制可以接受数据包的最大值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-B 192.168.122.1	
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#绑定到主机的多个地址中的一个。对于客户端来说，这个参数设置了出栈接口。对于服务器端来说，这个参数设置入栈接口。这个参数只用于具有多网络接口的主机。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#在Iperf的UDP模式下，此参数用于绑 定和加入一个多播组。使用范围在224.0.0.0至239.255.255.255的多播地址&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#常用客户端参数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-b 100m	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#用于udp测试时，设置测试发送的带宽，单位：bit/秒，不设置时默认为：1Mbit/秒&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-c 	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#指定服务端ip地址&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-d 	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#同时测试上行和下行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-t 10	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#设置传输时间，为10秒	&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	-P 5	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#指定发起5个线程&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;udp测试&#34;&gt;UDP测试&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;服务端
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -u -s 		&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# -u表示以udp模式运行，-s表示作为服务端, 这里需要设置ip&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;客户端
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -u -c 192.168.100.11 -b 100M -t &lt;span style=&#34;color:#666&#34;&gt;60&lt;/span&gt; -i &lt;span style=&#34;color:#666&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#解释：在udp模式下，以100Mbps为数据发送速率，客户端到服务器192.168.100.11上传带宽测试，测试时间为60秒&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -u -c 192.168.100.11 5M -P &lt;span style=&#34;color:#666&#34;&gt;30&lt;/span&gt; -t 6		&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#客户端同时向服务器端发起30个连接线程，以5Mbps为数据发送速率&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -u -c 192.168.100.11 -b 100M -d -t &lt;span style=&#34;color:#666&#34;&gt;60&lt;/span&gt; 	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#以100M为数据发送速率，进行上下行带宽测试&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;tcp测试&#34;&gt;TCP测试&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;服务端
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;客户端
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -c 192.168.100.11 -t 60			&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#在tcp模式下，客户端到服务器192.168.100.11上传带宽测试，测试时间为60秒。 &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -c 192.168.100.11 -P &lt;span style=&#34;color:#666&#34;&gt;30&lt;/span&gt; -t 60		&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#客户端同时向服务器端发起30个连接线程。 &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	iperf -c 192.168.100.11 -d -t &lt;span style=&#34;color:#666&#34;&gt;60&lt;/span&gt; -i 2	&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;#进行上下行带宽测试。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;测试结果&#34;&gt;测试结果&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.ax1x.com/2019/10/24/KNIyt0.png&#34; alt=&#34;&#34;  /&gt;

结果中可以看到:
30秒(-t)的测试,传递数据 70+ (-b参数), 监测的带宽约为20M .&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Prometheus-AlertManager警告管理搭建与配置</title>
      <link>http://localhost:1313/aLong/posts/prometheus-alertmanager%E8%AD%A6%E5%91%8A%E7%AE%A1%E7%90%86%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Sat, 19 Oct 2019 09:40:15 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/prometheus-alertmanager%E8%AD%A6%E5%91%8A%E7%AE%A1%E7%90%86%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%85%8D%E7%BD%AE/</guid>
      <description>&lt;h2 id=&#34;alertmanager&#34;&gt;AlertManager&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;AlertManager处理由客户端应用程序（如Prometheus服务器）发送的警报。
它负责重复数据消除、分组，并将它们路由到正确的接收器集成（如电子邮件、PagerDuty或OpsGenie）。
它还负责消除和抑制警报。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;通过翻译官方文档可以了解到,AlertManager是负责为Prometheus(本身不会发送警报)发送警报的工具.
AlertManager不是简单发送警报,可以消除重复警报,分组,抑制警报功能.并支持多接收器.&lt;/p&gt;
&lt;p&gt;Prometheus-&amp;gt;触发定义的警报规则-&amp;gt;AlertManager-&amp;gt;发送警报到指定通知渠道.&lt;/p&gt;
&lt;p&gt;为了能让Prometheus发送警报,我们需要:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;搭建AlertManager服务.&lt;/li&gt;
&lt;li&gt;定义AlertManager通知配置.&lt;/li&gt;
&lt;li&gt;定义Prometheus警报规则并引入.&lt;/li&gt;
&lt;li&gt;测试警报.&lt;/li&gt;
&lt;li&gt;定义通知模板.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;定义alertmanager通知配置&#34;&gt;定义AlertManager通知配置&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;global&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;smtp_smarthost&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;smtp.163.com:25&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;               &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 邮箱smtp服务器代理&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;smtp_from&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;shitu-0071@163.com&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                 &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 发送邮箱名称&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;resolve_timeout&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;5m                            &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 处理超时时间，默认为5min&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;smtp_auth_username&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;shitu-0071@163.com&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 邮箱帐户&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;smtp_auth_password&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;******&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 邮箱授权码(注意是授权码,不知道自己查一下)&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;wechat_api_url&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;https://qyapi.weixin.qq.com/cgi-bin/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 企业微信地址&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 定义模板信心&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;templates&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;template/*.tmpl&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 定义路由树信息&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;route&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;group_by&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;alertname&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;cluster&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;service&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#bbb&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 报警分组依据,设置后会按照设定值分组,例如instance,alertname等&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                                                       &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 同标签警告会在作为一组警报发送&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;group_wait&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;10s                                     &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 组内等待时间,触发阈值后,XXs后发送本组警报&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;group_interval&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;10s                                 &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 每个组之前间隔时间(group_by设定的值划分的组)&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;repeat_interval&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;1m                                 &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 重复发送警报的周期&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;(对于email配置中，此项不可以设置过低，否则将会由于邮件发送太多频繁，被smtp服务器拒绝)&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;receiver&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                                    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 发送警报的接收者的名称&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                                                       &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 以下receivers name的名称&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;routes&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;match&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 普通匹配&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;serverity&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;critical      &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 警告级别critical&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;receiver&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;email            &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 通过邮件发送&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;match_re&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                   &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 正则匹配&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;severity&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;^(warning)$    &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 匹配警告级别为warning的&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;receiver&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;wechat           &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 通过微信发送告警&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;receiver&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;along            &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 定义接收者&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;match&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 匹配&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;severity&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;test           &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 等级为test&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 定义警报接收者信息&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;receivers&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;               &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 警报&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;email_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 邮箱配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;to&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;******@163.com&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 接收警报的email配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;html&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;{{ template &amp;#34;test.html&amp;#34; . }}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 设定邮箱的内容模板&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;headers&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;Subject&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;[WARN] 报警邮件&amp;#34;&lt;/span&gt;}&lt;span style=&#34;color:#bbb&#34;&gt;     &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 接收邮件的标题&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;webhook_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# webhook配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;url&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;http://127.0.0.1:5001&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;send_resolved&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;wechat&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;wechat_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 企业微信报警配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;send_resolved&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;to_party&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 接收组的id&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;agent_id&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;1000002&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# (企业微信--&amp;gt;自定应用--&amp;gt;AgentId)&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;corp_id&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;******&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 企业信息(我的企业--&amp;gt;CorpId[在底部])&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;api_secret&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;******&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 企业微信(企业微信--&amp;gt;自定应用--&amp;gt;Secret)&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;message&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;{{ template &amp;#34;test_wechat.html&amp;#34; . }}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 发送消息模板的设定&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 一个inhibition规则是在与另一组匹配器匹配的警报存在的条件下，&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 使匹配一组匹配器的警报失效的规则。两个警报必须具有一组相同的标签。 &lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;inhibit_rules&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_match&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;     &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;severity&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;critical&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_match&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;     &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;severity&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;critical&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;equal&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;instance&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 已经发送的告警通知匹配到target_match和target_match_re规则，&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 再有新的告警规则如果满足source_match&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 或者定义的匹配规则，并且已发送的告警与新产生的告警中equal定义的标签完全相同，&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 则启动抑制机制，新的告警不会发送。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;以下是官方文档配置翻译的文档.供参考具体详细的配置介绍.不细看先略过到下个步骤.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>windows10家庭版启用组策略gpedit.msc</title>
      <link>http://localhost:1313/aLong/posts/windows10%E5%AE%B6%E5%BA%AD%E7%89%88%E5%90%AF%E7%94%A8%E7%BB%84%E7%AD%96%E7%95%A5gpedit-msc/</link>
      <pubDate>Tue, 15 Oct 2019 11:35:11 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/windows10%E5%AE%B6%E5%BA%AD%E7%89%88%E5%90%AF%E7%94%A8%E7%BB%84%E7%AD%96%E7%95%A5gpedit-msc/</guid>
      <description>&lt;h2 id=&#34;启用组策略gpeditmsc&#34;&gt;启用组策略gpedit.msc&lt;/h2&gt;
&lt;p&gt;家庭版很多功能不能使用,凑巧用的就是家庭版. 还想使用gpedit.msc来关闭windows10的更新.
找到一个可行的方法.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;需要创建一个脚本. 如果你没有编辑器,那么可以创建一个文本文档.&lt;/li&gt;
&lt;li&gt;复制下面一段到本文中.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;@echo off
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000&#34;&gt;pushd&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;%~dp0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;dir /b C:&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\W&lt;/span&gt;indows&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\s&lt;/span&gt;ervicing&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\P&lt;/span&gt;ackages&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\M&lt;/span&gt;icrosoft-Windows-GroupPolicy-ClientExtensions-Package~3*.mum &amp;gt;List.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;dir /b C:&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\W&lt;/span&gt;indows&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\s&lt;/span&gt;ervicing&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\P&lt;/span&gt;ackages&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\M&lt;/span&gt;icrosoft-Windows-GroupPolicy-ClientTools-Package~3*.mum &amp;gt;&amp;gt;List.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; /f %%i in &lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;findstr /i . List.txt 2^&amp;gt;nul&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;do&lt;/span&gt; dism /online /norestart /add-package:&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;C:\Windows\servicing\Packages\%%i&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pause
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;如果编辑器直接复制一个文档另存到XX.cmd 即可. 如果是文本文档那么就是把后缀的.txt改成.cmd.&lt;/li&gt;
&lt;li&gt;管理员身份运行这个脚本.等他走完会退出,win+r 即可使用gpedit.msc了. 美滋滋!~&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;禁用windows10更新&#34;&gt;禁用windows10更新&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;win+r 输入gpedit.msc.&lt;/li&gt;
&lt;li&gt;“本地计算机策略”-“计算机配置”-“管理模板”-“Windows组件”-“Windows 更新”-“配置自动更新”. 点击配置自动更新设置为&lt;em&gt;禁用&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Prometueus.yml配置文件说明</title>
      <link>http://localhost:1313/aLong/posts/prometueus-yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Wed, 09 Oct 2019 15:20:58 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/prometueus-yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E/</guid>
      <description>&lt;h2 id=&#34;整体配置&#34;&gt;整体配置&lt;/h2&gt;
&lt;p&gt;prometueus.yml 配置文件注解与说明&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;global&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                       &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 全局配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_interval&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;15s       &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 默认值为 1m，用于设置每次数据收集的间隔&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_timeout&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;10s        &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 默认10s,收集超时时间&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;evaluation_interval&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;15s   &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 记录规则/告警的执行周期 默认1m&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;external_labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;            &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 时间序列和警告与外部通信(远程存储/警报灯)时用的外部标签&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;monitor&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;ctmonitor&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;rule_files&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                   &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 指定告警规则文件&amp;amp;记录文件&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;/usr/local/prometheus/rules.yml&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;alerting&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                     &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 告警管理配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;alert_relable_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 修改告警内容&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;alertmanagers&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 告警管理起配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;           &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 静态配置&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;targets&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 警告器地址&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;- &lt;span style=&#34;color:#666&#34;&gt;172.16.23.12&lt;/span&gt;:&lt;span style=&#34;color:#666&#34;&gt;9093&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 用于配置 scrape 的 endpoint  配置需要 scrape 的 targets 以及相应的参数&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 抓取(pull)，即监控目标配置。默认只有主机本身的监控配置 &lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;               &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 抓取配置选项&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;job_name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;prometheus       &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 默认情况下分配给刮削度量的作业名称。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_interval&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;5s        &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 从这项工作中获取目标的频率。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_timeout&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;3s         &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 每次获取超时时间&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;honor_timestamps&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 默认false, 在获取时是否使用当前的时间戳&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;metrics_path&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;/metrics     &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 从目标获取度量的http资源路径。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scheme&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;http               &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;             &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 为此作业标记的静态配置目标的列表。&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;targets&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 目监控标&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#666&#34;&gt;172.16.23.12&lt;/span&gt;:&lt;span style=&#34;color:#666&#34;&gt;9090&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;       &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 设备地址+端口&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;job_name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;snmp-10.0.0.1&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_interval&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;30s&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_timeout&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;20s&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;targets&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;- &lt;span style=&#34;color:#666&#34;&gt;10.0.0.1&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;                  &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# SNMP设备,端口默认5060&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;metrics_path&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;/snmp&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;params&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;module&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[if_mib]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;relabel_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;                &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 重定义标签&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[__address__] &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 需要修改的标签&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;__param_target &lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 改成的标签&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[__param_target]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;instance&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;__address__&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;replacement&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;172.16.23.12&lt;/span&gt;:&lt;span style=&#34;color:#666&#34;&gt;9117&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;各部分详解&#34;&gt;各部分详解&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;部分官方文档的译文&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>curl: (3) Illegal characters found in URL</title>
      <link>http://localhost:1313/aLong/posts/curl-3-illegal-characters-found-in-url/</link>
      <pubDate>Wed, 09 Oct 2019 14:45:13 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/curl-3-illegal-characters-found-in-url/</guid>
      <description>&lt;h3 id=&#34;curl-3-illegal-characters-found-in-url&#34;&gt;curl: (3) Illegal characters found in URL&lt;/h3&gt;
&lt;p&gt;昨天在服务器上执行一个脚本,在linux新建的sh,把本地编辑器的内容粘贴到文件里.
结果执行的时候报错了. 问题就是 curl:(3)Illegal characters found in URL&lt;/p&gt;
&lt;p&gt;看着一脸懵逼啊!~&lt;/p&gt;
&lt;p&gt;google了一下,看到几个方法.其中一个我感觉还不错:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;首先vi 进入sh脚本 &lt;code&gt;vi XXX.sh&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:set ff?&lt;/code&gt;    # 这里我现实的是 &lt;em&gt;fileforma=dos&lt;/em&gt; 我这里显示是这个&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:set fileformat=unix&lt;/code&gt; # 把fileforma 设置好&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:wq&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;通过这个方式,可以解决这个问题,网上也有人提出其他方法把\r\n 手动替换\n的.&lt;/p&gt;
&lt;p&gt;参考:
&lt;a href=&#34;http://www.itbiancheng.com/linux/4885.html&#34;&gt;http://www.itbiancheng.com/linux/4885.html&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>yaml规则</title>
      <link>http://localhost:1313/aLong/posts/yaml%E8%A7%84%E5%88%99/</link>
      <pubDate>Tue, 24 Sep 2019 10:20:31 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/yaml%E8%A7%84%E5%88%99/</guid>
      <description>&lt;h2 id=&#34;yml-语法&#34;&gt;yml 语法&lt;/h2&gt;
&lt;p&gt;最近经常配置一些服务，发现大部分都是yml类型文件。小记一下。&lt;/p&gt;
&lt;h3 id=&#34;规则&#34;&gt;规则&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;大小写敏感&lt;/li&gt;
&lt;li&gt;缩进表示层级&lt;/li&gt;
&lt;li&gt;注释 #&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;结构&#34;&gt;结构：&lt;/h3&gt;
&lt;p&gt;对象： ：符号&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;admin&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;数组： - 符号&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;user&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;admin&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;height&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;178&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;age&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;30&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;字符串： 默认无引号，内部含有空格或特殊符号需要加&#39;&#39;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;admin&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;desc&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;he was cool&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;null： ~&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;value&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;~&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;层级依靠缩进：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;job&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;jobconfig&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;snmp-sw01&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;- &lt;span style=&#34;color:#666&#34;&gt;192.168.1.88&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>Grafana中文化</title>
      <link>http://localhost:1313/aLong/posts/grafana%E6%B1%89%E5%8C%96/</link>
      <pubDate>Mon, 16 Sep 2019 15:37:46 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/grafana%E6%B1%89%E5%8C%96/</guid>
      <description>&lt;h2 id=&#34;可视化图表&#34;&gt;可视化图表&lt;/h2&gt;
&lt;p&gt;Grafana是一个通用的可视化工具。通过Grafana可以管理用户权限，数据分析，查看，导出，设置告警等。&lt;/p&gt;
&lt;h3 id=&#34;仪表盘dashboard&#34;&gt;仪表盘Dashboard&lt;/h3&gt;
&lt;p&gt;通过数据源定义好可视化的数据来源之后，对于用户而言最重要的事情就是实现数据的可视化。&lt;/p&gt;
&lt;h3 id=&#34;面板-panel&#34;&gt;面板 Panel&lt;/h3&gt;
&lt;p&gt;Panel是Grafana中最基本的可视化单元。每一种类型的面板都提供了相应的查询编辑器(Query Editor)，让用户可以从不同的数据源（如Prometheus）中查询出相应的监控数据，并且以可视化的方式展现。
Grafana中所有的面板均以插件的形式进行使用，当前内置了5种类型的面板，分别是：Graph，Singlestat，Heatmap, Dashlist，Table以及Text。&lt;/p&gt;
&lt;h2 id=&#34;翻译工作&#34;&gt;&lt;strong&gt;翻译工作&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;上面简单介绍了一下工具，主要是让我们方便查看监控的数据。这里我还是没有更深入的去研究公式等图形的设置。这里先主要写一下翻译方面的工作。&lt;/p&gt;
&lt;p&gt;公司也考虑展示内容为中文化比较好，这里Grafana没有提供语言包的方式来处理多语言问题。在我查看代码过程中，发现工具后台是在GO里面写死的很多导航，返回值等数据。前台是在页面上直接写的很多内容。所以我个人认为无法使用语言包来直接处理多语言问题。那就只好自己来搞定了。&lt;/p&gt;
&lt;h3 id=&#34;翻译的内容&#34;&gt;&lt;strong&gt;翻译的内容&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;更具代码查看，主要分为两大部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;后端： go文件，主要内容在/pkg 目录下。&lt;/li&gt;
&lt;li&gt;前端： 1. 系统页面  2. 插件页面  这些在/public 目录下&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;准备工作&#34;&gt;&lt;strong&gt;准备工作&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;首先git clone Grafana库
&lt;code&gt;git clone https://github.com/chenweil/grafana.git&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;之后我们根据自己翻译的版本来检出自己的项目。
这里我们使用的v6.3.4 ，官方版本中可以查看到tag v6.3.4,并重命名自己的分支为6.3.4-chs：
&lt;code&gt;git checkout -b 6.3.4-chs&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;通过 &lt;code&gt;git branch&lt;/code&gt; 命令查看自己处于哪个分支上。
&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2019/09/18/gFRkLM.png&#34; alt=&#34;&#34;  /&gt;

这里如果你不是很熟悉git命令行，可以使用sourcetree工具操作，相对来说点点鼠标就可以搞定了。&lt;/p&gt;
&lt;p&gt;我们在自己创建的分支就可以来处理我们的工作了。&lt;/p&gt;
&lt;h3 id=&#34;前端调试环境&#34;&gt;&lt;strong&gt;前端调试环境&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;需要 npm，nodejs，yarn&lt;/p&gt;
&lt;p&gt;终端执行命令&lt;code&gt; yarn install --pure-lockfile&lt;/code&gt; 初始化. 如果没有报错的情况,证明ok.&lt;/p&gt;
&lt;p&gt;出现错误请先处理问题.
开启调试环境时候，是开启前端的热加载来协助我们调试。
这里安装完三个环境可能在执行 yarn start 时报错，这里如果你是在windows上，需要再安装一下sass.(根据报错来看问题，我这里遇到缺少sass问题)&lt;/p&gt;
&lt;p&gt;当我们yarn start 执行后，等待一段时间，build at 时间证明准备工作已完成，下面就需要我们在调试模式下测试了。&lt;/p&gt;
&lt;p&gt;还需要一个调试的Grafana服务程序，这里是windows环境，所以直接从官方下载了zip包，执行bin下的grafana-server.exe 来启动服务。需要再conf文件夹修改一下public前端资源的配置，如果不修改那么你翻译的信息是看不到的，服务会直接读取的当前的public，我们这需要读取翻译的public文件位置。&lt;/p&gt;
&lt;p&gt;配置在windows服务程序的 /conf/defaults.ini
修改内容：&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Centos7安装nodejs</title>
      <link>http://localhost:1313/aLong/posts/centos7%E5%AE%89%E8%A3%85nodejs/</link>
      <pubDate>Mon, 02 Sep 2019 10:15:01 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/centos7%E5%AE%89%E8%A3%85nodejs/</guid>
      <description>&lt;h2 id=&#34;安装nodejs&#34;&gt;安装nodejs&lt;/h2&gt;
&lt;h3 id=&#34;下载官方node的tar包&#34;&gt;下载官方node的tar包:&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&#34;https://nodejs.org/en/download/&#34;&gt;https://nodejs.org/en/download/&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;wget https://nodejs.org/dist/v10.16.3/node-v10.16.3-linux-x64.tar.xz&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;解压下载文件&#34;&gt;解压下载文件&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;tar -xvf node-v10.16.3-linux-x64.tar.xz&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;部署bin&#34;&gt;部署bin&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;这里下载位置为家里面 ~/&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ln -s ~/node-v10.16.3-linux-x64/bin/node /usr/bin/node&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ln -s ~/node-v10.16.3-linux-x64/bin/npm /usr/bin/npm&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;一个是node 另一个是npm&lt;/p&gt;
&lt;h3 id=&#34;验证&#34;&gt;验证&lt;/h3&gt;
&lt;p&gt;node -v
npm -v&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Prometheus-snmp_export部署</title>
      <link>http://localhost:1313/aLong/posts/prometheus-snmp-export%E9%83%A8%E7%BD%B2/</link>
      <pubDate>Thu, 29 Aug 2019 10:06:01 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/prometheus-snmp-export%E9%83%A8%E7%BD%B2/</guid>
      <description>&lt;h2 id=&#34;snmp&#34;&gt;SNMP&lt;/h2&gt;
&lt;p&gt;SNMP(simple network management protocol)是因特网架构委员会IAB定义的一个应用层协议。SNMP广泛用于管理和监控网络设备，大多数专业的网络设备都有SNMP agent代理，这些代理被激活和配置后用于和SNMP管理 NMS(network management system)网络管理系统通信。&lt;/p&gt;
&lt;h2 id=&#34;目的&#34;&gt;目的&lt;/h2&gt;
&lt;p&gt;通过snmp_export,获取设备信息.&lt;/p&gt;
&lt;h2 id=&#34;准备&#34;&gt;准备&lt;/h2&gt;
&lt;p&gt;系统: centos7,docker19.
之前已经安装好 Prometheus&lt;/p&gt;
&lt;p&gt;此处目标设备是华为交换机 s2700&lt;/p&gt;
&lt;h2 id=&#34;部署snmp_expoer&#34;&gt;部署snmp_expoer&lt;/h2&gt;
&lt;p&gt;snmp.yml 配置文件不是自己定义的,是通过注册生成或下载的.这里我通过github下载配置文件.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/snmp_exporter/blob/master/snmp.yml&#34;&gt;snmp.yml&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;配置snmp_export 配置文件 snmp.yml&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;version&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;auth&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;community&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#bc7a00&#34;&gt;**交换机设置的团体名**&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;查找到if_mib 再此段结尾中加入 上面的配置(大概行数6199).&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2019/08/29/gjuSAc.png&#34; alt=&#34;demo&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;部署snmp_expor&#34;&gt;部署snmp_expor&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker run -d --restart always &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-v /home/along/snmp.yml:/etc/snmp_exporter/snmp.yml &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;&lt;/span&gt;-p 9116:9116 --name snmp-exporter prom/snmp-exporter &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\ &lt;/span&gt;--config.file&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;/etc/snmp_exporter/snmp.yml&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;配置华为s2700交换机&#34;&gt;配置华为s2700交换机&lt;/h3&gt;
&lt;p&gt;自行查阅文档.懒得写了.&lt;/p&gt;
&lt;h3 id=&#34;验证服务&#34;&gt;验证服务&lt;/h3&gt;
&lt;p&gt;访问 http://IP:9116/metrics 能返回数据,snmp_export服务正常.&lt;/p&gt;
&lt;p&gt;测试是否能获取到目标设备的数据:
访问 http://IP:9116/snmp?target=DEVIP
能获取到数据,配置成功.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意防火墙 把需要的端口加入规则中,不然访问不到排查绕弯路&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;配置promthues&#34;&gt;配置promthues&lt;/h3&gt;
&lt;p&gt;修改 promthues.yml文件. 添加一个新的job.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;job_name&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;snmp&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;honor_timestamps&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;params&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;module&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- if_mib&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_interval&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;15s&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scrape_timeout&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;10s&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;metrics_path&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;/snmp&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;scheme&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;http&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;targets&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;- &lt;span style=&#34;color:#666&#34;&gt;172.16.23.253&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;tag&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;huawei-switch-s2700&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;relabel_configs&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[__address__]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;separator&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;(.*)&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;__param_target&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;replacement&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;$1&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;action&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;replace&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;source_labels&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;[__param_target]&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;separator&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;(.*)&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;instance&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;replacement&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;$1&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;action&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;replace&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;- &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;separator&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;regex&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;(.*)&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;target_label&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;__address__&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;replacement&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;172.16.23.12&lt;/span&gt;:&lt;span style=&#34;color:#666&#34;&gt;9116&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;action&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;replace&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;之前部署prometheus 有一个参数是为了热加载配置的.
这里需要reload一下配置,&lt;code&gt;curl -X POST http://IP:9090/-/reload&lt;/code&gt;,如果你没有就重启服务吧.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Prometheus&#43;Grafana安装搭建</title>
      <link>http://localhost:1313/aLong/posts/prometheus-grafana%E5%AE%89%E8%A3%85%E6%90%AD%E5%BB%BA/</link>
      <pubDate>Wed, 28 Aug 2019 16:23:05 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/prometheus-grafana%E5%AE%89%E8%A3%85%E6%90%AD%E5%BB%BA/</guid>
      <description>&lt;h2 id=&#34;介绍&#34;&gt;介绍&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Prometheus是由SoundCloud开发的开源监控报警系统和时序列数据库(TSDB)。Prometheus使用Go语言开发，是Google BorgMon监控系统的开源版本。
2016年由Google发起Linux基金会旗下的原生云基金会(Cloud Native Computing Foundation), 将Prometheus纳入其下第二大开源项目。Prometheus目前在开源社区相当活跃。
Prometheus和Heapster(Heapster是K8S的一个子项目，用于获取集群的性能数据。)相比功能更完善、更全面。Prometheus性能也足够支撑上万台规模的集群。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Prometheus的特点:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;多维度数据模型。&lt;/li&gt;
&lt;li&gt;灵活的查询语言。&lt;/li&gt;
&lt;li&gt;不依赖分布式存储，单个服务器节点是自主的。&lt;/li&gt;
&lt;li&gt;通过基于HTTP的pull方式采集时序数据。&lt;/li&gt;
&lt;li&gt;可以通过中间网关进行时序列数据推送。&lt;/li&gt;
&lt;li&gt;通过服务发现或者静态配置来发现目标服务对象。&lt;/li&gt;
&lt;li&gt;支持多种多样的图表和界面展示，比如Grafana等。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;架构图&#34;&gt;架构图&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://t1.picb.cc/uploads/2019/08/29/gjevPW.png&#34; alt=&#34;结构图&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;prometheus服务大致过程&#34;&gt;Prometheus服务大致过程：&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Prometheus 定时去目标上抓取metrics(指标)数据，每个抓取目标需要暴露一个http服务的接口给它定时抓取。Prometheus支持通过配置文件、文本文件、Zookeeper、Consul、DNS SRV Lookup等方式指定抓取目标。Prometheus采用PULL的方式进行监控，即服务器可以直接通过目标PULL数据或者间接地通过中间网关来Push数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Prometheus在本地存储抓取的所有数据，并通过一定规则进行清理和整理数据，并把得到的结果存储到新的时间序列中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Prometheus通过PromQL和其他API可视化地展示收集的数据。Prometheus支持很多方式的图表可视化，例如Grafana、自带的Promdash以及自身提供的模版引擎等等。Prometheus还提供HTTP API的查询方式，自定义所需要的输出。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PushGateway支持Client主动推送metrics到PushGateway，而Prometheus只是定时去Gateway上抓取数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Alertmanager是独立于Prometheus的一个组件，可以支持Prometheus的查询语句，提供十分灵活的报警方式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Prometheus 支持通过SNMP协议获取mertics数据.通过配置job,利用snmp_export读取设备监控信息.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;指标metric类型&#34;&gt;指标(Metric)类型&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Counter&lt;/strong&gt;   计数器,从数据0开始累计计算. 理想状态会永远增长. 累计计算请求次数等&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gauges&lt;/strong&gt;    瞬时状态的值. 可以任意变化的数值，适用 CPU 使用率 温度等&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Histogram&lt;/strong&gt; 对一段时间范围内数据进行采样，并对所有数值求和与统计数量、柱状图. 某个时间对某个度量值，分组，一段时间http相应大小，请求耗时的时间。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Summary&lt;/strong&gt;  同样产生多个指标，分别带有后缀_bucket(仅histogram)、_sum、_count&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Histogram和Summary都可以获取分位数。
通过Histogram获得分位数，要将直方图指标数据收集prometheus中， 然后用prometheus的查询函数&lt;a href=&#34;https://prometheus.io/docs/prometheus/latest/querying/functions/#histogram_quantile&#34;&gt;histogram_quantile()&lt;/a&gt;计算出来。 Summary则是在应用程序中直接计算出了分位数。
&lt;a href=&#34;https://prometheus.io/docs/practices/histograms/&#34;&gt;Histograms and summaries&lt;/a&gt;中阐述了两者的区别，特别是Summary的的分位数不能被聚合。
注意，这个不能聚合不是说功能上不支持，而是说对分位数做聚合操作通常是没有意义的。
&lt;a href=&#34;https://latencytipoftheday.blogspot.com/2014/06/latencytipoftheday-you-cant-average.html&#34;&gt;LatencyTipOfTheDay: You can’t average percentiles. Period&lt;/a&gt;中对“分位数”不能被相加平均的做了很详细的说明：分位数本身是用来切分数据的，它们的平均数没有同样的分位效果。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;主要我们监控用到最上面两种,下面两种类型目前我没有接触,上面这段文字与介绍引用自&lt;a href=&#34;https://www.lijiaocn.com/%E9%A1%B9%E7%9B%AE/2018/08/03/prometheus-usage.html#metric%E7%B1%BB%E5%9E%8B&#34;&gt;lijiaocn&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;安装prometheus&#34;&gt;安装Prometheus&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;本次搭建利用docker方式.整体搭建完成需要两个容器.暂不配置告警相关,只做监控数据&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;前提&#34;&gt;前提&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;搭建位置: &lt;em&gt;/home/aLong/prometheus/&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;环境:docker19.03.1 需要指定版本请查阅官方文档.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;系统:centos7&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;准备工作&#34;&gt;准备工作&lt;/h3&gt;
&lt;p&gt;Prometheus的配置文件: prometheus.yml
我们建立在搭建位置的根下: &lt;code&gt;touch prometheus.yml&lt;/code&gt;
在配置文件中加入测试演示配置&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Centos5不升级内核更新</title>
      <link>http://localhost:1313/aLong/posts/centos5%E4%B8%8D%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0-2/</link>
      <pubDate>Fri, 23 Aug 2019 17:37:03 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/centos5%E4%B8%8D%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0-2/</guid>
      <description>&lt;h3 id=&#34;前提&#34;&gt;前提&lt;/h3&gt;
&lt;p&gt;公司需要环境Centos5, 又不能升级内核.&lt;/p&gt;
&lt;p&gt;查了一下 大概是 需要 &lt;code&gt;yum –exclude=kernel* update&lt;/code&gt;   或者修改 yum.conf&lt;/p&gt;
&lt;h3 id=&#34;测试一下-出现一个问题&#34;&gt;测试一下 出现一个问题:&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Loaded plugins: fastestmirror, security
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Loading mirror speeds from cached hostfile
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;YumRepo Error: All mirror URLs are not using ftp, http&lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;s&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt; or file.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Eg. Invalid release/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;removing mirrorlist with no valid mirrors: /var/cache/yum/base/mirrorlist.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Error: Cannot find a valid baseurl &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; repo: base
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;根据查询到的信息是,没有正常的源.&lt;/p&gt;
&lt;h3 id=&#34;解决问题-根据网上的源地址-修改一下&#34;&gt;解决问题 根据网上的源地址 修改一下:&lt;/h3&gt;
&lt;p&gt;位置: &lt;em&gt;/etc/yum.repos.d/CentOS-Base.repo&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;修改内容&#34;&gt;修改内容:&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-conf&#34; data-lang=&#34;conf&#34;&gt;[base]
name=CentOS-5.11 - Base
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=os
baseurl=http://vault.centos.org/5.11/os/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#released updates
[updates]
name=CentOS-5.11 - Updates
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=updates
baseurl=http://vault.centos.org/5.11/updates/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#packages used/produced in the build but not released
[addons]
name=CentOS-5.11 - Addons
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=addons
baseurl=http://vault.centos.org/5.11/addons/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#additional packages that may be useful
[extras]
name=CentOS-5.11 - Extras
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=extras
baseurl=http://vault.centos.org/5.11/extras/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-5.11 - Plus
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=centosplus
baseurl=http://vault.centos.org/5.11/centosplus/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#contrib - packages by Centos Users
[contrib]
name=CentOS-5.11 - Contrib
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=contrib
baseurl=http://vault.centos.org/5.11/contrib/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;之后 再使用上面的yum 去更新,发现yum 语句是有问题的.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Centos5不升级内核更新</title>
      <link>http://localhost:1313/aLong/posts/centos5%E4%B8%8D%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0/</link>
      <pubDate>Fri, 23 Aug 2019 17:37:03 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/centos5%E4%B8%8D%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0/</guid>
      <description>&lt;h3 id=&#34;前提&#34;&gt;前提&lt;/h3&gt;
&lt;p&gt;公司需要环境Centos5, 又不能升级内核.&lt;/p&gt;
&lt;p&gt;查了一下 大概是 需要 &lt;code&gt;yum –exclude=kernel* update&lt;/code&gt;   或者修改 yum.conf&lt;/p&gt;
&lt;h3 id=&#34;测试一下-出现一个问题&#34;&gt;测试一下 出现一个问题:&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Loaded plugins: fastestmirror, security
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Loading mirror speeds from cached hostfile
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;YumRepo Error: All mirror URLs are not using ftp, http&lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;s&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt; or file.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Eg. Invalid release/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;removing mirrorlist with no valid mirrors: /var/cache/yum/base/mirrorlist.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Error: Cannot find a valid baseurl &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; repo: base
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;根据查询到的信息是,没有正常的源.&lt;/p&gt;
&lt;h3 id=&#34;解决问题-根据网上的源地址-修改一下&#34;&gt;解决问题 根据网上的源地址 修改一下:&lt;/h3&gt;
&lt;p&gt;位置: &lt;em&gt;/etc/yum.repos.d/CentOS-Base.repo&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;修改内容&#34;&gt;修改内容:&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-conf&#34; data-lang=&#34;conf&#34;&gt;[base]
name=CentOS-5.11 - Base
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=os
baseurl=http://vault.centos.org/5.11/os/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#released updates
[updates]
name=CentOS-5.11 - Updates
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=updates
baseurl=http://vault.centos.org/5.11/updates/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#packages used/produced in the build but not released
[addons]
name=CentOS-5.11 - Addons
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=addons
baseurl=http://vault.centos.org/5.11/addons/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#additional packages that may be useful
[extras]
name=CentOS-5.11 - Extras
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=extras
baseurl=http://vault.centos.org/5.11/extras/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-5.11 - Plus
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=centosplus
baseurl=http://vault.centos.org/5.11/centosplus/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#contrib - packages by Centos Users
[contrib]
name=CentOS-5.11 - Contrib
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=contrib
baseurl=http://vault.centos.org/5.11/contrib/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;之后 再使用上面的yum 去更新,发现yum 语句是有问题的.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Laradock安装与使用</title>
      <link>http://localhost:1313/aLong/posts/laradock%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Thu, 15 Aug 2019 10:01:03 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/laradock%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</guid>
      <description>&lt;h3 id=&#34;laradock-安装与使用&#34;&gt;Laradock 安装与使用&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://laradock.io&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;GitHub: &lt;a href=&#34;https://github.com/laradock/laradock&#34;&gt;https://github.com/laradock/laradock&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;要求&#34;&gt;要求&lt;/h3&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Git&lt;/li&gt;
&lt;li&gt;Docker &amp;gt;= 17.12&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;项目的位置&#34;&gt;项目的位置&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;已有项目情况: &lt;code&gt;git submodule add https://github.com/Laradock/laradock.git&lt;/code&gt; 克隆到项目根目录.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;结构 :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;project-a&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;laradock-a&lt;/li&gt;
&lt;li&gt;project-b
&lt;ul&gt;
&lt;li&gt;laradock-b&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;没有项目情况: &lt;code&gt;git clone https://github.com/laradock/laradock.git&lt;/code&gt; 克隆后,在同级部署项目.&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;laradock&lt;/li&gt;
&lt;li&gt;project-x&lt;/li&gt;
&lt;li&gt;project-y&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;启动环境&#34;&gt;启动环境&lt;/h3&gt;
&lt;p&gt;clone下来还没有生成.&lt;/p&gt;
&lt;p&gt;进入laradock目录,编辑Web服务器站点配置. &lt;code&gt;cp env-exalpme .env&lt;/code&gt;
环境是laradock环境,里面可以对相应的版本,配置进行修改.
例如指定mysql版本为5.7 ,&lt;code&gt;vim .env&lt;/code&gt; ,搜索到mysql部分, 修改&lt;strong&gt;MYSQL_VERSION=5.7.26&lt;/strong&gt; 保存退出.(这里还没生成容器前可以统一配置好需要的环境,再生成容器.)&lt;/p&gt;
&lt;p&gt;例如我们需要启动环境需要 mysql,redis,nginx.&lt;/p&gt;
&lt;p&gt;执行 docker-compose up -d nginx mysql redis&lt;/p&gt;
&lt;p&gt;经过漫长等待后,可以得到我们想要的环境,通过 docker ps 或者 docker-compose ps 查看容器.&lt;/p&gt;
&lt;p&gt;如果先生成容器,在之后编辑环境时,需要停掉容器,修改完 build之后 再start 容器.
例如修改nginx:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;docker-compose stop nginx&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;修改.env 或者 nginx conf&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker-compose build nginx&lt;/code&gt; (完全重建,加参数: &amp;ndash;no-cache)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker-compose start nginx&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;nginx-配置项目&#34;&gt;Nginx 配置项目&lt;/h3&gt;
&lt;p&gt;我们再laradock中,进入nginx/sites/ 下.复制laravel.conf.example 命名为我们的项目.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>SwitchHosts管理编辑hosts工具</title>
      <link>http://localhost:1313/aLong/posts/switchhosts%E7%AE%A1%E7%90%86%E7%BC%96%E8%BE%91hosts%E5%B7%A5%E5%85%B7/</link>
      <pubDate>Wed, 14 Aug 2019 09:41:55 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/switchhosts%E7%AE%A1%E7%90%86%E7%BC%96%E8%BE%91hosts%E5%B7%A5%E5%85%B7/</guid>
      <description>&lt;h2 id=&#34;管理hosts工具-switchhosts&#34;&gt;管理Hosts工具 SwitchHosts&lt;/h2&gt;
&lt;p&gt;地址: &lt;a href=&#34;https://github.com/oldj/SwitchHosts&#34;&gt;SwitchHosts&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;开发工程中,针对不同项目设置不同的域名.&lt;/p&gt;
&lt;p&gt;办法很多,例如直接编辑hosts文件,通过环境工具提供的功能设置等.&lt;/p&gt;
&lt;p&gt;现在要安利一款便捷实用的工具. &lt;a href=&#34;https://github.com/oldj/SwitchHosts&#34;&gt;SwitchHosts&lt;/a&gt;!!&lt;/p&gt;
&lt;p&gt;为什么,首先这工具是多平台支持的,我们可以在不同系统中使用.如果之前是靠编辑hosts文件的话,那不同的hosts位置还需要记忆一下,当然这也算不了什么难事.&lt;/p&gt;
&lt;p&gt;他的有点不在于能简单编辑hosts文件,也有之前的记录,还可以通过url来读取云端的hosts信息.导入导出功能等. 总之又可以偷懒了.&lt;/p&gt;
&lt;p&gt;主界面:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.ax1x.com/2019/08/14/mPOsoT.png&#34; alt=&#34;界面&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我们可以编辑不同host 分组,使用时打开开关按钮即可使用.&lt;br&gt;
示例中使用的My hosts中的配置&lt;/p&gt;
&lt;p&gt;配置界面:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://s2.ax1x.com/2019/08/14/mPOgW4.png&#34; alt=&#34;配置&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;支持中文,主题黑白两色.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>VMware安装MacOS系统</title>
      <link>http://localhost:1313/aLong/posts/vmware%E5%AE%89%E8%A3%85macos%E7%B3%BB%E7%BB%9F/</link>
      <pubDate>Mon, 12 Aug 2019 11:29:38 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/vmware%E5%AE%89%E8%A3%85macos%E7%B3%BB%E7%BB%9F/</guid>
      <description>&lt;h2 id=&#34;虚拟机安装-macos&#34;&gt;虚拟机安装 macOS&lt;/h2&gt;
&lt;h4 id=&#34;准备工作&#34;&gt;准备工作:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;VM关闭进程,利用macOS Unlocker修改VM使其能安装macOS系统, 执行程序 win-install.cmd 使用管理员权限运行脚本.&lt;/li&gt;
&lt;li&gt;准备好macOS镜象.&lt;/li&gt;
&lt;li&gt;利用VM创建虚机,系统类型选择macOS,版本号选择与下载的镜象版本相同.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;装系统&#34;&gt;装系统:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;启动虚拟机,并通过cdrom加载镜象.&lt;/li&gt;
&lt;li&gt;首次安装需要先利用系统内硬盘工具格式化硬盘,之后利用安装工具进行系统安装.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;异常问题&#34;&gt;异常问题:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;开启虚拟机弹出错误:vcpu-0 错误.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;修改虚机镜象文件.vmx   在smc.present = “TRUE”下面插入一行代码:    smc.version = 0&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不能正常登陆APPID&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;需要修改虚拟机,利用Chameleon Wizard 伪造设备信息. 保存 生成的信息 去修改镜象所在文件下的.vmx&lt;/p&gt;
&lt;p&gt;修改 board-id.reflectHost = &amp;ldquo;TRUE&amp;rdquo; 为FALSE,并在下面插入需要的伪造设备信息例子:&lt;/p&gt;
&lt;p&gt;board-id = &amp;ldquo;Mac-94245B3640C91C81&amp;rdquo;
hw.model.reflectHost = &amp;ldquo;FALSE&amp;rdquo;
hw.model = &amp;ldquo;MacBook Pro&amp;rdquo;
serialNumber.reflectHost = &amp;ldquo;FALSE&amp;rdquo;
serialNumber = &amp;ldquo;C02JJ8B3DH2G&amp;rdquo;
smbios.reflectHost = &amp;ldquo;FALSE&amp;rdquo;&lt;/p&gt;
&lt;p&gt;这段信息中的board-id 与  serialNumber 不要与例子的相同.其他可以参考.最后保存,重启.&lt;/p&gt;
&lt;p&gt;重启之后尝试是否可以登陆市场.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>数据库迁移</title>
      <link>http://localhost:1313/aLong/posts/laravel5%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB/</link>
      <pubDate>Fri, 26 Jul 2019 14:30:25 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/laravel5%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB/</guid>
      <description>&lt;h2 id=&#34;laravel5-数据库迁移笔记&#34;&gt;Laravel5 数据库迁移笔记&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;h3 id=&#34;创建迁移文件&#34;&gt;创建迁移文件&lt;/h3&gt;
&lt;p&gt;命令: &lt;code&gt;make:migration&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;举例: &lt;code&gt;php artisan make:migration create_users_table --create=users&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;生成位置: 项目/database/migrations/下 文件名已时间开头,后面是自己创建迁移文件名字.&lt;/p&gt;
&lt;p&gt;&amp;ndash;creat 指定数据库中表的名字&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h3 id=&#34;编辑迁移文件&#34;&gt;编辑迁移文件&lt;/h3&gt;
&lt;p&gt;打开迁移文件:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;use&lt;/span&gt; Illuminate\Support\Facades\Schema;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;use&lt;/span&gt; Illuminate\Database\Schema\Blueprint;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;use&lt;/span&gt; Illuminate\Database\Migrations\Migration;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;CreateUsersTable&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;extends&lt;/span&gt; Migration
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       &lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        * Run the migrations.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        * @return void
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;up&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;           Schema&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;create&lt;/span&gt;(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;users&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;function&lt;/span&gt; (Blueprint &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;bigIncrements&lt;/span&gt;(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;string&lt;/span&gt;(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;string&lt;/span&gt;(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;email&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;unique&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;timestamp&lt;/span&gt;(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;email_verified_at&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;nullable&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;string&lt;/span&gt;(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;password&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;rememberToken&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#19177c&#34;&gt;$table&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;timestamps&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;           });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       &lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        * Reverse the migrations.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        * @return void
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ba2121;font-style:italic&#34;&gt;        */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;down&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;           Schema&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;dropIfExists&lt;/span&gt;(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;users&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;文件中有两个方法,up/down . 可以理解为创建执行时up方法,rollback时候是执行down方法.

up方法中:
    创建了7个字段,表明为 users.
    
    创建字段操作 `$table-&amp;gt;` 后面加上字段类型 `string` ,指定字段名称`(&amp;#39;name&amp;#39;)` 字段被指 `-&amp;gt;comment(&amp;#39;名子&amp;#39;)`; 
    
    具体每个字段类型,以及其他属性定义,请查询手册.
    


* ### 执行迁移文件

  这个迁移文件是创建表,所以down是删除表.也就是当我们执行 `php artisan migrate:rollback` 回滚到上一步就是把这表删除(前提创建之后).

  执行命令: `php artisan migrate` 执行迁移文件创建表单.
  
  如果我们后悔创建:可以执行回滚. `php artisan migrate:rollback `  --step 指定回滚次数 `php artisan migrate:rollback --step=2` 执行回滚迁移2次钱.
  
  `php artisan migrate:reset` 回滚所有迁移
  
  `php artisan migrate:fresh` 删除所有回滚
  
  
* ### 为前迁移文件修改字段,改名.
当我们上面的文件执行后,需要增加一个字段,那么就需要新建一个迁移文件.不要直接操作数据库.

    `php artisan make:migration add_id_to_users_table --table=users` 
    
    这里为users表新增身份证字段.
    
    打开文件 新建身份证id列. 
    
    之后我们执行迁移文件.成功后就能看到新得ID字段已经出现.对于编辑和修改都可以.

    `$table-&amp;gt;renameColumn(&amp;#39;ID&amp;#39;, &amp;#39;id&amp;#39;)` 改名id
    
    对应dorop 也需要dropColumn 此字段.
    
    最后执行此迁移文件.


    
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Composer笔记</title>
      <link>http://localhost:1313/aLong/posts/composer%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Mon, 15 Jul 2019 17:24:45 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/composer%E7%AC%94%E8%AE%B0/</guid>
      <description>&lt;h3 id=&#34;composer---laravel5&#34;&gt;composer - laravel5&lt;/h3&gt;
&lt;h4 id=&#34;创建laravel项目&#34;&gt;创建laravel项目：&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;conposer create-project laravel/laravel=5.8.* --prefer-dist  ./XXX&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;laravel=5.8.* 这里代表要部署5.8中最高版本   &amp;ndash;prefer-dist  参数代表优先下载zip&lt;/p&gt;
&lt;h4 id=&#34;安装vendor&#34;&gt;安装vendor:&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;composer install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;composer install --prefer-dist&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;更新&#34;&gt;更新：&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;composer update&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;composer版本更新&#34;&gt;composer版本更新：&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;composer self-update&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;利用composer-创建laravel控制器&#34;&gt;利用composer 创建laravel控制器：&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;php artisan make:controller HomeController&lt;/code&gt;
会在http下 创建一Home的控制器&lt;/p&gt;
&lt;p&gt;如果存在分目录情况，需要指定目录：
&lt;code&gt;php artisan make:controller Home/HomeController&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;laravel-config&#34;&gt;Laravel config:&lt;/h4&gt;
&lt;p&gt;编写一些类的别名，controller中 use 简短的别名为目的。&lt;/p&gt;
&lt;p&gt;位置：config/app    存在一数组 aliases  在里面添加&lt;/p&gt;
&lt;h4 id=&#34;创建模型&#34;&gt;创建模型：&lt;/h4&gt;
&lt;p&gt;创建一个user 的model&lt;/p&gt;
&lt;p&gt;&lt;code&gt;php artisan make:model User&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;指定目录加入目录即可&lt;/p&gt;
&lt;h4 id=&#34;获取项目路由&#34;&gt;获取项目路由：&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;php artisan route:list&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;composer在项目中安装三方库时候出现报错&#34;&gt;composer在项目中安装三方库时候出现报错：&lt;/h4&gt;
&lt;p&gt;执行命令： &lt;code&gt;composer Install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;返回错误： Your requirements could not be resolved to an installable set of packages.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>无版权素材站点</title>
      <link>http://localhost:1313/aLong/posts/%E6%97%A0%E7%89%88%E6%9D%83%E7%B4%A0%E6%9D%90%E7%AB%99%E7%82%B9/</link>
      <pubDate>Thu, 27 Jun 2019 09:58:04 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/%E6%97%A0%E7%89%88%E6%9D%83%E7%B4%A0%E6%9D%90%E7%AB%99%E7%82%B9/</guid>
      <description>&lt;h4 id=&#34;最近找素材收集一些站点&#34;&gt;最近找素材收集一些站点&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;无版权对于我们来说可以放心使用
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;列表如下：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.pexels.com/&#34;&gt;http://www.pexels.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.gratisography.com/&#34;&gt;http://www.gratisography.com/&lt;/a&gt;　&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://visualhunt.com/&#34;&gt;https://visualhunt.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://finda.photo&#34;&gt;http://finda.photo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://cupcake.nilssonlee.se/&#34;&gt;http://cupcake.nilssonlee.se/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.photock.jp/&#34;&gt;https://www.photock.jp/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://pngimg.com/&#34;&gt;http://pngimg.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.designerspics.com&#34;&gt;http://www.designerspics.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://kaboompics.com/&#34;&gt;http://kaboompics.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://pixabay.com/&#34;&gt;https://pixabay.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://visualhunt.com/&#34;&gt;https://visualhunt.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://finda.photo&#34;&gt;http://finda.photo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.freemagebank.com/&#34;&gt;http://www.freemagebank.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://stocksnap.io/&#34;&gt;https://stocksnap.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://picjumbo.com/&#34;&gt;http://picjumbo.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://stokpic.com/&#34;&gt;http://stokpic.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cn.freeimages.com/&#34;&gt;https://cn.freeimages.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.imcreator.com/free&#34;&gt;http://www.imcreator.com/free&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.piqsels.com/zh&#34;&gt;https://www.piqsels.com/zh&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://magdeleine.co/browse/&#34;&gt;https://magdeleine.co/browse/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://colorhub.me/&#34;&gt;https://colorhub.me/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://picjumbo.com/&#34;&gt;https://picjumbo.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://streetwill.co/&#34;&gt;http://streetwill.co/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.foodiesfeed.com/&#34;&gt;https://www.foodiesfeed.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.peakpx.com/&#34;&gt;http://www.peakpx.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.polayoutu.com/collections&#34;&gt;http://www.polayoutu.com/collections&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://negativespace.co/&#34;&gt;https://negativespace.co/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://freeforcommercialuse.net/&#34;&gt;https://freeforcommercialuse.net/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://mmtstock.com/&#34;&gt;https://mmtstock.com/&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Hexo笔记</title>
      <link>http://localhost:1313/aLong/posts/hexo%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Tue, 04 Jun 2019 10:46:48 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/hexo%E7%AC%94%E8%AE%B0/</guid>
      <description>&lt;h3 id=&#34;多tag&#34;&gt;多tag&lt;/h3&gt;
&lt;p&gt;文章中 多tag时,无法直接, 空格这种.&lt;/p&gt;
&lt;p&gt;方式一:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tags: [tag1,tag2]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;方式二:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;tags:
- tag1
- tag2 
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Python建立SocketSSL连接</title>
      <link>http://localhost:1313/aLong/posts/python%E5%BB%BA%E7%AB%8Bsocketssl%E8%BF%9E%E6%8E%A5/</link>
      <pubDate>Tue, 04 Jun 2019 10:23:11 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/python%E5%BB%BA%E7%AB%8Bsocketssl%E8%BF%9E%E6%8E%A5/</guid>
      <description>&lt;h3 id=&#34;python-socket连接&#34;&gt;Python Socket连接&lt;/h3&gt;
&lt;p&gt;5月中旬遇到一个功能,需要利用Python建立Socket tcp连接,于设备通讯发送相关数据.&lt;/p&gt;
&lt;p&gt;这块没接触,Python也是hello world水平.&lt;/p&gt;
&lt;p&gt;赶紧恶补一下:&lt;/p&gt;
&lt;p&gt;Socket是网络编程的一个抽象概念。&lt;/p&gt;
&lt;p&gt;通常我们用一个Socket表示“打开了一个网络链接”，打开一个Socket需要知道目标计算机的IP地址和端口号，再指定协议类型。&lt;/p&gt;
&lt;p&gt;服务端我也不知道什么样,这里只记录客户端的相关.&lt;/p&gt;
&lt;p&gt;这里我们得到一个文档说,需要建立socket SSL 连接,通过XML格式发送数据.&lt;/p&gt;
&lt;h4 id=&#34;非ssl的socket&#34;&gt;非ssl的socket:&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;socket&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 创建一个socket:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; socket&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;socket(socket&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;AF_INET, socket&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;SOCK_STREAM)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 建立连接:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;connect((&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;192.168.1.230&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#666&#34;&gt;80&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ssl-socket&#34;&gt;SSL socket:&lt;/h4&gt;
&lt;p&gt;端口是3344,ssl跳过验证,如果验证参数需要修改.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;socket&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; s &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; socket&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;socket(socket&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;AF_INET, socket&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;SOCK_STREAM)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; c &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; ssl&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;wrap_socket(s, cert_reqs&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;ssl&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;CERT_NONE)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    c&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;connect((&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;192.168.1.230&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;3344&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;except&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这下与那台设备可以正常通讯了,后面实现具体功能就ok了.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Ubutun16.04安装Python</title>
      <link>http://localhost:1313/aLong/posts/ubutun16-04%E5%AE%89%E8%A3%85python/</link>
      <pubDate>Fri, 24 May 2019 11:17:59 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/ubutun16-04%E5%AE%89%E8%A3%85python/</guid>
      <description>&lt;h3 id=&#34;目的&#34;&gt;目的&lt;/h3&gt;
&lt;p&gt;安装python3.7.3
安装pip&lt;/p&gt;
&lt;h3 id=&#34;准备工作&#34;&gt;准备工作&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;系统内置python2.X,去除默认python的软链, &lt;code&gt;sudo rm /usr/bin/python&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;安装一些软件包&amp;amp;软件包保持最新状态.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get update&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev wget&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;安装python&#34;&gt;安装Python&lt;/h3&gt;
&lt;p&gt;通过编译安装python&lt;/p&gt;
&lt;p&gt;默认我下载在home里, &lt;code&gt;cd&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;下载新python文件, &lt;code&gt;wget https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tgz &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;解压文件, &lt;code&gt;tar zxf Python-3.7.3.tgz&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;把这个文件拷贝到放置的位置. 这里我放到/usr/local/python &lt;code&gt;mkdir -p /usr/local/python&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;进入这个目录, 执行 &lt;code&gt;./configure --enable-optimizations&lt;/code&gt;
之后执行 &lt;code&gt;sudo make -j 8&lt;/code&gt;  这里8根据设备cpu核心数来的,不知道你可以写1(手动滑稽)&lt;/p&gt;
&lt;p&gt;make之后 该 &lt;del&gt;make install&lt;/del&gt; 嘛? NO! 是 &lt;code&gt;sudo make altinstall&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;装完之后, 可以尝试 python &amp;ndash;version 看看有没有, 如果没有或者版本不对.可能是准备里你没有删除 /usr/bin/python 或者这个不存在.
需要手动添加一下,我这个是没有给我创建成功.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo ln -s /usr/local/Python-3.7.3/python /usr/bin/python&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Go学习笔记</title>
      <link>http://localhost:1313/aLong/posts/go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Wed, 15 May 2019 11:05:52 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
      <description>&lt;h3 id=&#34;变量&#34;&gt;变量&lt;/h3&gt;
&lt;p&gt;var 声明,支持类型判断.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;var name string&lt;/code&gt;    string类型 name&lt;/p&gt;
&lt;p&gt;&lt;code&gt;var s string&lt;/code&gt;       值初始化&lt;/p&gt;
&lt;p&gt;&lt;code&gt;var age = 20&lt;/code&gt;     age 类型自动推断&lt;/p&gt;
&lt;p&gt;&lt;code&gt;height := 165&lt;/code&gt;    简短声明(仅限函数使用)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;i,j,k := 3.8,true,100&lt;/code&gt; 声明一组变量&lt;/p&gt;
&lt;p&gt;&lt;code&gt;_, res := 123,321&lt;/code&gt; _特殊变量名,赋予他的值会被丢弃&lt;/p&gt;
&lt;h3 id=&#34;常量&#34;&gt;常量&lt;/h3&gt;
&lt;p&gt;const 声明&lt;/p&gt;
&lt;p&gt;&lt;code&gt;const Pi = 3.14&lt;/code&gt; 声明一个常量Pi&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;const(
    apple = &amp;#34;fruit&amp;#34;
    banana
    )
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;banana 常量未定义初始化值会与apple值相同&lt;/p&gt;
&lt;h3 id=&#34;数据类型&#34;&gt;数据类型&lt;/h3&gt;
&lt;p&gt;boolean,整型,浮点型,字符串,错误&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;布尔
bool 初始化默认fasle&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;整型&lt;/p&gt;
&lt;p&gt;int8,int16,int32,int64 (有符号)&lt;/p&gt;
&lt;p&gt;uint8(byte),uint16,uint32(rune),uint64 (无符号)&lt;/p&gt;
&lt;p&gt;uintptr&lt;/p&gt;
&lt;p&gt;byte,rune 与uint8,uint32别名&lt;/p&gt;
&lt;p&gt;整形初始化默认值0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;浮点型&lt;/p&gt;
&lt;p&gt;float32,float64(默认浮点类型)&lt;/p&gt;
&lt;p&gt;complex64,complex128&lt;/p&gt;
&lt;p&gt;float32,float64 初始化默认值0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;字符串&lt;/p&gt;
&lt;p&gt;双引号或``,UTF8编码,\转义&lt;/p&gt;
&lt;p&gt;初始化默认值&amp;quot;&amp;quot;&lt;/p&gt;
&lt;p&gt;修改需要转换类型为 rune或byte 操作后再转换&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>redis笔记</title>
      <link>http://localhost:1313/aLong/posts/redis%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Thu, 25 Apr 2019 17:12:52 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/redis%E7%AC%94%E8%AE%B0/</guid>
      <description>&lt;h2 id=&#34;redis笔记&#34;&gt;redis笔记&lt;/h2&gt;
&lt;p&gt;单进程,默认16库,&lt;/p&gt;
&lt;p&gt;select  N  切换库&lt;/p&gt;
&lt;p&gt;flushdb 清空库&lt;/p&gt;
&lt;h3 id=&#34;类型&#34;&gt;类型&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;string 字符串&lt;/li&gt;
&lt;li&gt;list 列表&lt;/li&gt;
&lt;li&gt;set 集合&lt;/li&gt;
&lt;li&gt;sorted set有序集合&lt;/li&gt;
&lt;li&gt;hash哈希&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个字符串支持512M&lt;/p&gt;
&lt;p&gt;有序集合 每个元素会关联一个double类型分数。成员唯一，分数可以重复。&lt;/p&gt;
&lt;h3 id=&#34;常用命令&#34;&gt;常用命令&lt;/h3&gt;
&lt;h5 id=&#34;key&#34;&gt;key：&lt;/h5&gt;
&lt;pre&gt;&lt;code&gt;keys *
  
exists key

move key db  移除key 从库中

expire key 为key 设置过期时间

ttl key 查看多少秒过期，-1 永不过期， -2已过期

type key 查看类型

del key 删除
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;string&#34;&gt;string：&lt;/h3&gt;
&lt;p&gt;getrange key 0-N  setrange key 0-N XXX   获取字符串范围内容， 设置范围内为XXX&lt;/p&gt;
&lt;p&gt;setex 设置生命值多少秒  setnx key 设置一个不存在的key&lt;/p&gt;
&lt;p&gt;mset mget msetnx&lt;/p&gt;
&lt;h3 id=&#34;list&#34;&gt;list：&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;lpush rpush lrange
 
lpop rpop
 
lindex
 
llen

lrem key 2 value 删除2个value
 
ltrim key 0-N  截取并复制给key （其他的删除了）

rpoplpush  弹出前面key的值 加入后面的key中

lset key index value 设置key中 index下标的值

linsert key before/afrer value1 value2 key中1值得前面后后面加入2值 
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;set&#34;&gt;set：&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;sadd  key value 添加到key集合

smembers key 查询集合  

sismember key m  查询m是否在key集合中

scard key 集合ket的基数

spop key 随机移除一个元素并返回元素的值

srem key m 移除m从key的集合中

smove K1 K2 m  将k1的m一刀k2里

sinter key1 key2 交集

sunion key1 key2 并集

sdiff key1 key2 差集 
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;hash&#34;&gt;hash：&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;hset user name ali 

hset user age 33     设置user数据

hget user name  获取user.name

hmset  human name tom age 44  设置多数据

hmget human name age  获取多数据

hgetall human  

hdel human  name 删除name

hlen human 长度

hexists human age 是否存在

hkeys human 获取所有key 

hvals  human 获取所有value 

hincrby  hincrbyfloat   

hsetnx 不存在添加
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;zset&#34;&gt;zset：&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;zadd key value：score 设置值的分数

zrange key 

zrangebyscore key  min max      （不包含   limit   升序

zrevrangebyscore 降序

zrem key value 

zcount key min max  范围内多少个

zscore key m 返回key 中m的分数值

zrevrange key start stop 降序展示
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;持久化&#34;&gt;持久化：&lt;/h3&gt;
&lt;h4 id=&#34;rdb-aof&#34;&gt;rdb aof&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;rdb&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>gulp笔记</title>
      <link>http://localhost:1313/aLong/posts/gulp%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Mon, 22 Apr 2019 18:08:54 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/gulp%E7%AC%94%E8%AE%B0/</guid>
      <description>&lt;h3 id=&#34;gulp&#34;&gt;gulp&lt;/h3&gt;
&lt;p&gt;gulp.js是一个前端构建工具。&lt;/p&gt;
&lt;h3 id=&#34;安装&#34;&gt;安装&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;npm&lt;/li&gt;
&lt;li&gt;安装全局gulp，&lt;code&gt;npm install -g gulp&lt;/code&gt;。（如果没有梯子，最好安装下cnpm）
cnpm 安装 &lt;code&gt;npm install -g cnpm --registry=https://registry.npm.taobao.org&lt;/code&gt;
安装完cnpm，下面所有npm操作替换cnpm 执行即可。&lt;/li&gt;
&lt;li&gt;进入项目，初始化（npm init）&lt;/li&gt;
&lt;li&gt;项目安装gulp，项目文件夹下，&lt;code&gt;npm install --save-dev gulp&lt;/code&gt;。 (&amp;ndash;save-dev 加入此项目依赖中，不需要可取消这个参数)&lt;/li&gt;
&lt;li&gt;项目根创建gulpfile.js文件，文件内创建任务测试。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;var gulp = require(&amp;#39;gulp&amp;#39;);
gulp.task(&amp;#39;default&amp;#39;,function(){
    console.log(&amp;#39;hello world!&amp;#39;);
});
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;运行 &lt;code&gt;gulp&lt;/code&gt;，可以看到默认执行，输出 hello world! 。测试成功。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;gulp-api&#34;&gt;gulp API&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;上面运行 gulp 执行default ，这个是gulp API。 [文档](https://www.gulpjs.com.cn/docs/api/) 
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;gulp工作方式&#34;&gt;gulp工作方式&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;gulp.src&lt;/code&gt; 获取文件流,通过&lt;code&gt;pipe&lt;/code&gt;方法导入到插件，插件处理的流通过&lt;code&gt;pipe&lt;/code&gt;方法导入 &lt;code&gt;gulp.dest&lt;/code&gt;中, &lt;code&gt;gulp.dest&lt;/code&gt; 输出目标文件。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;gulp src
&lt;code&gt;gulp.src(globs[, options])&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;文档这意思看着有点费劲，理解为获取文件路径。gulp通过这个方法获取到处理的文件流。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Centos7时间设置</title>
      <link>http://localhost:1313/aLong/posts/centos7%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE/</link>
      <pubDate>Fri, 19 Apr 2019 11:42:02 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/centos7%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE/</guid>
      <description>&lt;h3 id=&#34;centos7时间相关&#34;&gt;Centos7时间相关&lt;/h3&gt;
&lt;h4 id=&#34;查看时间&#34;&gt;查看时间&lt;/h4&gt;
&lt;p&gt;date
hwclock 硬件时间
timedatectl  各时间状态&lt;/p&gt;
&lt;h4 id=&#34;设置更新服务时间&#34;&gt;设置&amp;amp;更新服务时间&lt;/h4&gt;
&lt;p&gt;安装ntpdate
&lt;code&gt;yum install utp ntpdate&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;设置同步&#34;&gt;设置同步&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;ntpdate cn.pool.ntp.org&lt;/code&gt;        (time.windows.com) 地址看喜好&lt;/p&gt;
&lt;h4 id=&#34;设置硬件时间&#34;&gt;设置硬件时间&lt;/h4&gt;
&lt;p&gt;hwclock &amp;ndash;systohc&lt;/p&gt;
&lt;h4 id=&#34;设置时区&#34;&gt;设置时区&lt;/h4&gt;
&lt;p&gt;timedatectl set-timezone Asia/Shanghai  （上海）&lt;/p&gt;
&lt;p&gt;timedatectl  很多设置，需要请查相关资料。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Centos7防火墙相关设置</title>
      <link>http://localhost:1313/aLong/posts/centos7%E9%98%B2%E7%81%AB%E5%A2%99%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/</link>
      <pubDate>Thu, 18 Apr 2019 17:44:22 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/centos7%E9%98%B2%E7%81%AB%E5%A2%99%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/</guid>
      <description>&lt;h4 id=&#34;centos7与之前不太一样&#34;&gt;Centos7与之前不太一样&lt;/h4&gt;
&lt;p&gt;以前都是用iptables，公司服务器环境事7，凑巧不熟一台新服务。我为了测试，再本地虚机上装了一台。
这里默认防火墙是 firewall，其实为了省事还是可以安装一个iptables的。这里学习一下firewall一些操作。&lt;/p&gt;
&lt;h4 id=&#34;查看防火墙服务状态&#34;&gt;查看防火墙服务状态&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;systemctl status firewalld&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;####查看f防火墙状态
&lt;code&gt;firewall-cmd --state&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;查看规则&#34;&gt;查看规则&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;firewall-cmd --list-all &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;####停止&amp;amp;开启防&amp;amp;重启火墙
&lt;code&gt;systemctl stop firewalld.service&lt;/code&gt;
&lt;code&gt;systemctl start firewalld.service&lt;/code&gt;
&lt;code&gt;systemctl restart firewalld.service&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;关闭防火墙&#34;&gt;关闭防火墙&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;systemctl disable firewalld.service&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;重载防火墙&#34;&gt;重载防火墙&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;firewall-cmd —reload&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;查询开放端口&#34;&gt;查询开放端口&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;firewall-cmd --list-ports&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;开放一个端口-例如tcp-8010&#34;&gt;开放一个端口 例如tcp 8010&lt;/h4&gt;
&lt;p&gt;firewall-cmd &amp;ndash;zone=public &amp;ndash;add-port=80/tcp &amp;ndash;permanent&lt;/p&gt;
&lt;p&gt;–zone #作用域
–add-port=8010/tcp #添加端口，格式为：端口/通讯协议
–permanent #永久生效，没有此参数重启后失效&lt;/p&gt;
&lt;h4 id=&#34;查询某端口是否开放8010&#34;&gt;查询某端口是否开放(8010)&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;firewall-cmd --query-port=8010/tcp&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;移除端口规则&#34;&gt;移除端口规则&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;firewall-cmd --permanent --remove-port=8010/tcp&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Centos7启动等级设置</title>
      <link>http://localhost:1313/aLong/posts/centos7%E5%90%AF%E5%8A%A8%E7%AD%89%E7%BA%A7%E8%AE%BE%E7%BD%AE/</link>
      <pubDate>Mon, 15 Apr 2019 16:55:19 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/centos7%E5%90%AF%E5%8A%A8%E7%AD%89%E7%BA%A7%E8%AE%BE%E7%BD%AE/</guid>
      <description>&lt;h4 id=&#34;centos7启动级别&#34;&gt;Centos7启动级别&lt;/h4&gt;
&lt;p&gt;启动级别分为7个：
0 - 系统停机状态
1 - 单用户工作状态
2 - 多用户状态（没有NFS）
3 - 多用户状态（有NFS）
4 - 系统未使用，留给用户
5 - 图形界面
6 - 系统正常关闭并重新启动&lt;/p&gt;
&lt;h4 id=&#34;切换启动级别&#34;&gt;切换启动级别&lt;/h4&gt;
&lt;p&gt;之前一直都是在种端中输入指令 init3 切换启动级别。
设置永久启动3级别， &lt;code&gt;vi /etc/inittab&lt;/code&gt;  把init3设置默认即可。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;centos7 设置出现不同&lt;/strong&gt;
runlevels被targets所取代，即CentOS7采用加载target的方式来替代之前的启动级别。
multi-user.target  = init3
graphical.target    = init5
我们日常实用图形窗口init5，我们不需要图形，可以切换到init3等启动级别上。
&lt;code&gt;systemctl set-default multi-user.target&lt;/code&gt;  设置为init3
&lt;code&gt;systemctl set-default graphical.target&lt;/code&gt; 设置为init5&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Docker常用命令</title>
      <link>http://localhost:1313/aLong/posts/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link>
      <pubDate>Thu, 11 Apr 2019 15:09:19 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid>
      <description>&lt;h2 id=&#34;docker常用命令&#34;&gt;Docker常用命令&lt;/h2&gt;
&lt;p&gt;说常用不如说自己用到的命令。&lt;/p&gt;
&lt;h3 id=&#34;容器相关&#34;&gt;容器相关&lt;/h3&gt;
&lt;p&gt;学习了一下docker，基础常用命令记录下。
####docker run/新建并启动容器
这个run其实包含两个不走，先执行新建容器(docker create),接着启动容器(docker start)。敲两个是不是有点麻烦吧。&lt;/p&gt;
&lt;p&gt;docker run  xx [COMMAND]&lt;/p&gt;
&lt;p&gt;例子 &lt;code&gt;docker run -it ubuntu:14.04 /bin/bash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这里希望启动一个基于 ubuntu 14.04镜像 来创建一个容器，-t选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上，-i则让容器的标准输入保持打开。更多的命令选项可以通过man docker-run命令来查看。之后命令还有一项，启动一个bash终端。 这条命令涉及到很多知识了。
-参数 常用 -i -d -t -p，   -d 是否在后台运行，-p 映射到本地主机端口。剩下的看手册来补下。&lt;/p&gt;
&lt;h4 id=&#34;docker-create--docker-start--docker-stop&#34;&gt;docker create &amp;amp;&amp;amp; docker start &amp;amp;&amp;amp; docker stop&lt;/h4&gt;
&lt;p&gt;创建，启动，停止。
有一个容易停止了，可以用 docker start  XX容器 启动。 XX 可以是容器的ID，也可以是name。&lt;/p&gt;
&lt;h4 id=&#34;docker-rm&#34;&gt;docker rm&lt;/h4&gt;
&lt;p&gt;删除一个容器（最好先把这个容器停止了再删除）。
-f 可以强制删除。-v 删除与容器关联的卷（如果刚学习还真不知道什么是卷）。&lt;/p&gt;
&lt;h4 id=&#34;docker-attach&#34;&gt;docker attach&lt;/h4&gt;
&lt;p&gt;进入容器，如果开启了一个 -d 后台启动容器。 我们怎么进去看看？  &lt;code&gt;docker attach XX容器&lt;/code&gt;
这个命令我学习时候用过，感觉有时候不太好使。命令执行完卡那不动。&lt;/p&gt;
&lt;h4 id=&#34;docker-exec&#34;&gt;docker exec&lt;/h4&gt;
&lt;p&gt;可以在容器内直接执行任意命令。
&lt;code&gt;docker exec -it xx /bin/bash&lt;/code&gt;    这可以进入xx镜像，并打开bash。 相比这个比上面的attach 好多了。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Ubutun下安装Docker</title>
      <link>http://localhost:1313/aLong/posts/ubutun%E4%B8%8B%E5%AE%89%E8%A3%85docker/</link>
      <pubDate>Thu, 04 Apr 2019 14:57:16 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/ubutun%E4%B8%8B%E5%AE%89%E8%A3%85docker/</guid>
      <description>&lt;h3 id=&#34;docker简介&#34;&gt;Docker简介&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;一个能够把开发的应用程序自动部署到容器的开源引擎
三大概念：镜像（Image）容器（Container）仓库（Repository）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;具体信息请参考官方。&lt;a href=&#34;https://docs.docker.com/engine/docker-overview/&#34;&gt;官方概述&lt;/a&gt;（养成看文档习惯）&lt;/p&gt;
&lt;h3 id=&#34;安装环境&#34;&gt;安装环境&lt;/h3&gt;
&lt;p&gt;Ubuntu 16.04 LTS&lt;/p&gt;
&lt;h3 id=&#34;docker安装&#34;&gt;Docker安装&lt;/h3&gt;
&lt;p&gt;根据官方doc安装。&lt;a href=&#34;https://docs.docker.com/install/linux/docker-ce/ubuntu/&#34;&gt;官方doc&lt;/a&gt;
1.如果你之前装过，命令卸载。
&lt;code&gt;sudo apt-get remove docker docker-engine docker.io containerd runc&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;2.更新包索引
&lt;code&gt;apt-get update&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;3.安装包以允许apt通过HTTPS使用存储库:
&lt;code&gt;sudo apt-get install \ apt-transport-https \ ca-certificates \ curl \ gnupg-agent \ software-properties-common&lt;/code&gt;
（斜线换行，一条命令）&lt;/p&gt;
&lt;p&gt;4.添加Docker的官方GPG密钥:
&lt;code&gt;curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -&lt;/code&gt;
&lt;code&gt;sudo apt-key fingerprint 0EBFCD88&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;5.使用以下命令设置稳定存储库。要添加 夜间或测试存储库，请在下面的命令中的单词后添加单词nightly或test（或两者）stable。
&lt;code&gt;$ sudo add-apt-repository \ &amp;quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \ $(lsb_release -cs) \ stable&amp;quot;&lt;/code&gt;
(lsb_release -cs子命令返回Ubuntu发行版的名称)&lt;/p&gt;
&lt;p&gt;6.安装最新版本的Docker CE和containerd，或者转到下一步安装特定版本：
&lt;code&gt;sudo apt-get install docker-ce docker-ce-cli containerd.io&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Hexo博客安装与配置</title>
      <link>http://localhost:1313/aLong/posts/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Mon, 01 Apr 2019 17:59:31 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/posts/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</guid>
      <description>&lt;h3 id=&#34;wordpress-之后&#34;&gt;wordpress 之后&lt;/h3&gt;
&lt;p&gt;wordpress 使用很方便，但是折腾几次之后。由于一次意外，导致管理者把我的vps被停掉。虽然有些文章还是保留了。但是这次之后感觉自己还是找一个稳妥的家。连接hexo搭建的博客之后，打算自己来折腾一下。&lt;/p&gt;
&lt;h3 id=&#34;记录笔记环境&#34;&gt;记录笔记环境&lt;/h3&gt;
&lt;p&gt;在windows上写笔记，环境目前是windows下操作。linux，mac系统中需要注意一些细节吧。存在提不到情况，先做好出现问题考虑自行排查。&lt;/p&gt;
&lt;h3 id=&#34;准备&#34;&gt;准备&lt;/h3&gt;
&lt;p&gt;看下hexo的安装提示。
&lt;img loading=&#34;lazy&#34; src=&#34;http://t1.aixinxi.net/o_1d7c68cm911cu1p74qfa133ikh2a.jpg-w.jpg&#34; alt=&#34;安装提示&#34;  title=&#34;前提&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;hexo 需要Node.js 和 Git 。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装 Node.js
官网:  &lt;a href=&#34;https://nodejs.org/en/download/&#34;&gt;官网&lt;/a&gt;
widows，mac，linux 都有对应的安装方法。根据自己的环境来安装。&lt;/li&gt;
&lt;li&gt;安装 Git
官网:  &lt;a href=&#34;https://git-scm.com/downloads/&#34;&gt;官网&lt;/a&gt;
根据自己环境安装。&lt;/li&gt;
&lt;li&gt;安装Hexo
通过npm来安装 Hexo。
命令:  &lt;code&gt;npm install -g hexo-cli&lt;/code&gt;
什么鬼，通过这个命令发现没有实现正常安装。理由，我们在天朝。
解决方式： 替换国内npm源。
命令:   &lt;code&gt;npm install -g cnpm --registry=https://registry.npm.taobao.org&lt;/code&gt;
请注意不同系统在操作此命令时，需要一些设置。linux 如果使用下面命令需要自建软链。  &lt;code&gt;cnpm   ln -s /yourdir/bin/cnpm  /usr/local/npm&lt;/code&gt;
下一步用cnpm 来安装 Hexo： &lt;code&gt;cnpm install hexo-cli -g&lt;/code&gt;
验证hexo 是否安装： &lt;code&gt;hexo v&lt;/code&gt;  会列出版本信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;下面使用hexo来创建blog&#34;&gt;下面使用Hexo来创建blog：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;创建项目文件夹。这里开始通过git bash来使用命令行操作。&lt;/li&gt;
&lt;li&gt;进入项目文件夹，初始化。 &lt;code&gt;hexo init&lt;/code&gt; （这里也可以，通过 &lt;code&gt;hexo init 你的项目文件夹名&lt;/code&gt; 结果一样）
这里会看到目录有相关文件了。具体这些文件，看下 &lt;a href=&#34;https://hexo.io/zh-cn/docs/setup&#34;&gt;手册&lt;/a&gt; 是什么意思。
这时候其实已经是一个博客站点了。&lt;/li&gt;
&lt;li&gt;命令 &lt;code&gt;hexo g&lt;/code&gt;  , &lt;code&gt;hexo s&lt;/code&gt;  得到信息：Hexo is running at http：//lcoalhost:4000` 注意4000端口需要未被占用。 访问地址就可以看到初始化的站点了。 &lt;em&gt;（不喜欢默认主题可以修改主题）&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;写文章&#34;&gt;写文章&lt;/h3&gt;
&lt;p&gt;写文章需要先创建文档，这个文档默认生成在_post 文件夹下。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>About</title>
      <link>http://localhost:1313/aLong/about/</link>
      <pubDate>Fri, 29 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/aLong/about/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
