<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on aLong Blog</title><link>http://localhost:1313/aLong/tags/linux/</link><description>Recent content in Linux on aLong Blog</description><generator>Hugo</generator><language>en</language><lastBuildDate>Fri, 06 Jan 2023 15:35:43 +0800</lastBuildDate><atom:link href="http://localhost:1313/aLong/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>é€šè¿‡minikubeéƒ¨ç½²K8Så­¦ä¹ ç¯å¢ƒ</title><link>http://localhost:1313/aLong/posts/%E9%80%9A%E8%BF%87minikube%E9%83%A8%E7%BD%B2k8s%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/</link><pubDate>Fri, 06 Jan 2023 15:35:43 +0800</pubDate><guid>http://localhost:1313/aLong/posts/%E9%80%9A%E8%BF%87minikube%E9%83%A8%E7%BD%B2k8s%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/</guid><description>&lt;p>Minikube æ˜¯æœ¬åœ° Kubernetesï¼Œä¸“æ³¨äºè®© Kubernetes æ˜“äºå­¦ä¹ å’Œå¼€å‘ã€‚&lt;/p>
&lt;h1 id="macoséƒ¨ç½²æ–¹å¼">MacOSéƒ¨ç½²æ–¹å¼:&lt;/h1>
&lt;p>&lt;a href="https://minikube.sigs.k8s.io/docs/start/">å®˜æ–¹æ•™ç¨‹&lt;/a>&lt;/p>
&lt;p>æœ¬æ¬¡ä½¿ç”¨çš„é©±åŠ¨æ˜¯ parallelsé©±åŠ¨ã€‚æ‰€ä»¥æœ¬æœºéœ€è¦å®‰è£…æ­¤è½¯ä»¶ã€‚
å®‰è£…kubectlï¼š&lt;code>brew install kubectl&lt;/code>
å®‰è£…minikubeï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo install minikube-darwin-amd64 /usr/local/bin/minikube
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤">é€šè¿‡minikubeå¯åŠ¨é›†ç¾¤&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>minikube start &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--kubernetes-version&lt;span style="color:#f92672">=&lt;/span>v1.23.9 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--image-mirror-country&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;cn&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--registry-mirror&lt;span style="color:#f92672">=&lt;/span>https://ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ.mirror.aliyuncs.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å› ä¸ºæ˜¯å›½å†…ï¼Œæ‰€ä»¥&lt;code>--image-mirror-country='cn'&lt;/code>ã€‚é€šè¿‡&lt;code>--registry-mirror&lt;/code>ä¸º Docker daemon é…ç½®é•œåƒåŠ é€Ÿã€‚ä¾‹å¦‚ä¸Šé¢æ˜¯é˜¿é‡Œäº‘é•œåƒæœåŠ¡åœ°å€ã€‚
å› ä¸ºæˆ‘å­¦ä¹ çš„ç‰ˆæœ¬æ˜¯1.23.xï¼Œæ‰€ä»¥åˆ¶å®šäº†ç‰ˆæœ¬&lt;code>--kubernetes-version=v1.23.9&lt;/code>ã€‚
é»˜è®¤ä»–è¯»å»äº†é©±åŠ¨é…ç½®ï¼Œè¯†åˆ«æ˜¯&lt;code>parallels&lt;/code>,è‡ªå·±å®šä¹‰æ–¹å¼&lt;code>--driver=hyperkit&lt;/code>ã€‚&lt;/p>
&lt;p>å®‰è£…ç»“æœï¼š
&lt;img src="https://s2.loli.net/2023/01/06/C3AFxdiPbq8aIuR.jpg" alt="C3AFxdiPbq8aIuR">&lt;/p>
&lt;p>&lt;em>é”™è¯¯&lt;/em>ï¼š
å¦‚æœå­˜åœ¨é”™è¯¯è¯·çœ‹å…·ä½“ä¸Šé¢çš„é—®é¢˜ï¼Œå¾ˆå¤šæƒ…å†µéƒ½èƒ½ç›´è§‚çœ‹åˆ°æç¤ºã€‚å…¶ä¸­å›¾æ ‡æ˜¯â—ï¸æç¤ºä¸€äº›é—®é¢˜ã€ğŸ’¡ç»™ä½ ä¸€äº›å»ºè®®ç­‰ç­‰ã€‚&lt;/p>
&lt;h4 id="é©±åŠ¨é€‰æ‹©">é©±åŠ¨é€‰æ‹©ï¼š&lt;/h4>
&lt;p>ä½¿ç”¨dockeré©±åŠ¨éœ€è¦å®‰è£…docker desktopã€‚å…¶ä»–é©±åŠ¨ï¼švirtualboxã€vmwareã€sshã€Hyperkitç­‰ã€‚å…·ä½“è¯¦è§&lt;a href="https://minikube.sigs.k8s.io/docs/drivers/">drivers page&lt;/a>&lt;/p>
&lt;h3 id="éªŒè¯ç»“æœ">éªŒè¯ç»“æœ&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>æŸ¥è¯¢minikubeçŠ¶æ€
&lt;img src="https://s2.loli.net/2023/01/06/otU8LYBjuFeDa31.png" alt="otU8LYBjuFeDa31">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿›å…¥é¢æ¿
&lt;img src="https://s2.loli.net/2023/01/06/FmrBXOTJ1N2AZgU.png" alt="FmrBXOTJ1N2AZgU">
&lt;img src="https://s2.loli.net/2023/01/06/IPBCwUSx7Fb28Ee.png" alt="IPBCwUSx7Fb28Ee">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>kubectlæ§åˆ¶
&lt;code>minikube kubectl -- get pods -A&lt;/code>
&lt;img src="https://s2.loli.net/2023/01/06/EziUHcpln27ufeB.png" alt="EziUHcpln27ufeB">&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>kubectlåœ¨minikubeä¸­ä½¿ç”¨ï¼Œéœ€è¦å†™ &lt;code>nimikune kubectl --&lt;/code>åé¢åŠ å…¥æ‰§è¡Œçš„å‘½ä»¤ã€‚
macosé»˜è®¤ä½¿ç”¨çš„zshï¼Œåœ¨zshåŠ å…¥aliaså°±å¯ä»¥æ•²çš„å°‘çš„äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-zsh" data-lang="zsh">&lt;span style="display:flex;">&lt;span>vi ~/.zshrc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#åŠ å…¥ä¸€è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias kubectl&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;minikube kubectl --&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å†åˆ›å»ºä¸€ä¸ªPod
åˆ›å»ºï¼š
&lt;code>kubectl run nginx --image=nginx:alpine&lt;/code>
æŸ¥è¯¢ï¼š
&lt;code>kubectl get pods nginx&lt;/code>
è¯¦æƒ…ï¼š
&lt;code>kubectl describe pods nginx&lt;/code>
&lt;img src="https://s2.loli.net/2023/01/06/pYPqIgt84LzBcEU.png" alt="pYPqIgt84LzBcEU">&lt;/li>
&lt;/ul>
&lt;p>åˆ°è¿™é‡Œk8så¯ä»¥ä½¿ç”¨äº†ã€‚&lt;/p></description></item><item><title>linuxç¯å¢ƒrediså¼€æœºå¯åŠ¨</title><link>http://localhost:1313/aLong/posts/linux%E7%8E%AF%E5%A2%83redis%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</link><pubDate>Tue, 11 Jan 2022 10:16:39 +0000</pubDate><guid>http://localhost:1313/aLong/posts/linux%E7%8E%AF%E5%A2%83redis%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</guid><description>&lt;h2 id="å‰æ">å‰æ&lt;/h2>
&lt;p>ç³»ç»Ÿéƒ¨ç½²åœ¨ubuntu20.04ä¸­ï¼Œç”¨åˆ°redisæ•°æ®åº“ã€‚
ä½†æ˜¯æµ‹è¯•æ—¶å€™ï¼Œè®¾å¤‡é‡å¯å‘ç°redisæœåŠ¡æ²¡æœ‰å¯åŠ¨ã€‚
ç”±äºæ˜¯å˜å¼‚å®‰è£…çš„ï¼Œç³»ç»Ÿæ‰¾ä¸åˆ°redis.serviceã€‚&lt;/p>
&lt;h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ&lt;/h2>
&lt;p>ç³»ç»Ÿæ·»åŠ æœåŠ¡æ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œã€‚&lt;/p>
&lt;h3 id="ç¼–å†™æ–‡ä»¶">ç¼–å†™æ–‡ä»¶&lt;/h3>
&lt;p>æ–‡ä»¶è·¯å¾„&lt;code>/usr/lib/systemd/system&lt;/code>&lt;/p>
&lt;p>ç¼–å†™æ–‡ä»¶ &lt;code>vi /usr/lib/systemd/system/redis.service&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[Unit]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#æœåŠ¡æè¿°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Description&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">Redis persistent key-value database&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#æœåŠ¡ä¾èµ–&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">After&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">network.target&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">After&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">network-online.target&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Wants&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">network-online.target&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[Service]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#å¯åŠ¨ å‘½ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ExecStart&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">/home/monitor/redis-6.0.8/src/redis-server /home/monitor/redis-6.0.8/redis.conf --protected-mode no&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#åœæ­¢å‘½ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ExecStop&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">/home/monitor/redis-6.0.8/src/redis-cli shutdown&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Restart&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">always&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#æœåŠ¡ç±»å‹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Type&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">forking&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#User=redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#Group=redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">RuntimeDirectory&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">RuntimeDirectoryMode&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">0755&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[Install]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#æœåŠ¡å®‰è£…è®¾ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">WantedBy&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">multi-user.target&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœåŠ¡é…ç½®æ–‡ä»¶åˆ†ä¸º[Unit]ã€[Service]å’Œ[Install]ä¸‰éƒ¨åˆ†ã€‚
å…·ä½“è¯¦ç»†çš„è§£é‡Šéœ€è¦ç»“åˆlinuxçŸ¥è¯†è¡¥å……ã€‚&lt;/p>
&lt;h3 id="æœåŠ¡ç”Ÿæ•ˆ">æœåŠ¡ç”Ÿæ•ˆ&lt;/h3>
&lt;p>ç³»ç»Ÿé‡æ–°è¯»å–æ‰€æœ‰æœåŠ¡æ–‡ä»¶ï¼š &lt;code>systemctl daemon-reload&lt;/code>
å¯ç”¨/ç¦ç”¨å¼€æœºè‡ªå¯åŠ¨: &lt;code>systemctl enable/disable redis&lt;/code>
å¯åŠ¨/é‡å¯redisï¼š &lt;code>systemctl start/restart redis&lt;/code>&lt;/p></description></item><item><title>Linuxé‡å¯åDockerè®¾ç½®è‡ªåŠ¨å¯åŠ¨&amp;å®¹å™¨è‡ªåŠ¨å¯åŠ¨è®¾ç½®</title><link>http://localhost:1313/aLong/posts/linux%E9%87%8D%E5%90%AF%E5%90%8Edocker%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8-%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AE/</link><pubDate>Mon, 18 May 2020 11:03:48 +0000</pubDate><guid>http://localhost:1313/aLong/posts/linux%E9%87%8D%E5%90%AF%E5%90%8Edocker%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8-%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AE/</guid><description>&lt;h2 id="linuxç³»ç»Ÿé‡å¯ådockerè‡ªåŠ¨å¯åŠ¨">Linuxç³»ç»Ÿé‡å¯åDockerè‡ªåŠ¨å¯åŠ¨&lt;/h2>
&lt;p>ç³»ç»Ÿé‡å¯åï¼Œå¦‚æœdockeræ²¡æœ‰å¯åŠ¨ï¼Œé‚£ä¹ˆdockerä¸‹æ‰€æœ‰çš„æœåŠ¡å°±éƒ½æŒ‚äº†ã€‚
é…ç½®è¿‡ä¸€æ¬¡æ€»æ˜¯å¿˜è®°å‘½ä»¤ï¼Œè¿™é‡Œç‰¹æ„è®°å½•ä¸€ä¸‹ï¼š
&lt;code>systemctl enable docker.service&lt;/code>&lt;/p>
&lt;h2 id="å®¹å™¨è‡ªåŠ¨å¯åŠ¨é…ç½®">å®¹å™¨è‡ªåŠ¨å¯åŠ¨é…ç½®&lt;/h2>
&lt;p>å®¹å™¨é…ç½®å¥½è‡ªåŠ¨å¯åŠ¨åï¼Œå½“dockerè¿è¡Œåï¼Œå®¹å™¨ä¹Ÿè‡ªåŠ¨å¯åŠ¨ã€‚è¿™æ ·èƒ½ä¿è¯æœåŠ¡çš„ç¨³å®šæ€§ã€‚ä¸ç”¨å†ç™»å½•åˆ°ç³»ç»Ÿæ¥æ“ä½œå„ç§å®¹æ˜“å¯åŠ¨é—®é¢˜ã€‚
æ¶‰åŠåˆ°çš„å‚æ•°ä¸ºï¼š
&lt;code>--restart=always&lt;/code>&lt;/p>
&lt;p>å‚æ•°æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>noï¼Œé»˜è®¤ç­–ç•¥ï¼Œåœ¨å®¹å™¨é€€å‡ºæ—¶ä¸é‡å¯å®¹å™¨&lt;/p>
&lt;/li>
&lt;li>
&lt;p>on-failureï¼Œåœ¨å®¹å™¨éæ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€é0ï¼‰ï¼Œæ‰ä¼šé‡å¯å®¹å™¨ã€‚ä¾‹å¦‚ï¼šon-failure:3ï¼Œåœ¨å®¹å™¨éæ­£å¸¸é€€å‡ºæ—¶é‡å¯å®¹å™¨ï¼Œæœ€å¤šé‡å¯3æ¬¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>alwaysï¼Œåœ¨å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨&lt;/p>
&lt;/li>
&lt;li>
&lt;p>unless-stoppedï¼Œåœ¨å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨ï¼Œä½†æ˜¯ä¸è€ƒè™‘åœ¨Dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å°±å·²ç»åœæ­¢äº†çš„å®¹å™¨&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="å®¹å™¨å·²å­˜åœ¨æ›´æ–°é‡å¯é…ç½®">å®¹å™¨å·²å­˜åœ¨æ›´æ–°é‡å¯é…ç½®&lt;/h3>
&lt;p>å¯èƒ½å®¹å™¨æˆ‘ä»¬å·²ç»ç”Ÿæˆäº†ï¼Œåé¢æƒ³å®ç°alwaysè¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥ç”¨åˆ°ä¸‹é¢çš„å‘½ä»¤ï¼š
&lt;code>docker container update --restart=always å®¹å™¨åXXX&lt;/code>
è¿™æ ·å°±è¾¾åˆ°äº†æƒ³è¦çš„ç›®çš„ã€‚&lt;/p></description></item><item><title>Centos5ä¸å‡çº§å†…æ ¸æ›´æ–°</title><link>http://localhost:1313/aLong/posts/centos5%E4%B8%8D%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0/</link><pubDate>Fri, 23 Aug 2019 17:37:03 +0000</pubDate><guid>http://localhost:1313/aLong/posts/centos5%E4%B8%8D%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E6%9B%B4%E6%96%B0/</guid><description>&lt;h3 id="å‰æ">å‰æ&lt;/h3>
&lt;p>å…¬å¸éœ€è¦ç¯å¢ƒCentos5, åˆä¸èƒ½å‡çº§å†…æ ¸.&lt;/p>
&lt;p>æŸ¥äº†ä¸€ä¸‹ å¤§æ¦‚æ˜¯ éœ€è¦ &lt;code>yum â€“exclude=kernel* update&lt;/code> æˆ–è€…ä¿®æ”¹ yum.conf&lt;/p>
&lt;h3 id="æµ‹è¯•ä¸€ä¸‹-å‡ºç°ä¸€ä¸ªé—®é¢˜">æµ‹è¯•ä¸€ä¸‹ å‡ºç°ä¸€ä¸ªé—®é¢˜:&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>Loaded plugins: fastestmirror, security
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Loading mirror speeds from cached hostfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>YumRepo Error: All mirror URLs are not using ftp, http&lt;span style="color:#f92672">[&lt;/span>s&lt;span style="color:#f92672">]&lt;/span> or file.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Eg. Invalid release/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>removing mirrorlist with no valid mirrors: /var/cache/yum/base/mirrorlist.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Error: Cannot find a valid baseurl &lt;span style="color:#66d9ef">for&lt;/span> repo: base
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ ¹æ®æŸ¥è¯¢åˆ°çš„ä¿¡æ¯æ˜¯,æ²¡æœ‰æ­£å¸¸çš„æº.&lt;/p>
&lt;h3 id="è§£å†³é—®é¢˜-æ ¹æ®ç½‘ä¸Šçš„æºåœ°å€-ä¿®æ”¹ä¸€ä¸‹">è§£å†³é—®é¢˜ æ ¹æ®ç½‘ä¸Šçš„æºåœ°å€ ä¿®æ”¹ä¸€ä¸‹:&lt;/h3>
&lt;p>ä½ç½®: &lt;em>/etc/yum.repos.d/CentOS-Base.repo&lt;/em>&lt;/p>
&lt;h3 id="ä¿®æ”¹å†…å®¹">ä¿®æ”¹å†…å®¹:&lt;/h3>
&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">[base]
name=CentOS-5.11 - Base
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=os
baseurl=http://vault.centos.org/5.11/os/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#released updates
[updates]
name=CentOS-5.11 - Updates
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=updates
baseurl=http://vault.centos.org/5.11/updates/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#packages used/produced in the build but not released
[addons]
name=CentOS-5.11 - Addons
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=addons
baseurl=http://vault.centos.org/5.11/addons/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#additional packages that may be useful
[extras]
name=CentOS-5.11 - Extras
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=extras
baseurl=http://vault.centos.org/5.11/extras/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-5.11 - Plus
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=centosplus
baseurl=http://vault.centos.org/5.11/centosplus/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5

#contrib - packages by Centos Users
[contrib]
name=CentOS-5.11 - Contrib
#mirrorlist=http://mirrorlist.centos.org/?release=5.11&amp;amp;arch=$basearch&amp;amp;repo=contrib
baseurl=http://vault.centos.org/5.11/contrib/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5
&lt;/code>&lt;/pre>&lt;p>ä¹‹å å†ä½¿ç”¨ä¸Šé¢çš„yum å»æ›´æ–°,å‘ç°yum è¯­å¥æ˜¯æœ‰é—®é¢˜çš„.&lt;/p></description></item><item><title>Centos7æ—¶é—´è®¾ç½®</title><link>http://localhost:1313/aLong/posts/centos7%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE/</link><pubDate>Fri, 19 Apr 2019 11:42:02 +0000</pubDate><guid>http://localhost:1313/aLong/posts/centos7%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE/</guid><description>&lt;h3 id="centos7æ—¶é—´ç›¸å…³">Centos7æ—¶é—´ç›¸å…³&lt;/h3>
&lt;h4 id="æŸ¥çœ‹æ—¶é—´">æŸ¥çœ‹æ—¶é—´&lt;/h4>
&lt;p>date
hwclock ç¡¬ä»¶æ—¶é—´
timedatectl å„æ—¶é—´çŠ¶æ€&lt;/p>
&lt;h4 id="è®¾ç½®æ›´æ–°æœåŠ¡æ—¶é—´">è®¾ç½®&amp;amp;æ›´æ–°æœåŠ¡æ—¶é—´&lt;/h4>
&lt;p>å®‰è£…ntpdate
&lt;code>yum install utp ntpdate&lt;/code>&lt;/p>
&lt;h4 id="è®¾ç½®åŒæ­¥">è®¾ç½®åŒæ­¥&lt;/h4>
&lt;p>&lt;code>ntpdate cn.pool.ntp.org&lt;/code> (time.windows.com) åœ°å€çœ‹å–œå¥½&lt;/p>
&lt;h4 id="è®¾ç½®ç¡¬ä»¶æ—¶é—´">è®¾ç½®ç¡¬ä»¶æ—¶é—´&lt;/h4>
&lt;p>hwclock &amp;ndash;systohc&lt;/p>
&lt;h4 id="è®¾ç½®æ—¶åŒº">è®¾ç½®æ—¶åŒº&lt;/h4>
&lt;p>timedatectl set-timezone Asia/Shanghai ï¼ˆä¸Šæµ·ï¼‰&lt;/p>
&lt;p>timedatectl å¾ˆå¤šè®¾ç½®ï¼Œéœ€è¦è¯·æŸ¥ç›¸å…³èµ„æ–™ã€‚&lt;/p></description></item><item><title>Centos7é˜²ç«å¢™ç›¸å…³è®¾ç½®</title><link>http://localhost:1313/aLong/posts/centos7%E9%98%B2%E7%81%AB%E5%A2%99%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/</link><pubDate>Thu, 18 Apr 2019 17:44:22 +0000</pubDate><guid>http://localhost:1313/aLong/posts/centos7%E9%98%B2%E7%81%AB%E5%A2%99%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/</guid><description>&lt;h4 id="centos7ä¸ä¹‹å‰ä¸å¤ªä¸€æ ·">Centos7ä¸ä¹‹å‰ä¸å¤ªä¸€æ ·&lt;/h4>
&lt;p>ä»¥å‰éƒ½æ˜¯ç”¨iptablesï¼Œå…¬å¸æœåŠ¡å™¨ç¯å¢ƒäº‹7ï¼Œå‡‘å·§ä¸ç†Ÿä¸€å°æ–°æœåŠ¡ã€‚æˆ‘ä¸ºäº†æµ‹è¯•ï¼Œå†æœ¬åœ°è™šæœºä¸Šè£…äº†ä¸€å°ã€‚
è¿™é‡Œé»˜è®¤é˜²ç«å¢™æ˜¯ firewallï¼Œå…¶å®ä¸ºäº†çœäº‹è¿˜æ˜¯å¯ä»¥å®‰è£…ä¸€ä¸ªiptablesçš„ã€‚è¿™é‡Œå­¦ä¹ ä¸€ä¸‹firewallä¸€äº›æ“ä½œã€‚&lt;/p>
&lt;h4 id="æŸ¥çœ‹é˜²ç«å¢™æœåŠ¡çŠ¶æ€">æŸ¥çœ‹é˜²ç«å¢™æœåŠ¡çŠ¶æ€&lt;/h4>
&lt;p>&lt;code>systemctl status firewalld&lt;/code>&lt;/p>
&lt;p>####æŸ¥çœ‹fé˜²ç«å¢™çŠ¶æ€
&lt;code>firewall-cmd --state&lt;/code>&lt;/p>
&lt;h4 id="æŸ¥çœ‹è§„åˆ™">æŸ¥çœ‹è§„åˆ™&lt;/h4>
&lt;p>&lt;code>firewall-cmd --list-all &lt;/code>&lt;/p>
&lt;p>####åœæ­¢&amp;amp;å¼€å¯é˜²&amp;amp;é‡å¯ç«å¢™
&lt;code>systemctl stop firewalld.service&lt;/code>
&lt;code>systemctl start firewalld.service&lt;/code>
&lt;code>systemctl restart firewalld.service&lt;/code>&lt;/p>
&lt;h4 id="å…³é—­é˜²ç«å¢™">å…³é—­é˜²ç«å¢™&lt;/h4>
&lt;p>&lt;code>systemctl disable firewalld.service&lt;/code>&lt;/p>
&lt;h4 id="é‡è½½é˜²ç«å¢™">é‡è½½é˜²ç«å¢™&lt;/h4>
&lt;p>&lt;code>firewall-cmd â€”reload&lt;/code>&lt;/p>
&lt;h4 id="æŸ¥è¯¢å¼€æ”¾ç«¯å£">æŸ¥è¯¢å¼€æ”¾ç«¯å£&lt;/h4>
&lt;p>&lt;code>firewall-cmd --list-ports&lt;/code>&lt;/p>
&lt;h4 id="å¼€æ”¾ä¸€ä¸ªç«¯å£-ä¾‹å¦‚tcp-8010">å¼€æ”¾ä¸€ä¸ªç«¯å£ ä¾‹å¦‚tcp 8010&lt;/h4>
&lt;p>firewall-cmd &amp;ndash;zone=public &amp;ndash;add-port=80/tcp &amp;ndash;permanent&lt;/p>
&lt;p>â€“zone #ä½œç”¨åŸŸ
â€“add-port=8010/tcp #æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®
â€“permanent #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ&lt;/p>
&lt;h4 id="æŸ¥è¯¢æŸç«¯å£æ˜¯å¦å¼€æ”¾8010">æŸ¥è¯¢æŸç«¯å£æ˜¯å¦å¼€æ”¾(8010)&lt;/h4>
&lt;p>&lt;code>firewall-cmd --query-port=8010/tcp&lt;/code>&lt;/p>
&lt;h4 id="ç§»é™¤ç«¯å£è§„åˆ™">ç§»é™¤ç«¯å£è§„åˆ™&lt;/h4>
&lt;p>&lt;code>firewall-cmd --permanent --remove-port=8010/tcp&lt;/code>&lt;/p></description></item><item><title>Centos7å¯åŠ¨ç­‰çº§è®¾ç½®</title><link>http://localhost:1313/aLong/posts/centos7%E5%90%AF%E5%8A%A8%E7%AD%89%E7%BA%A7%E8%AE%BE%E7%BD%AE/</link><pubDate>Mon, 15 Apr 2019 16:55:19 +0000</pubDate><guid>http://localhost:1313/aLong/posts/centos7%E5%90%AF%E5%8A%A8%E7%AD%89%E7%BA%A7%E8%AE%BE%E7%BD%AE/</guid><description>&lt;h4 id="centos7å¯åŠ¨çº§åˆ«">Centos7å¯åŠ¨çº§åˆ«&lt;/h4>
&lt;p>å¯åŠ¨çº§åˆ«åˆ†ä¸º7ä¸ªï¼š
0 - ç³»ç»ŸåœæœºçŠ¶æ€
1 - å•ç”¨æˆ·å·¥ä½œçŠ¶æ€
2 - å¤šç”¨æˆ·çŠ¶æ€ï¼ˆæ²¡æœ‰NFSï¼‰
3 - å¤šç”¨æˆ·çŠ¶æ€ï¼ˆæœ‰NFSï¼‰
4 - ç³»ç»Ÿæœªä½¿ç”¨ï¼Œç•™ç»™ç”¨æˆ·
5 - å›¾å½¢ç•Œé¢
6 - ç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡æ–°å¯åŠ¨&lt;/p>
&lt;h4 id="åˆ‡æ¢å¯åŠ¨çº§åˆ«">åˆ‡æ¢å¯åŠ¨çº§åˆ«&lt;/h4>
&lt;p>ä¹‹å‰ä¸€ç›´éƒ½æ˜¯åœ¨ç§ç«¯ä¸­è¾“å…¥æŒ‡ä»¤ init3 åˆ‡æ¢å¯åŠ¨çº§åˆ«ã€‚
è®¾ç½®æ°¸ä¹…å¯åŠ¨3çº§åˆ«ï¼Œ &lt;code>vi /etc/inittab&lt;/code> æŠŠinit3è®¾ç½®é»˜è®¤å³å¯ã€‚&lt;/p>
&lt;p>&lt;strong>centos7 è®¾ç½®å‡ºç°ä¸åŒ&lt;/strong>
runlevelsè¢«targetsæ‰€å–ä»£ï¼Œå³CentOS7é‡‡ç”¨åŠ è½½targetçš„æ–¹å¼æ¥æ›¿ä»£ä¹‹å‰çš„å¯åŠ¨çº§åˆ«ã€‚
multi-user.target = init3
graphical.target = init5
æˆ‘ä»¬æ—¥å¸¸å®ç”¨å›¾å½¢çª—å£init5ï¼Œæˆ‘ä»¬ä¸éœ€è¦å›¾å½¢ï¼Œå¯ä»¥åˆ‡æ¢åˆ°init3ç­‰å¯åŠ¨çº§åˆ«ä¸Šã€‚
&lt;code>systemctl set-default multi-user.target&lt;/code> è®¾ç½®ä¸ºinit3
&lt;code>systemctl set-default graphical.target&lt;/code> è®¾ç½®ä¸ºinit5&lt;/p></description></item></channel></rss>