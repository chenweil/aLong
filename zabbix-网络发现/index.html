<!doctype html><html lang=en><head><script src="/aLong/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=aLong/livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Zabbix6 网络发现</title>
<meta name=description content="Zabbix6 网络发现
功能 快速发现并添加主机
简单的管理
随着环境的改变而快速搭建系统
发现配置依据 IP地址段
基于服务(FTP、SSH、Web、POP3、IMAP、TCP&mldr;)的
从Zabbix-Agent接收到的信息
SNMP agent接收的信息
添加方式 创建 Discovery rule …"><meta name=keywords content='blog,aLong,blog.51ai.vip,Zabbix'><meta property="og:url" content="http://localhost:1313/aLong/zabbix-%E7%BD%91%E7%BB%9C%E5%8F%91%E7%8E%B0/"><meta property="og:type" content="website"><meta property="og:title" content="Zabbix6 网络发现"><meta property="og:description" content="Zabbix6 网络发现
功能 快速发现并添加主机
简单的管理
随着环境的改变而快速搭建系统
发现配置依据 IP地址段
基于服务(FTP、SSH、Web、POP3、IMAP、TCP&mldr;)的
从Zabbix-Agent接收到的信息
SNMP agent接收的信息
添加方式 创建 Discovery rule …"><meta property="og:image" content="http://localhost:1313/aLong/"><meta property="og:image:secure_url" content="http://localhost:1313/aLong/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Zabbix6 网络发现"><meta name=twitter:description content="Zabbix6 网络发现
功能 快速发现并添加主机
简单的管理
随着环境的改变而快速搭建系统
发现配置依据 IP地址段
基于服务(FTP、SSH、Web、POP3、IMAP、TCP&mldr;)的
从Zabbix-Agent接收到的信息
SNMP agent接收的信息
添加方式 创建 Discovery rule …"><meta property="twitter:domain" content="http://localhost:1313/aLong/zabbix-%E7%BD%91%E7%BB%9C%E5%8F%91%E7%8E%B0/"><meta property="twitter:url" content="http://localhost:1313/aLong/zabbix-%E7%BD%91%E7%BB%9C%E5%8F%91%E7%8E%B0/"><meta name=twitter:image content="http://localhost:1313/aLong/"><link rel=canonical href=http://localhost:1313/aLong/zabbix-%E7%BD%91%E7%BB%9C%E5%8F%91%E7%8E%B0/><link rel=stylesheet type=text/css href=/aLong/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/aLong/css/main.min.css><link id=dark-theme rel=stylesheet href=/aLong/css/dark.min.css><script src=/aLong/js/bundle.min.9a920d7dabdbad8363b6a0a94e29a9dfebdb7ee64cfcb193a0145e512ef2bdab.js integrity="sha256-mpINfavbrYNjtqCpTimp3+vbfuZM/LGToBReUS7yvas="></script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=nav-title><a class=nav-brand href=http://localhost:1313/aLong/>aLong Blog</a></div><div class=nav-links><div class=nav-link><a href=http://localhost:1313/aLong/><span data-feather=home></span> Home</a></div><div class=nav-link><a href=http://localhost:1313/aLong/posts/>Posts</a></div><div class=nav-link><a href=http://localhost:1313/aLong/tags/>Tags</a></div><div class=nav-link><a href=http://localhost:1313/aLong/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target"></span>
<a><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://localhost:1313/aLong/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=http://localhost:1313/aLong/posts/>Posts</a></li><li class=nav-item><a href=http://localhost:1313/aLong/tags/>Tags</a></li><li class=nav-item><a href=http://localhost:1313/aLong/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Zabbix6 网络发现</h1><small role=doc-subtitle></small><p class=post-date>2022/01/14</p><ul class=post-tags><li class=post-tag><a href=http://localhost:1313/aLong/tags/zabbix>Zabbix</a></li></ul></div><div class=post-content><p>Zabbix6 网络发现</p><h3 id=功能>功能</h3><ul><li><p>快速发现并添加主机</p></li><li><p>简单的管理</p></li><li><p>随着环境的改变而快速搭建系统</p></li></ul><h3 id=发现配置依据>发现配置依据</h3><ul><li><p>IP地址段</p></li><li><p>基于服务(FTP、SSH、Web、POP3、IMAP、TCP&mldr;)的</p></li><li><p>从Zabbix-Agent接收到的信息</p></li><li><p>SNMP agent接收的信息</p></li></ul><h3 id=添加方式>添加方式</h3><ol><li><p>创建 Discovery rule</p><p><img src=https://s2.loli.net/2022/05/30/8kqFzeiKIAr6fDN.png alt=3qoFJE.png></p><ul><li><p>Name：规则名称（唯一）</p></li><li><p>Discovery by proxy： 是否由代理执行</p></li><li><p>IP range： IP地址范围</p></li></ul></li></ol><blockquote><p>单个IP: 192.168.1.33
IP段: 192.168.1-10.1-255. 范围受限于覆盖地址的总数（小于64K）。
子网掩码: : 192.168.4.0/24
支持的子网掩码:
/16 - /30 for IPv4 addresses
/112 - /128 for IPv6 addresses\IP列表: 192.168.1.1-255, 192.168.2.1-100, 192.168.2.200, 192.168.4.0/24
Zabbix 3.0.0起，此字段支持空格，表格和多行。</p></blockquote><ul><li><p>Update interval: Zabbix执行规则的频率</p></li><li><p>Checks: 发现的方式</p><p><img src=https://s2.loli.net/2022/05/30/Y8R6VhGNgmFq7KS.png alt=FTCW1e.png></p></li><li><p>Device uniqueness criteria：设备唯一标识</p></li><li><p>Host name ： 主机名</p></li><li><p>Visible name：描述名</p><p><img src=https://s2.loli.net/2022/05/30/8azsd4mVbDPU39L.png alt=ohbmIZ.png></p><p>这三个选项是根据，checks里面的相关类型出来的数据。基本上都有IP地址，当checks Type 选择了 SNMP或者zabbix agent时，下面选项可以提供这两种对应的数据作为选项。</p><p>唯一标识可以通过IP(默认)，或者SNMP的取值，或者zabbix agent取值。重复的名称不会处理。</p><p>Host name 和 Visible name选项类似。Host name肯定是要唯一的。</p></li></ul><ol start=2><li><p>创建 Discovery actions</p><p>action配置：
<img src=https://s2.loli.net/2022/05/30/NWKO1iMeCRHqAgp.png alt=UnF5zk.png></p><p>Name ： action 名称</p><p>Conditions：action的条件</p><p>Enabled: action的开关</p><p>条件详情：</p><p><img src=https://s2.loli.net/2022/05/30/W3ELpOmN2x5tU8e.png alt=mbUrYY.png></p><p>Type多个方式：</p><p><img src=https://s2.loli.net/2022/05/30/mVhnrkE9f2tlBUp.png alt=T7qbkT.png></p><p>可以通过多种类型适配条件。</p><p>根据选择的Type类型，下面的Operator是根据Type来配置的选项。</p><p>Operator： 基本就是 等于或不等于。</p><p>第三个选项是动态的，当选择 Type 是Discovery check，下面是配置 Discovery check的名称。</p><p>如果Type 是Host IP，那么第三个选项就变成了Value。</p><p>配置Operations：</p><p>配置这个Operations 的意思是，当通过前面action条件匹配的到数据后续的操作内容。例如加入/移除设备组、关联/取消模版、发送通知等操作。</p><p><img src=https://s2.loli.net/2022/05/30/DOEN57RnsWM8cmA.png alt=yUO3dE.png></p><h3 id=验证结果>验证结果</h3><p>我上面截图的例子中：</p><p>actions 配置的内容为，通过icmp ping 发现负责此条件的设备，把这些设备分配到xxx网络摄像头的设备组里；并把主机关联的模版是icmp ping。</p><p>发现之后的结果就是：</p><p>在内网找到很多摄像头</p><p><img src=https://s2.loli.net/2022/05/30/sExWG2UNDCO3ld1.png alt=aj6697.png></p></li></ol></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div></main><footer class=footer><span>&copy; 2022 aLong</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>